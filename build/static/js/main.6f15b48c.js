/*! For license information please see main.6f15b48c.js.LICENSE.txt */
(()=>{var e={40:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(867));n(88);var l=o(n(258));t.default=function(e){var t=e.id,n=e.onChange,r=e.value,i=void 0===r?"":r,a=e.placeholder,o=e.name,u=(0,s.useMemo)((function(){return new Date}),[]),c=(0,s.useState)(null),d=c[0],h=c[1],f=(0,s.useState)(u.getMonth()),p=f[0],m=f[1],g=(0,s.useState)(u.getFullYear()),v=g[0],x=g[1],y=(0,s.useState)([]),b=y[0],w=y[1],k=(0,s.useState)(!1),_=k[0],C=k[1],S=(0,s.useState)("day"),E=S[0],N=S[1],R=(0,s.useState)([]),T=R[0],I=R[1],D=(0,s.useState)(!1),A=D[0],P=D[1],M=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],O="SG-datepicker",F=(0,s.useRef)(null),j=(0,s.useRef)(null),L=(0,s.useCallback)((function(){C(!1),N("day");var e=d?d.getMonth():u.getMonth(),t=d?d.getFullYear():u.getFullYear();m(e),x(t)}),[u,d]);(0,s.useEffect)((function(){i?new Date(i):h(null)}),[i]),(0,s.useEffect)((function(){A&&null!==j.current&&n&&(n({target:j.current}),P(!1))}),[A,n]),(0,l.default)(F,L,_),(0,s.useEffect)((function(){for(var e=[],t=v-10;t<v+10;t++)e.push(t);I(e)}),[v]),(0,s.useEffect)((function(){for(var e=new Date(v,p,1).getDay(),t=[],n=e+new Date(v,p+1,0).getDate()>35?6:5,r=0;r<n;r++){for(var i=[],a=7*r-e,o=1;o<=7;o++){var s=a+o;i.push(new Date(v,p,s))}t.push(i)}w(t)}),[v,p]);var B=function(e){var t=e.target.closest("."+O+"__day");t&&t instanceof HTMLElement&&(h(new Date(t.id)),C(!1),P(!0))},z=function(e){e.preventDefault(),e.stopPropagation(),_?L():C(!0)},W=function(e,t,n){switch(void 0===n&&(n="day"),e.preventDefault(),n){case"day":"prev"===t&&(0===p?(m(11),x(v-1)):m(p-1)),"next"===t&&(11===p?(m(0),x(v+1)):m(p+1));break;case"year":if("prev"===t){for(var r=[],i=T[0]-20;i<T[0];i++)r.push(i);I(r)}if("next"===t){for(r=[],i=T[T.length-1]+1;i<=T[T.length-1]+20;i++)r.push(i);I(r)}}},V=function(e,t){void 0===e&&(e=null),e&&e.preventDefault(),N(t)};return s.default.createElement("div",{className:O},s.default.createElement("div",{className:O+"__input-container",onKeyDown:z,onClick:z},s.default.createElement("input",{type:"text",id:t,value:d?function(e){var t=function(e){return e<10?"0"+e:e};return t(e.getMonth()+1)+"/"+t(e.getDate())+"/"+e.getFullYear()}(d):"",readOnly:!0,ref:j,placeholder:a,name:o}),s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"calendar-icon"},s.default.createElement("path",{d:"M12,14a1,1,0,1,0-1-1A1,1,0,0,0,12,14Zm5,0a1,1,0,1,0-1-1A1,1,0,0,0,17,14Zm-5,4a1,1,0,1,0-1-1A1,1,0,0,0,12,18Zm5,0a1,1,0,1,0-1-1A1,1,0,0,0,17,18ZM7,14a1,1,0,1,0-1-1A1,1,0,0,0,7,14ZM19,4H18V3a1,1,0,0,0-2,0V4H8V3A1,1,0,0,0,6,3V4H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm1,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V10H20ZM20,8H4V7A1,1,0,0,1,5,6H19a1,1,0,0,1,1,1ZM7,18a1,1,0,1,0-1-1A1,1,0,0,0,7,18Z"}))),_&&s.default.createElement("div",{className:O+"__calendar-container",ref:F},"day"===E&&s.default.createElement("div",null,s.default.createElement("div",{className:O+"__navigation"},s.default.createElement("div",{className:O+"__navigation-prev",onClick:function(e){W(e,"prev")}},s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29 29"},s.default.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"m20.5 11.5-6 6-6-6"}))),s.default.createElement("button",{onClick:function(e){V(e,"month")}},M[p]),s.default.createElement("button",{onClick:function(e){V(e,"year")}},v),s.default.createElement("div",{className:O+"__navigation-next",onClick:function(e){W(e,"next")}},s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29 29"},s.default.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"m20.5 11.5-6 6-6-6"})))),s.default.createElement("table",{className:O+"__body"},s.default.createElement("thead",{className:O+"__header"},s.default.createElement("tr",null,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e,t){return s.default.createElement("th",{key:t+e},e)})))),s.default.createElement("tbody",null,b.map((function(e,t){return s.default.createElement("tr",{key:e.toString()+t},e.map((function(e,t){var n=O+"__day";return e.getMonth()!==p&&(n+=" off-month"),d&&e.toDateString()===d.toDateString()&&(n+=" selected"),e.toDateString()===u.toDateString()&&(n+=" today"),s.default.createElement("td",{key:e.toString()+t,className:n,id:"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),onClick:B},e.getDate())})))})))),s.default.createElement("span",{className:O+"__today",onClick:function(){m(u.getMonth()),x(u.getFullYear())}},"Today")),"month"===E&&s.default.createElement("div",{className:O+"__month-container"},M.map((function(e,t){return s.default.createElement("div",{className:"".concat(O,"__month").concat(p===t?" selected":""),key:e+t,onClick:function(){!function(e){N("day"),m(e)}(t)}},e)}))),"year"===E&&s.default.createElement("div",null,s.default.createElement("div",{className:O+"__navigation"},s.default.createElement("div",{className:O+"__navigation-prev",onClick:function(e){W(e,"prev","year")}},s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29 29"},s.default.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"m20.5 11.5-6 6-6-6"}))),s.default.createElement("span",null,T[0]+" - "+T[T.length-1]),s.default.createElement("div",{className:O+"__navigation-next",onClick:function(e){W(e,"next","year")}},s.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29 29"},s.default.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"m20.5 11.5-6 6-6-6"})))),s.default.createElement("div",{className:O+"__year-container"},T.map((function(e,t){return s.default.createElement("div",{className:"".concat(O,"__year").concat(v===e?" selected":""),key:e+t,onClick:function(){!function(e){N("day"),x(e)}(e)}},e)}))))))}},258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(867);t.default=function(e,t,n){(0,r.useEffect)((function(){var r=function(n){if(e.current){var r=e.current.getBoundingClientRect();(n.clientX<r.left||n.clientX>r.right||n.clientY<r.top||n.clientY>r.bottom)&&t()}};return n?setTimeout((function(){document.addEventListener("click",r)})):document.removeEventListener("click",r),function(){document.removeEventListener("click",r)}}),[e,t,n])}},206:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DatePicker=void 0;var i=r(n(40));t.DatePicker=i.default},422:(e,t,n)=>{"use strict";var r=n(452);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},731:(e,t,n)=>{e.exports=n(422)()},452:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},772:(e,t,n)=>{"use strict";var r=n(867),i=n(882);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,j=Object.assign;function L(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function W(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Ce=null;function Se(e){if(e=yi(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Ee(e){_e?Ce?Ce.push(e):Ce=[e]:_e=e}function Ne(){if(_e){var e=_e,t=Ce;if(Ce=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Re(e,t){return e(t)}function Te(){}var Ie=!1;function De(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Re(e,t,n)}finally{Ie=!1,(null!==_e||null!==Ce)&&(Te(),Ne())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Pe=!1}function Oe(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Fe=!1,je=null,Le=!1,Be=null,ze={onError:function(e){Fe=!0,je=e}};function We(e,t,n,r,i,a,o,s,l){Fe=!1,je=null,Oe.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,_t,Ct,St,Et=!1,Nt=[],Rt=null,Tt=null,It=null,Dt=new Map,At=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=xi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Lt(e)&&n.delete(t)}function zt(){Et=!1,null!==Rt&&Lt(Rt)&&(Rt=null),null!==Tt&&Lt(Tt)&&(Tt=null),null!==It&&Lt(It)&&(It=null),Dt.forEach(Bt),At.forEach(Bt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Wt(t,e)}if(0<Nt.length){Wt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&Wt(Rt,e),null!==Tt&&Wt(Tt,e),null!==It&&Wt(It,e),Dt.forEach(t),At.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)jt(n),null===n.blockedOn&&Pt.shift()}var Ut=b.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=yt,a=Ut.transition;Ut.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,Ut.transition=a}}function qt(e,t,n,r){var i=yt,a=Ut.transition;Ut.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,Ut.transition=a}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Ft(Rt,e,t,n,r,i),!0;case"dragenter":return Tt=Ft(Tt,e,t,n,r,i),!0;case"mouseover":return It=Ft(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Ft(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Ft(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Xt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=xi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=j({},un,{view:0,detail:0}),hn=an(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(j({},fn,{dataTransfer:0})),gn=an(j({},dn,{relatedTarget:0})),vn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(xn),bn=an(j({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return Cn}var En=j({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(En),Rn=an(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Dn),Pn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Fn=c&&"TextEvent"in window&&!On,jn=c&&(!Mn||On&&8<On&&11>=On),Ln=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){Lr(e,0)}function Yn(e){if(K(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,we(e)),De(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,xr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=qr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Cr={};function Sr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return _r[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Sr("animationend"),Nr=Sr("animationiteration"),Rr=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Mr=Dr[Pr];Ar(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Ar(Er,"onAnimationEnd"),Ar(Nr,"onAnimationIteration"),Ar(Rr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(We.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=je;Fe=!1,je=null,Le||(Le=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}}}if(Le)throw e=Be,Le=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Wr]){e[Wr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,zr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=xi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var s=Ir.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Nr:case Rr:l=vn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ae(p,h))&&c.push(Gr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!xi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?xi(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:bi(l),f=null==u?s:bi(u),(s=new c(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,xi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)c=Kr(c),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Kr(c),h=Kr(h)}c=null}else c=null;null!==l&&Xr(o,s,l,c,!1),null!==u&&null!==d&&Xr(o,d,u,c,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Hn(s))if(Qn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,xr=null);break;case"focusout":xr=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var x;if(Mn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vn?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(x=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Vn=!0)),0<(v=qr(r,y)).length&&(y=new bn(y,e,null,n,i),o.push({event:y,listeners:v}),x?y.data=x:null!==(x=Wn(n))&&(y.data=x))),(x=Fn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&zn(e,t)?(e=en(),Zt=Jt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=x))}Lr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ae(n,a))&&o.unshift(Gr(n,l,s)):i||null!=(l=Ae(n,a))&&o.push(Gr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function xi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[fi]||null}var ki=[],_i=-1;function Ci(e){return{current:e}}function Si(e){0>_i||(e.current=ki[_i],ki[_i]=null,_i--)}function Ei(e,t){_i++,ki[_i]=e.current,e.current=t}var Ni={},Ri=Ci(Ni),Ti=Ci(!1),Ii=Ni;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ti),Si(Ri)}function Mi(e,t,n){if(Ri.current!==Ni)throw Error(a(168));Ei(Ri,t),Ei(Ti,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,U(e)||"Unknown",i));return j({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ii=Ri.current,Ei(Ri,e),Ei(Ti,Ti.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Si(Ti),Si(Ri),Ei(Ri,e)):Si(Ti),Ei(Ti,n)}var Li=null,Bi=!1,zi=!1;function Wi(e){null===Li?Li=[e]:Li.push(e)}function Vi(){if(!zi&&null!==Li){zi=!0;var e=0,t=yt;try{var n=Li;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Bi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Ke(Ze,Vi),i}finally{yt=t,zi=!1}}return null}var Ui=[],Hi=0,Gi=null,qi=0,Ki=[],Xi=0,Yi=null,$i=1,Qi="";function Ji(e,t){Ui[Hi++]=qi,Ui[Hi++]=Gi,Gi=e,qi=t}function Zi(e,t,n){Ki[Xi++]=$i,Ki[Xi++]=Qi,Ki[Xi++]=Yi,Yi=e;var r=$i;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Qi=a+e}else $i=1<<a|n<<i|r,Qi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Ui[--Hi],Ui[Hi]=null,qi=Ui[--Hi],Ui[Hi]=null;for(;e===Yi;)Yi=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null,$i=Ki[--Xi],Ki[Xi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Au(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Au(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var va=Ci(null),xa=null,ya=null,ba=null;function wa(){ba=ya=xa=null}function ka(e){var t=va.current;Si(va),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ca(e,t){xa=e,ba=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===xa)throw Error(a(308));ya=e,xa.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Ea=null;function Na(e){null===Ea?Ea=[e]:Ea.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Na(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ta(e,r)}function Ta(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ia=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ma(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ta(e,n)}return null===(i=r.interleaved)?(t.next=t,Na(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ta(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Ia=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Ia=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=d}}function La(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wa={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ma(e,a,i))&&(ru(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ma(e,a,i))&&(ru(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ma(e,i,r))&&(ru(t,e,r,n),Oa(t,e,r))}};function Va(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ua(e,t,n){var r=!1,i=Ni,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ai(t)?Ii:Ri.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ni),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wa.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ai(t)?Ii:Ri.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Wa.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Xa(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Fu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case k:return(t=Bu(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Fu(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),ia&&Ji(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return ia&&Ji(i,m),u}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),u}function g(i,s,l,u){var c=O(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,v=null,x=l.next();null!==m&&!x.done;g++,x=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(i,m,x.value,u);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),s=o(y,s,g),null===d?c=y:d.sibling=y,d=y,m=v}if(x.done)return n(i,m),ia&&Ji(i,g),c;if(null===m){for(;!x.done;g++,x=l.next())null!==(x=h(i,x.value,u))&&(s=o(x,s,g),null===d?c=x:d.sibling=x,d=x);return ia&&Ji(i,g),c}for(m=r(i,m);!x.done;g++,x=l.next())null!==(x=p(m,i,g,x.value,u))&&(e&&null!==x.alternate&&m.delete(null===x.key?g:x.key),s=o(x,s,g),null===d?c=x:d.sibling=x,d=x);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ji(i,g),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===_){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===A&&Xa(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=qa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((a=Fu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Ou(o.type,o.key,o.props,null,r.mode,l)).ref=qa(r,a,o),l.return=r,r=l)}return s(r);case k:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bu(o,r.mode,l)).return=r,r=a}return s(r);case A:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(O(o))return g(r,a,o,l);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Lu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Qa=Ya(!1),Ja={},Za=Ci(Ja),eo=Ci(Ja),to=Ci(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=le(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ci(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,xo=!1,yo=!1,bo=0,wo=0;function ko(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),yo){o=0;do{if(yo=!1,bo=0,25<=o)throw Error(a(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=us,e=n(r,i)}while(yo)}if(ho.current=os,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,xo=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function No(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Ro(e,t){return"function"===typeof t?t(e):t}function To(e){var t=No(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((po&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,mo.lanes|=d,jl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=No(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ao(e,t){var n=mo,r=No(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ho(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Bo(9,Mo.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&jo(e)}function Oo(e,t,n){return n((function(){Fo(t)&&jo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Ta(e,1);null!==t&&ru(t,e,1,-1)}function Lo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return No().memoizedState}function Wo(e,t,n,r){var i=Eo();mo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var i=No();r=void 0===r?null:r;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}mo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function Uo(e,t){return Wo(8390656,8,e,t)}function Ho(e,t){return Vo(2048,8,e,t)}function Go(e,t){return Vo(4,2,e,t)}function qo(e,t){return Vo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,jl|=n,e.baseState=!0),t)}function Zo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{yt=n,fo.transition=r}}function es(){return No().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ra(e,t,n,r))){ru(n,e,r,tu()),as(n,t,r)}}function ns(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Na(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ra(e,t,i,r))&&(ru(n,e,r,i=tu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){yo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var os={readContext:Sa,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Lo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Mo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Il.identifierPrefix;if(ia){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:qo,useMemo:Qo,useReducer:To,useRef:zo,useState:function(){return To(Ro)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(No(),go.memoizedState,e)},useTransition:function(){return[To(Ro)[0],No().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:Go,useLayoutEffect:qo,useMemo:Qo,useReducer:Io,useRef:zo,useState:function(){return Io(Ro)},useDebugValue:Yo,useDeferredValue:function(e){var t=No();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Io(Ro)[0],No().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,ql=r),hs(0,t)},n}function ms(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Ma(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Qa(t,null,n,r):$a(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var a=t.ref;return Ca(t,i),r=Co(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Mu(a,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ns(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ml,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ml,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ml,Pl),Pl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ml,Pl),Pl|=r;return ws(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,i){var a=Ai(n)?Ii:Ri.current;return a=Di(t,a),Ca(t,i),n=Co(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Rs(e,t,n,r,i){if(Ai(n)){var a=!0;Fi(t)}else a=!1;if(Ca(t,i),null===t.stateNode)Hs(e,t),Ua(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Sa(u):u=Di(t,u=Ai(n)?Ii:Ri.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ha(t,o,r,u),Ia=!1;var h=t.memoizedState;o.state=h,ja(t,r,o,i),l=t.memoizedState,s!==r||h!==l||Ti.current||Ia?("function"===typeof c&&(za(t,n,c,r),l=t.memoizedState),(s=Ia||Va(t,n,s,r,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ga(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Sa(l):l=Di(t,l=Ai(n)?Ii:Ri.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Ha(t,o,r,l),Ia=!1,h=t.memoizedState,o.state=h,ja(t,r,o,i);var p=t.memoizedState;s!==d||h!==p||Ti.current||Ia?("function"===typeof f&&(za(t,n,f,r),p=t.memoizedState),(u=Ia||Va(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,a,i)}function Ts(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Gs(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),ro(e,t.containerInfo)}function Ds(e,t,n,r,i){return fa(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var As,Ps,Ms,Os,Fs={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=ju(l,i,0,null),e=Fu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Fs,e):Bs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(o=Fu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Fs,o);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ta(e,i),ru(r,e,i,-1))}return gu(),zs(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ru.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Xi++]=$i,Ki[Xi++]=Qi,Ki[Xi++]=Yi,$i=e.id,Qi=e.overflow,Yi=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Mu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Mu(r,s):(s=Fu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,i}return e=(s=e.child).sibling,i=Mu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Mu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ai(t.type)&&Pi(),Ks(t),null;case 3:return r=t.stateNode,io(),Si(Ti),Si(Ri),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Ps(e,t),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":$(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in xe(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":q(r),Z(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in xe(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ol&&(Ol=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),Ps(e,t),null===e&&Vr(t.stateNode.containerInfo),Ks(t),null;case 10:return ka(t.type._context),Ks(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Ul&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Ks(t),null}else 2*Qe()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ti),Si(Ri),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return ka(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Ms=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in xe(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Su(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,n,a)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Qs&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,fl(e,t,n),Qs=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(o,s,i),dl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),xl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Su(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Su(e,e.return,g)}}break;case 1:gl(t,e),xl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),xl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Su(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):y(i,d,h,c)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Su(e,e.return,g)}}break;case 6:if(gl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Su(e,e.return,g)}}break;case 3:if(gl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Su(e,e.return,g)}break;case 4:default:gl(t,e),xl(e);break;case 13:gl(t,e),xl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Qe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gl(t,e),Qs=c):gl(t,e),xl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Su(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,Zs=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Su(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Su(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),xl(e),4&r&&ml(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=$s;var u=Qs;if($s=o,(Qs=l)&&!u)for(Zs=i;null!==Zs;)l=(o=Zs).child,22===o.tag&&null!==o.memoizedState?_l(i):null!==l?(l.return=o,Zs=l):_l(i);for(;null!==a;)Zs=a,bl(a,t,n),a=a.sibling;Zs=i,$s=s,Qs=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wl(e)}}function wl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&La(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}La(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&al(t)}catch(f){Su(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function kl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _l(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var a=t.return;try{al(t)}catch(l){Su(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Cl,Sl=Math.ceil,El=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Rl=b.ReactCurrentBatchConfig,Tl=0,Il=null,Dl=null,Al=0,Pl=0,Ml=Ci(0),Ol=0,Fl=null,jl=0,Ll=0,Bl=0,zl=null,Wl=null,Vl=0,Ul=1/0,Hl=null,Gl=!1,ql=null,Kl=null,Xl=!1,Yl=null,$l=0,Ql=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Tl)?Qe():-1!==Zl?Zl:Zl=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Al?Al&-Al:null!==ma.transition?(0===eu&&(eu=mt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ru(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ll|=n),4===Ol&&lu(e,Al)),iu(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Ul=Qe()+500,Bi&&Vi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bi=!0,Wi(e)}(uu.bind(null,e)):Wi(uu.bind(null,e)),oi((function(){0===(6&Tl)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Zl=-1,eu=0,0!==(6&Tl))throw Error(a(327));var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Tl;Tl|=2;var o=mu();for(Il===e&&Al===t||(Hl=null,Ul=Qe()+500,fu(e,t));;)try{yu();break}catch(l){pu(e,l)}wa(),El.current=o,Tl=i,null!==Dl?t=0:(Il=null,Al=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Fl,fu(e,0),lu(e,r),iu(e,Qe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Fl,fu(e,0),lu(e,r),iu(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:ku(e,Wl,Hl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Vl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(ku.bind(null,e,Wl,Hl),t);break}ku(e,Wl,Hl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(ku.bind(null,e,Wl,Hl),r);break}ku(e,Wl,Hl);break;default:throw Error(a(329))}}}return iu(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Wl,Wl=n,null!==t&&su(t)),e}function su(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function lu(e,t){for(t&=~Bl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Tl))throw Error(a(327));_u();var t=ht(e,0);if(0===(1&t))return iu(e,Qe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Fl,fu(e,0),lu(e,t),iu(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,Wl,Hl),iu(e,Qe()),null}function cu(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Ul=Qe()+500,Bi&&Vi())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&_u();var t=Tl;Tl|=1;var n=Rl.transition,r=yt;try{if(Rl.transition=null,yt=1,e)return e()}finally{yt=r,Rl.transition=n,0===(6&(Tl=t))&&Vi()}}function hu(){Pl=Ml.current,Si(Ml)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ti),Si(Ri),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:ka(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Il=e,Dl=e=Mu(e.current,null),Al=Pl=t,Ol=0,Fl=null,Bl=Ll=jl=0,Wl=zl=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pu(e,t){for(;;){var n=Dl;try{if(wa(),ho.current=os,xo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}xo=!1}if(po=0,vo=go=mo=null,yo=!1,bo=0,Nl.current=null,null===n||null===n.return){Ol=1,Fl=t,Dl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Al,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,xs(p,s,l,0,t),1&p.mode&&gs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){gs(o,c,t),gu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),xs(v,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==Ol&&(Ol=2),null===zl?zl=[o]:zl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,ps(0,u,t));break e;case 1:l=u;var x=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Kl||!Kl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mu(){var e=El.current;return El.current=os,null===e?os:e}function gu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&jl)&&0===(268435455&Ll)||lu(Il,Al)}function vu(e,t){var n=Tl;Tl|=2;var r=mu();for(Il===e&&Al===t||(Hl=null,fu(e,t));;)try{xu();break}catch(i){pu(e,i)}if(wa(),Tl=n,El.current=r,null!==Dl)throw Error(a(261));return Il=null,Al=0,Ol}function xu(){for(;null!==Dl;)bu(Dl)}function yu(){for(;null!==Dl&&!Ye();)bu(Dl)}function bu(e){var t=Cl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wu(e):Dl=t,Nl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Pl)))return void(Dl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ol=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ol&&(Ol=5)}function ku(e,t,n){var r=yt,i=Rl.transition;try{Rl.transition=null,yt=1,function(e,t,n,r){do{_u()}while(null!==Yl);if(0!==(6&Tl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Il&&(Dl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Iu(tt,(function(){return _u(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var s=yt;yt=1;var l=Tl;Tl|=4,Nl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Su(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),$e(),Tl=l,yt=s,Rl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=ql,ql=null,e;0!==(1&$l)&&0!==e.tag&&_u(),o=e.pendingLanes,0!==(1&o)?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,Vi()}(e,t,n,r)}finally{Rl.transition=i,yt=r}return null}function _u(){if(null!==Yl){var e=bt($l),t=Rl.transition,n=yt;try{if(Rl.transition=null,yt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Tl))throw Error(a(331));var i=Tl;for(Tl|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zs=c;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(ol(d),d===c){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var x=o.sibling;if(null!==x){x.return=o.return,Zs=x;break e}Zs=o.return}}var y=e.current;for(Zs=y;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=y;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){Su(l,l.return,k)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(Tl=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{yt=n,Rl.transition=t}}return!1}function Cu(e,t,n){e=Ma(e,t=ps(0,t=cs(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Ma(t,e=ms(t,e=cs(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Ol||3===Ol&&(130023424&Al)===Al&&500>Qe()-Vl?fu(e,0):Bl|=n),iu(e,t)}function Nu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ta(e,t))&&(vt(e,t,n),iu(e,n))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nu(e,n)}function Iu(e,t){return Ke(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Au(e,t,n,r){return new Du(e,t,n,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mu(e,t){var n=e.alternate;return null===n?((n=Au(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Fu(n.children,i,o,t);case C:s=8,i|=8;break;case S:return(e=Au(12,n,t,2|i)).elementType=S,e.lanes=o,e;case T:return(e=Au(13,n,t,i)).elementType=T,e.lanes=o,e;case I:return(e=Au(19,n,t,i)).elementType=I,e.lanes=o,e;case P:return ju(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case N:s=9;break e;case R:s=11;break e;case D:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Au(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fu(e,t,n,r){return(e=Au(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Au(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Au(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Au(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,r,i,a,o,s,l){return e=new zu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Au(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Vu(e){if(!e)return Ni;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Oi(e,n,t)}return t}function Uu(e,t,n,r,i,a,o,s,l){return(e=Wu(n,r,!0,e,0,a,0,s,l)).context=Vu(null),n=e.current,(a=Pa(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Ma(n,a,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function Hu(e,t,n,r){var i=t.current,a=tu(),o=nu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ma(i,t,o))&&(ru(e,i,o,a),Oa(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ku(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fa();break;case 5:ao(t);break;case 1:Ai(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(va,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Ei(so,1&so.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Di(t,Ri.current);Ca(t,n),i=Co(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Wa,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Ts(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===D)return 14}return 2}(r),e=ga(r,e),i){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Rs(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ga(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 1:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Ds(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ls(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(va,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ti.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Pa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),_a(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ca(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ga(r=t.type,t.pendingProps),_s(e,t,r,i=ga(r.type,i),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ga(r,i),Hs(e,t),t.tag=1,Ai(r)?(e=!0,Fi(t)):e=!1,Ca(t,n),Ua(t,r,i),Ga(t,r,i,n),Ts(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gu(o);s.call(e)}}Hu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gu(o);a.call(e)}}var o=Uu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,Vr(8===e.nodeType?e.parentNode:e),du(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gu(l);s.call(e)}}var l=Wu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),du((function(){Hu(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}$u.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hu(e,t,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Hu(null,e,null,null)})),t[pi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(xt(t,1|n),iu(t,Qe()),0===(6&Tl)&&(Ul=Qe()+500,Vi()))}break;case 13:du((function(){var t=Ta(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Ku(e,1)}},kt=function(e){if(13===e.tag){var t=Ta(e,134217728);if(null!==t)ru(t,e,134217728,tu());Ku(e,134217728)}},_t=function(e){if(13===e.tag){var t=nu(e),n=Ta(e,t);if(null!==n)ru(n,e,t,tu());Ku(e,t)}},Ct=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=cu,Te=du;var tc={usingClientEntryPoint:!1,Events:[yi,bi,wi,Ee,Ne,cu]},nc={findFiberByHostInstance:xi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Wu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},192:(e,t,n)=>{"use strict";var r=n(544);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},544:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(772)},482:(e,t,n)=>{"use strict";var r=n(867),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},285:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!C.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+R(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+R(s=e[u],u);l+=T(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=T(s=s.value,t,i,c=a+R(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},M={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},867:(e,t,n)=>{"use strict";e.exports=n(285)},834:(e,t,n)=>{"use strict";e.exports=n(482)},73:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,P(k);else{var t=r(c);null!==t&&M(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,x(E),E=-1),p=!0;var a=f;try{for(b(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),b(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,C=!1,S=null,E=-1,N=5,R=-1;function T(){return!(t.unstable_now()-R<N)}function I(){if(null!==S){var e=t.unstable_now();R=e;var n=!0;try{n=S(!0,e)}finally{n?_():(C=!1,S=null)}}else C=!1}if("function"===typeof y)_=function(){y(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,A=D.port2;D.port1.onmessage=I,_=function(){A.postMessage(null)}}else _=function(){v(I,0)};function P(e){S=e,C||(C=!0,_())}function M(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(x(E),E=-1):g=!0,M(w,a-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,P(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},882:(e,t,n)=>{"use strict";e.exports=n(73)},88:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={}},902:()=>{},522:()=>{},753:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(a,o),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ea1ee3b0.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="eyecare-ui:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkeyecare_ui=self.webpackChunkeyecare_ui||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Dr,hasStandardBrowserEnv:()=>Ar,hasStandardBrowserWebWorkerEnv:()=>Mr});var t,r=n(867),i=n.t(r,2),a=n(192),o=n(544),s=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const u="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(bt){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:a=document.defaultView,v5Compat:o=!1}=i,s=a.history,d=t.Pop,m=null,g=v();function v(){return(s.state||{idx:null}).idx}function x(){d=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:d,location:b.location,delta:n})}function y(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:p(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,s.replaceState(l({},s.state,{idx:g}),""));let b={get action(){return d},get location(){return e(a,s)},listen(e){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(u,x),m=e,()=>{a.removeEventListener(u,x),m=null}},createHref:e=>n(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let l=h(i,g),u=b.createHref(i);try{s.pushState(l,"",u)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;a.location.assign(u)}o&&m&&m({action:d,location:b.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let a=h(i,g),l=b.createHref(i);s.replaceState(a,"",l),o&&m&&m({action:d,location:b.location,delta:0})},go:e=>s.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){void 0===n&&(n="/");let r=A(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o)a=T(i[o],D(r));return a}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let s=j([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),y(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:R(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let o=b(r.join("/")),s=[];return s.push(...o.map((e=>""===e?a:[a,e].join("/")))),i&&s.push(...o),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:\w+$/,k=3,_=2,C=1,S=10,E=-2,N=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=E),t&&(r+=_),n.filter((e=>!N(e))).reduce(((e,t)=>e+(w.test(t)?k:""===t?C:S)),r)}function T(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let e=n[o],s=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;a.push({params:r,pathname:j([i,u.pathname]),pathnameBase:L(j([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=j([i,u.pathnameBase]))}return a}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return d(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{});return{params:l,pathname:a,pathnameBase:o,pattern:e}}function D(e){try{return decodeURI(e)}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=M(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),c(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(null==s)a=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:B(r),hash:z(i)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const j=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],U=(new Set(V),["get",...V]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const G=r.createContext(null);const q=r.createContext(null);const K=r.createContext(null);const X=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const $=r.createContext(null);function Q(){return null!=r.useContext(X)}function J(){return Q()||c(!1),r.useContext(X).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ue(se.UseNavigateStable),t=de(le.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t]);return i}():function(){Q()||c(!1);let e=r.useContext(G),{basename:t,future:n,navigator:i}=r.useContext(K),{matches:a}=r.useContext(Y),{pathname:o}=J(),s=JSON.stringify(O(a,n.v7_relativeSplatPath)),l=r.useRef(!1);Z((()=>{l.current=!0}));let u=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let a=F(n,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:j([t,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}),[t,i,s,o,e]);return u}()}function te(e,n,i,a){Q()||c(!1);let{navigator:o}=r.useContext(K),{matches:s}=r.useContext(Y),l=s[s.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(n){var p;let e="string"===typeof n?m(n):n;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=x(e,{pathname:"/"===d?g:g.slice(d.length)||"/"});let y=oe(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:j([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:j([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,i,a);return n&&y?r.createElement(X.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function ne(){let e=function(){var e;let t=r.useContext($),n=ce(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,a=r.useContext(G);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let s=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=s.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),s=s.slice(0,Math.min(s.length,e+1))}let u=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight(((e,i,a)=>{let o,c=!1,h=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||re,u&&(d<0&&0===a?(p="route-fallback",!1||he[p]||(he[p]=!0),c=!0,f=null):d===a&&(c=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,a+1)),g=()=>{let t;return t=o?h:c?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let t=r.useContext(G);return t||c(!1),t}function ce(e){let t=r.useContext(q);return t||c(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||c(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};i.startTransition;function fe(e){c(!1)}function pe(e){let{basename:n="/",children:i=null,location:a,navigationType:o=t.Pop,navigator:s,static:l=!1,future:u}=e;Q()&&c(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:s,static:l,future:H({v7_relativeSplatPath:!1},u)})),[d,u,s,l]);"string"===typeof a&&(a=m(a));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:x="default"}=a,y=r.useMemo((()=>{let e=A(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:x},navigationType:o}}),[d,f,p,g,v,x,o]);return null==y?null:r.createElement(K.Provider,{value:h},r.createElement(X.Provider,{children:i,value:y}))}function me(e){let{children:t,location:n}=e;return te(ge(t),n)}new Promise((()=>{}));r.Component;function ge(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let a=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ge(e.props.children,a));e.type!==fe&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ge(e.props.children,a)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const ve=i.startTransition;s.flushSync;function xe(e){let{basename:t,children:n,future:i,window:a}=e,o=r.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,s)));let l=o.current,[u,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&ve?ve((()=>c(e))):c(e)}),[c,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.createElement(pe,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ye,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ye||(ye={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));function we(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function ke(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return we((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=ke();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function _e(){let[e]=(0,r.useState)(ke);return(0,r.useEffect)((()=>()=>e.dispose()),[e]),e}var Ce=Object.defineProperty,Se=(e,t,n)=>(((e,t,n)=>{t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Ee=new class{constructor(){Se(this,"current",this.detect()),Se(this,"handoffState","pending"),Se(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},Ne=(e,t)=>{Ee.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)};function Re(e){let t=(0,r.useRef)(e);return Ne((()=>{t.current=e}),[e]),t}let Te=function(e){let t=Re(e);return r.useCallback((function(){return t.current(...arguments)}),[t])};function Ie(e,t,n,i){let a=Re(n);(0,r.useEffect)((()=>{function n(e){a.current(e)}return(e=null!=e?e:window).addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}),[e,t,i])}function De(){let e=(0,r.useRef)(!1);return Ne((()=>(e.current=!0,()=>{e.current=!1})),[]),e}function Ae(e){let t=Te(e),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>(n.current=!1,()=>{n.current=!0,we((()=>{n.current&&t()}))})),[t])}function Pe(e){return Ee.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>Pe(...t)),[...t])}function Oe(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(i)((()=>()=>{}),(()=>!1),(()=>!e))}(),[t,n]=r.useState(Ee.isHandoffComplete);return t&&!1===Ee.isHandoffComplete&&n(!1),r.useEffect((()=>{!0!==t&&n(!0)}),[t]),r.useEffect((()=>Ee.handoff()),[]),!e&&t}let Fe=Symbol();function je(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[Fe]:t})}function Le(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=(0,r.useRef)(t);(0,r.useEffect)((()=>{i.current=t}),[t]);let a=Te((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return t.every((e=>null==e||(null==e?void 0:e[Fe])))?void 0:a}function Be(e,t,n){let i=Re(t);(0,r.useEffect)((()=>{function t(e){i.current(e)}return window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)}),[e,n])}var ze=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ze||{});function We(){let e=(0,r.useRef)(0);return Be("keydown",(t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)}),!0),e}function Ve(e,t){let n=(0,r.useRef)([]),i=Te(e);(0,r.useEffect)((()=>{let e=[...n.current];for(let[r,a]of t.entries())if(n.current[r]!==a){let r=i(t,e);return n.current=t,r}}),[i,...t])}function Ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function He(e,t){if(e in t){let a=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof a?a(...r):a}let a=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((e=>'"'.concat(e,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,He),a}var Ge=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ge||{}),qe=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(qe||{});function Ke(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:a,visible:o=!0,name:s,mergeRefs:l}=e;l=null!=l?l:Ye;let u=$e(n,t);if(o)return Xe(u,r,i,s,l);let c=null!=a?a:0;if(2&c){let{static:e=!1,...t}=u;if(e)return Xe(t,r,i,s,l)}if(1&c){let{unmount:e=!0,...t}=u;return He(e?0:1,{0:()=>null,1:()=>Xe({...t,hidden:!0,style:{display:"none"}},r,i,s,l)})}return Xe(u,r,i,s,l)}function Xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,{as:o=n,children:s,refName:l="ref",...u}=Ze(e,["unmount","static"]),c=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof s?s(t):s;"className"in u&&u.className&&"function"==typeof u.className&&(u.className=u.className(t));let h={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r);e&&(h["data-headlessui-state"]=n.join(" "))}if(o===r.Fragment&&Object.keys(Je(u)).length>0){if(!(0,r.isValidElement)(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(u).map((e=>"  - ".concat(e))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>"  - ".concat(e))).join("\n")].join("\n"));let e=d.props,t="function"==typeof(null==e?void 0:e.className)?function(){return Ue(null==e?void 0:e.className(...arguments),u.className)}:Ue(null==e?void 0:e.className,u.className),n=t?{className:t}:{};return(0,r.cloneElement)(d,Object.assign({},$e(d.props,Je(Ze(u,["ref"]))),h,c,{ref:a(d.ref,c.ref)},n))}return(0,r.createElement)(o,Object.assign({},Ze(u,["ref"]),o!==r.Fragment&&c,o!==r.Fragment&&h),d)}function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function $e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let a of t)for(let e in a)e.startsWith("on")&&"function"==typeof a[e]?(null!=i[e]||(i[e]=[]),i[e].push(a[e])):r[e]=a[e];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((e=>[e,void 0]))));for(let a in i)Object.assign(r,{[a](e){let t=i[a];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function Qe(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function Je(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}var et=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(et||{});let tt=Qe((function(e,t){var n;let{features:r=1,...i}=e;return Ke({ourProps:{ref:t,"aria-hidden":2===(2&r)||(null!=(n=i["aria-hidden"])?n:void 0),style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&r)&&2!==(2&r)&&{display:"none"}}},theirProps:i,slot:{},defaultTag:"div",name:"Hidden"})}));let nt=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}((()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&nt[0]!==e.target&&(nt.unshift(e.target),nt=nt.filter((e=>null!=e&&e.isConnected)),nt.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})}));let rt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(",");var it=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(it||{}),at=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(at||{}),ot=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ot||{});function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(rt)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var lt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(lt||{});function ut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=Pe(e))?void 0:n.body)&&He(t,{0:()=>e.matches(rt),1(){let t=e;for(;null!==t;){if(t.matches(rt))return!0;t=t.parentElement}return!1}})}var ct=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ct||{});function dt(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let ht=["textarea","input"].join(",");function ft(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(e):e:st(e);i.length>0&&o.length>1&&(o=o.filter((e=>!i.includes(e)))),r=null!=r?r:a.activeElement;let s,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},d=0,h=o.length;do{if(d>=h||d+h<=0)return 0;let e=u+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}s=o[e],null==s||s.focus(c),d+=l}while(s!==a.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,ht))&&n}(s)&&s.select(),2}function pt(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}var mt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(mt||{});let gt=Qe((function(e,t){let n=(0,r.useRef)(null),i=Le(n,t),{initialFocus:a,containers:o,features:s=30,...l}=e;Oe()||(s=1);let u=Me(n);xt({ownerDocument:u},Boolean(16&s));let c=function(e,t){let{ownerDocument:n,container:i,initialFocus:a}=e,o=(0,r.useRef)(null),s=De();return Ve((()=>{if(!t)return;let e=i.current;e&&we((()=>{if(!s.current)return;let t=null==n?void 0:n.activeElement;if(null!=a&&a.current){if((null==a?void 0:a.current)===t)return void(o.current=t)}else if(e.contains(t))return void(o.current=t);null!=a&&a.current?dt(a.current):ft(e,it.First)===at.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),o.current=null==n?void 0:n.activeElement}))}),[t]),o}({ownerDocument:u,container:n,initialFocus:a},Boolean(2&s));!function(e,t){let{ownerDocument:n,container:r,containers:i,previousActiveElement:a}=e,o=De();Ie(null==n?void 0:n.defaultView,"focus",(e=>{if(!t||!o.current)return;let n=pt(i);r.current instanceof HTMLElement&&n.add(r.current);let s=a.current;if(!s)return;let l=e.target;l&&l instanceof HTMLElement?yt(n,l)?(a.current=l,dt(l)):(e.preventDefault(),e.stopPropagation(),dt(s)):dt(a.current)}),!0)}({ownerDocument:u,container:n,containers:o,previousActiveElement:c},Boolean(8&s));let d=We(),h=Te((e=>{let t=n.current;t&&He(d.current,{[ze.Forwards]:()=>{ft(t,it.First,{skipElements:[e.relatedTarget]})},[ze.Backwards]:()=>{ft(t,it.Last,{skipElements:[e.relatedTarget]})}})})),f=_e(),p=(0,r.useRef)(!1),m={ref:i,onKeyDown(e){"Tab"==e.key&&(p.current=!0,f.requestAnimationFrame((()=>{p.current=!1})))},onBlur(e){let t=pt(o);n.current instanceof HTMLElement&&t.add(n.current);let r=e.relatedTarget;r instanceof HTMLElement&&"true"!==r.dataset.headlessuiFocusGuard&&(yt(t,r)||(p.current?ft(n.current,He(d.current,{[ze.Forwards]:()=>it.Next,[ze.Backwards]:()=>it.Previous})|it.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&dt(e.target)))}};return r.createElement(r.Fragment,null,Boolean(4&s)&&r.createElement(tt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:et.Focusable}),Ke({ourProps:m,theirProps:l,defaultTag:"div",name:"FocusTrap"}),Boolean(4&s)&&r.createElement(tt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:et.Focusable}))})),vt=Object.assign(gt,{features:mt});function xt(e,t){let{ownerDocument:n}=e,i=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,r.useRef)(nt.slice());return Ve(((e,n)=>{let[r]=e,[i]=n;!0===i&&!1===r&&we((()=>{t.current.splice(0)})),!1===i&&!0===r&&(t.current=nt.slice())}),[e,nt,t]),Te((()=>{var e;return null!=(e=t.current.find((e=>null!=e&&e.isConnected)))?e:null}))}(t);Ve((()=>{t||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&dt(i())}),[t]),Ae((()=>{t&&dt(i())}))}function yt(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let bt=(0,r.createContext)(!1);function wt(){return(0,r.useContext)(bt)}function kt(e){return r.createElement(bt.Provider,{value:e.force},e.children)}let _t=r.Fragment;let Ct=r.Fragment,St=(0,r.createContext)(null);let Et=(0,r.createContext)(null);function Nt(){let e=(0,r.useContext)(Et),t=(0,r.useRef)([]),n=Te((n=>(t.current.push(n),e&&e.register(n),()=>i(n)))),i=Te((n=>{let r=t.current.indexOf(n);-1!==r&&t.current.splice(r,1),e&&e.unregister(n)})),a=(0,r.useMemo)((()=>({register:n,unregister:i,portals:t})),[n,i,t]);return[t,(0,r.useMemo)((()=>function(e){let{children:t}=e;return r.createElement(Et.Provider,{value:a},t)}),[a])]}let Rt=Qe((function(e,t){let n=e,i=(0,r.useRef)(null),a=Le(je((e=>{i.current=e})),t),s=Me(i),l=function(e){let t=wt(),n=(0,r.useContext)(St),i=Me(e),[a,o]=(0,r.useState)((()=>{if(!t&&null!==n||Ee.isServer)return null;let e=null==i?void 0:i.getElementById("headlessui-portal-root");if(e)return e;if(null===i)return null;let r=i.createElement("div");return r.setAttribute("id","headlessui-portal-root"),i.body.appendChild(r)}));return(0,r.useEffect)((()=>{null!==a&&(null!=i&&i.body.contains(a)||null==i||i.body.appendChild(a))}),[a,i]),(0,r.useEffect)((()=>{t||null!==n&&o(n.current)}),[n,o,t]),a}(i),[u]=(0,r.useState)((()=>{var e;return Ee.isServer?null:null!=(e=null==s?void 0:s.createElement("div"))?e:null})),c=(0,r.useContext)(Et),d=Oe();return Ne((()=>{!l||!u||l.contains(u)||(u.setAttribute("data-headlessui-portal",""),l.appendChild(u))}),[l,u]),Ne((()=>{if(u&&c)return c.register(u)}),[c,u]),Ae((()=>{var e;!l||!u||(u instanceof Node&&l.contains(u)&&l.removeChild(u),l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l)))})),d&&l&&u?(0,o.createPortal)(Ke({ourProps:{ref:a},theirProps:n,defaultTag:_t,name:"Portal"}),u):null})),Tt=Qe((function(e,t){let{target:n,...i}=e,a={ref:Le(t)};return r.createElement(St.Provider,{value:n},Ke({ourProps:a,theirProps:i,defaultTag:Ct,name:"Popover.Group"}))})),It=Object.assign(Rt,{Group:Tt});const Dt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:At,useEffect:Pt,useLayoutEffect:Mt,useDebugValue:Ot}=i;function Ft(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!Dt(n,e)}catch{return!0}}"undefined"!=typeof window&&"undefined"!=typeof window.document&&window.document.createElement;const jt=(e=>e.useSyncExternalStore)(i);function Lt(){let e;return{before(t){let{doc:n}=t;var r;let i=n.documentElement;e=(null!=(r=n.defaultView)?r:window).innerWidth-i.clientWidth},after(t){let{doc:n,d:r}=t,i=n.documentElement,a=i.clientWidth-i.offsetWidth,o=e-a;r.style(i,"paddingRight","".concat(o,"px"))}}}function Bt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function zt(){return Bt()||/Android/gi.test(window.navigator.userAgent)}function Wt(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Vt=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];let s=t[e].call(n,...a);s&&(n=s,r.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:ke(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,i={doc:t,d:n,meta:Wt(r)},a=[Bt()?{before(e){let{doc:t,d:n,meta:r}=e;function i(e){return r.containers.flatMap((e=>e())).some((t=>t.contains(e)))}n.microTask((()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=ke();e.style(t.documentElement,"scrollBehavior","auto"),n.add((()=>n.microTask((()=>e.dispose()))))}let r=null!=(e=window.scrollY)?e:window.pageYOffset,a=null;n.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let n=e.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),o=t.querySelector(r);o&&!i(o)&&(a=o)}catch{}}),!0),n.addEventListener(t,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(i(e.target)){let t=e.target;for(;t.parentElement&&i(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})),n.addEventListener(t,"touchmove",(e=>{if(e.target instanceof HTMLElement)if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}),{passive:!1}),n.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)}))}))}}:{},Lt(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];a.forEach((e=>{let{before:t}=e;return null==t?void 0:t(i)})),a.forEach((e=>{let{after:t}=e;return null==t?void 0:t(i)}))},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function Ut(e,t,n){let r=function(e){return jt(e.subscribe,e.getSnapshot,e.getSnapshot)}(Vt),i=e?r.get(e):void 0,a=!!i&&i.count>0;return Ne((()=>{if(e&&t)return Vt.dispatch("PUSH",e,n),()=>Vt.dispatch("POP",e,n)}),[t,e]),a}var Ht;Vt.subscribe((()=>{let e=Vt.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&Vt.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&Vt.dispatch("TEARDOWN",n)}}));let Gt=null!=(Ht=r.useId)?Ht:function(){let e=Oe(),[t,n]=r.useState(e?()=>Ee.nextId():null);return Ne((()=>{null===t&&n(Ee.nextId())}),[t]),null!=t?""+t:void 0},qt=new Map,Kt=new Map;function Xt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ne((()=>{var n;if(!t)return;let r="function"==typeof e?e():e.current;if(!r)return;let i=null!=(n=Kt.get(r))?n:0;return Kt.set(r,i+1),0!==i||(qt.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),function(){var e;if(!r)return;let t=null!=(e=Kt.get(r))?e:1;if(1===t?Kt.delete(r):Kt.set(r,t-1),1!==t)return;let n=qt.get(r);n&&(null===n["aria-hidden"]?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",n["aria-hidden"]),r.inert=n.inert,qt.delete(r))}}),[e,t])}function Yt(e,t,n){let i=Re(t);(0,r.useEffect)((()=>{function t(e){i.current(e)}return document.addEventListener(e,t,n),()=>document.removeEventListener(e,t,n)}),[e,n])}function $t(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(0,r.useRef)(!1);function a(n,r){if(!i.current||n.defaultPrevented)return;let a=r(n);if(null===a||!a.getRootNode().contains(a)||!a.isConnected)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of o){if(null===e)continue;let t=e instanceof HTMLElement?e:e.current;if(null!=t&&t.contains(a)||n.composed&&n.composedPath().includes(t))return}return!ut(a,lt.Loose)&&-1!==a.tabIndex&&n.preventDefault(),t(n,a)}(0,r.useEffect)((()=>{requestAnimationFrame((()=>{i.current=n}))}),[n]);let o=(0,r.useRef)(null);Yt("pointerdown",(e=>{var t,n;i.current&&(o.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),Yt("mousedown",(e=>{var t,n;i.current&&(o.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),Yt("click",(e=>{zt()||o.current&&(a(e,(()=>o.current)),o.current=null)}),!0),Yt("touchend",(e=>a(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),Be("blur",(e=>a(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function Qt(){let{defaultContainers:e=[],portals:t,mainTreeNodeRef:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;let a=(0,r.useRef)(null!=(i=null==n?void 0:n.current)?i:null),o=Me(a),s=Te((()=>{var n,r,i;let s=[];for(let t of e)null!==t&&(t instanceof HTMLElement?s.push(t):"current"in t&&t.current instanceof HTMLElement&&s.push(t.current));if(null!=t&&t.current)for(let e of t.current)s.push(e);for(let e of null!=(n=null==o?void 0:o.querySelectorAll("html > *, body > *"))?n:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(a.current)||e.contains(null==(i=null==(r=a.current)?void 0:r.getRootNode())?void 0:i.host)||s.some((t=>e.contains(t)))||s.push(e));return s}));return{resolveContainers:s,contains:Te((e=>s().some((t=>t.contains(e))))),mainTreeNodeRef:a,MainTreeNode:(0,r.useMemo)((()=>function(){return null!=n?null:r.createElement(tt,{features:et.Hidden,ref:a})}),[a,n])}}let Jt=(0,r.createContext)(null);Jt.displayName="OpenClosedContext";var Zt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Zt||{});function en(){return(0,r.useContext)(Jt)}function tn(e){let{value:t,children:n}=e;return r.createElement(Jt.Provider,{value:t},n)}let nn=(0,r.createContext)((()=>{}));nn.displayName="StackContext";var rn=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(rn||{});function an(e){let{children:t,onUpdate:n,type:i,element:a,enabled:o}=e,s=(0,r.useContext)(nn),l=Te((function(){null==n||n(...arguments),s(...arguments)}));return Ne((()=>{let e=void 0===o||!0===o;return e&&l(0,i,a),()=>{e&&l(1,i,a)}}),[l,i,a,o]),r.createElement(nn.Provider,{value:l},t)}function on(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}let sn=(0,r.createContext)(null);function ln(){let e=(0,r.useContext)(sn);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ln),e}return e}let un=Qe((function(e,t){let n=Gt(),{id:r="headlessui-description-".concat(n),...i}=e,a=ln(),o=Le(t);return Ne((()=>a.register(r)),[r,a.register]),Ke({ourProps:{ref:o,...a.props,id:r},theirProps:i,slot:a.slot||{},defaultTag:"p",name:a.name||"Description"})})),cn=Object.assign(un,{});var dn=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(dn||{}),hn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(hn||{}),fn=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(fn||{});let pn={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},mn=(0,r.createContext)(null);function gn(e){let t=(0,r.useContext)(mn);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,gn),t}return t}function vn(e,t){return He(t.type,pn,e,t)}mn.displayName="DialogContext";let xn=Ge.RenderStrategy|Ge.Static;let yn=Qe((function(e,t){let n=Gt(),{id:i="headlessui-dialog-".concat(n),open:a,onClose:o,initialFocus:s,role:l="dialog",__demoMode:u=!1,...c}=e,[d,h]=(0,r.useState)(0),f=(0,r.useRef)(!1);l="dialog"===l||"alertdialog"===l?l:(f.current||(f.current=!0,console.warn("Invalid role [".concat(l,"] passed to <Dialog />. Only `dialog` and and `alertdialog` are supported. Using `dialog` instead."))),"dialog");let p=en();void 0===a&&null!==p&&(a=(p&Zt.Open)===Zt.Open);let m=(0,r.useRef)(null),g=Le(m,t),v=Me(m),x=e.hasOwnProperty("open")||null!==p,y=e.hasOwnProperty("onClose");if(!x&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof a)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(a));if("function"!=typeof o)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(o));let b=a?0:1,[w,k]=(0,r.useReducer)(vn,{titleId:null,descriptionId:null,panelRef:(0,r.createRef)()}),_=Te((()=>o(!1))),C=Te((e=>k({type:0,id:e}))),S=!!Oe()&&(!u&&0===b),E=d>1,N=null!==(0,r.useContext)(mn),[R,T]=Nt(),I={get current(){var e;return null!=(e=w.panelRef.current)?e:m.current}},{resolveContainers:D,mainTreeNodeRef:A,MainTreeNode:P}=Qt({portals:R,defaultContainers:[I]}),M=E?"parent":"leaf",O=null!==p&&(p&Zt.Closing)===Zt.Closing,F=!N&&!O&&S,j=(0,r.useCallback)((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==v?void 0:v.querySelectorAll("body > *"))?e:[]).find((e=>"headlessui-portal-root"!==e.id&&(e.contains(A.current)&&e instanceof HTMLElement))))?t:null}),[A]);Xt(j,F);let L=!!E||S,B=(0,r.useCallback)((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==v?void 0:v.querySelectorAll("[data-headlessui-portal]"))?e:[]).find((e=>e.contains(A.current)&&e instanceof HTMLElement)))?t:null}),[A]);Xt(B,L),$t(D,_,!(!S||E));let z=!(E||0!==b);Ie(null==v?void 0:v.defaultView,"keydown",(e=>{z&&(e.defaultPrevented||e.key===dn.Escape&&(e.preventDefault(),e.stopPropagation(),_()))})),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];Ut(e,t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}(v,!(O||0!==b||N),D),(0,r.useEffect)((()=>{if(0!==b||!m.current)return;let e=new ResizeObserver((e=>{for(let t of e){let e=t.target.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&_()}}));return e.observe(m.current),()=>e.disconnect()}),[b,m,_]);let[W,V]=function(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=Te((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props})),[n,e.slot,e.name,e.props]);return r.createElement(sn.Provider,{value:i},e.children)}),[t])]}(),U=(0,r.useMemo)((()=>[{dialogState:b,close:_,setTitleId:C},w]),[b,w,_,C]),H=(0,r.useMemo)((()=>({open:0===b})),[b]),G={ref:g,id:i,role:l,"aria-modal":0===b||void 0,"aria-labelledby":w.titleId,"aria-describedby":W};return r.createElement(an,{type:"Dialog",enabled:0===b,element:m,onUpdate:Te(((e,t)=>{"Dialog"===t&&He(e,{[rn.Add]:()=>h((e=>e+1)),[rn.Remove]:()=>h((e=>e-1))})}))},r.createElement(kt,{force:!0},r.createElement(It,null,r.createElement(mn.Provider,{value:U},r.createElement(It.Group,{target:m},r.createElement(kt,{force:!1},r.createElement(V,{slot:H,name:"Dialog.Description"},r.createElement(vt,{initialFocus:s,containers:D,features:S?He(M,{parent:vt.features.RestoreFocus,leaf:vt.features.All&~vt.features.FocusLock}):vt.features.None},r.createElement(T,null,Ke({ourProps:G,theirProps:c,slot:H,defaultTag:"div",features:xn,visible:0===b,name:"Dialog"}))))))))),r.createElement(P,null))})),bn=Qe((function(e,t){let n=Gt(),{id:i="headlessui-dialog-backdrop-".concat(n),...a}=e,[{dialogState:o},s]=gn("Dialog.Backdrop"),l=Le(t);(0,r.useEffect)((()=>{if(null===s.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[s.panelRef]);let u=(0,r.useMemo)((()=>({open:0===o})),[o]);return r.createElement(kt,{force:!0},r.createElement(It,null,Ke({ourProps:{ref:l,id:i,"aria-hidden":!0},theirProps:a,slot:u,defaultTag:"div",name:"Dialog.Backdrop"})))})),wn=Qe((function(e,t){let n=Gt(),{id:i="headlessui-dialog-panel-".concat(n),...a}=e,[{dialogState:o},s]=gn("Dialog.Panel"),l=Le(t,s.panelRef),u=(0,r.useMemo)((()=>({open:0===o})),[o]),c=Te((e=>{e.stopPropagation()}));return Ke({ourProps:{ref:l,id:i,onClick:c},theirProps:a,slot:u,defaultTag:"div",name:"Dialog.Panel"})})),kn=Qe((function(e,t){let n=Gt(),{id:i="headlessui-dialog-overlay-".concat(n),...a}=e,[{dialogState:o,close:s}]=gn("Dialog.Overlay"),l=Le(t),u=Te((e=>{if(e.target===e.currentTarget){if(on(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),s()}}));return Ke({ourProps:{ref:l,id:i,"aria-hidden":!0,onClick:u},theirProps:a,slot:(0,r.useMemo)((()=>({open:0===o})),[o]),defaultTag:"div",name:"Dialog.Overlay"})})),_n=Qe((function(e,t){let n=Gt(),{id:i="headlessui-dialog-title-".concat(n),...a}=e,[{dialogState:o,setTitleId:s}]=gn("Dialog.Title"),l=Le(t);(0,r.useEffect)((()=>(s(i),()=>s(null))),[i,s]);let u=(0,r.useMemo)((()=>({open:0===o})),[o]);return Ke({ourProps:{ref:l,id:i},theirProps:a,slot:u,defaultTag:"h2",name:"Dialog.Title"})})),Cn=Object.assign(yn,{Backdrop:bn,Panel:wn,Overlay:kn,Title:_n,Description:cn});const Sn=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))})),En=Sn;const Nn=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})),Rn=Nn;var Tn=n(834);const In=[{name:"About",href:"/about-home"},{name:"Help",href:"/help-home"}];function Dn(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="visible"})),[]),(0,Tn.jsxs)("div",{className:"bg-white",children:[(0,Tn.jsxs)("header",{className:"absolute inset-x-0 top-0 z-50",children:[(0,Tn.jsxs)("nav",{className:"flex items-center justify-between p-6 lg:px-8","aria-label":"Global",children:[(0,Tn.jsx)("div",{className:"flex lg:flex-1",children:(0,Tn.jsx)("a",{href:"/",className:"-m-1.5 p-1.5",children:(0,Tn.jsx)("img",{className:"h-12 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:""})})}),(0,Tn.jsx)("div",{className:"flex lg:hidden",children:(0,Tn.jsx)("button",{type:"button",className:"-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700",onClick:()=>t(!0),children:(0,Tn.jsx)(En,{className:"h-6 w-6","aria-hidden":"true"})})}),(0,Tn.jsx)("div",{className:"hidden lg:flex lg:gap-x-12",children:In.map((e=>(0,Tn.jsx)("a",{href:e.href,className:"text-sm font-semibold leading-6 text-gray-900",children:e.name},e.name)))}),(0,Tn.jsx)("div",{className:"hidden lg:flex lg:flex-1 lg:justify-end",children:(0,Tn.jsxs)("a",{href:"/login",className:"text-sm font-semibold leading-6 text-gray-900",children:["Log in ",(0,Tn.jsx)("span",{"aria-hidden":"true",children:"\u2192"})]})})]}),(0,Tn.jsxs)(Cn,{as:"div",className:"lg:hidden",open:e,onClose:t,children:[(0,Tn.jsx)("div",{className:"fixed inset-0 z-50"}),(0,Tn.jsxs)(Cn.Panel,{className:"fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10",children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Tn.jsx)("a",{href:"/",className:"-m-1.5 p-1.5",children:(0,Tn.jsx)("img",{className:"h-8 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:""})}),(0,Tn.jsxs)("button",{type:"button",className:"-m-2.5 rounded-md p-2.5 text-gray-700",onClick:()=>t(!1),children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Close menu"}),(0,Tn.jsx)(Rn,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,Tn.jsx)("div",{className:"mt-6 flow-root",children:(0,Tn.jsxs)("div",{className:"-my-6 divide-y divide-gray-500/10",children:[(0,Tn.jsx)("div",{className:"space-y-2 py-6",children:In.map((e=>(0,Tn.jsx)("a",{href:e.href,className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:e.name},e.name)))}),(0,Tn.jsx)("div",{className:"py-6",children:(0,Tn.jsx)("a",{href:"/login",className:"-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Log in"})})]})})]})]})]}),(0,Tn.jsxs)("div",{className:"relative isolate px-6 lg:px-8",children:[(0,Tn.jsx)("div",{className:"absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),(0,Tn.jsxs)("div",{className:"mx-auto max-w-2xl py-32 sm:py-48 lg:py-56",children:[(0,Tn.jsx)("div",{className:"hidden sm:mb-8 sm:flex sm:justify-center"}),(0,Tn.jsxs)("div",{className:"text-center",children:[(0,Tn.jsx)("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl",children:"Eye Care"}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-600",children:"Empowering Your Vision, Enhancing Your Well-being \u2013 Experience Eye Care Beyond Screens."}),(0,Tn.jsxs)("div",{className:"mt-10 flex items-center justify-center gap-x-6",children:[(0,Tn.jsx)("a",{href:"/login",className:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Get started"}),(0,Tn.jsxs)("a",{href:"/signup",className:"text-sm font-semibold leading-6 text-gray-900",children:["Sign up ",(0,Tn.jsx)("span",{"aria-hidden":"true",children:"\u2192"})]})]})]})]}),(0,Tn.jsx)("div",{className:"absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"relative left-[calc(50%+3rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%+36rem)] sm:w-[72.1875rem]",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})})]})]})}function An(e,t){return function(){return e.apply(t,arguments)}}const{toString:Pn}=Object.prototype,{getPrototypeOf:Mn}=Object,On=(Fn=Object.create(null),e=>{const t=Pn.call(e);return Fn[t]||(Fn[t]=t.slice(8,-1).toLowerCase())});var Fn;const jn=e=>(e=e.toLowerCase(),t=>On(t)===e),Ln=e=>t=>typeof t===e,{isArray:Bn}=Array,zn=Ln("undefined");const Wn=jn("ArrayBuffer");const Vn=Ln("string"),Un=Ln("function"),Hn=Ln("number"),Gn=e=>null!==e&&"object"===typeof e,qn=e=>{if("object"!==On(e))return!1;const t=Mn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kn=jn("Date"),Xn=jn("File"),Yn=jn("Blob"),$n=jn("FileList"),Qn=jn("URLSearchParams");function Jn(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Bn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let o;for(n=0;n<a;n++)o=r[n],t.call(null,e[o],o,e)}}function Zn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const er="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,tr=e=>!zn(e)&&e!==er;const nr=(rr="undefined"!==typeof Uint8Array&&Mn(Uint8Array),e=>rr&&e instanceof rr);var rr;const ir=jn("HTMLFormElement"),ar=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),or=jn("RegExp"),sr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Jn(n,((n,i)=>{let a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},lr="abcdefghijklmnopqrstuvwxyz",ur="0123456789",cr={DIGIT:ur,ALPHA:lr,ALPHA_DIGIT:lr+lr.toUpperCase()+ur};const dr=jn("AsyncFunction"),hr={isArray:Bn,isArrayBuffer:Wn,isBuffer:function(e){return null!==e&&!zn(e)&&null!==e.constructor&&!zn(e.constructor)&&Un(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Un(e.append)&&("formdata"===(t=On(e))||"object"===t&&Un(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wn(e.buffer),t},isString:Vn,isNumber:Hn,isBoolean:e=>!0===e||!1===e,isObject:Gn,isPlainObject:qn,isUndefined:zn,isDate:Kn,isFile:Xn,isBlob:Yn,isRegExp:or,isFunction:Un,isStream:e=>Gn(e)&&Un(e.pipe),isURLSearchParams:Qn,isTypedArray:nr,isFileList:$n,forEach:Jn,merge:function e(){const{caseless:t}=tr(this)&&this||{},n={},r=(r,i)=>{const a=t&&Zn(n,i)||i;qn(n[a])&&qn(r)?n[a]=e(n[a],r):qn(r)?n[a]=e({},r):Bn(r)?n[a]=r.slice():n[a]=r};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Jn(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Jn(t,((t,r)=>{n&&Un(t)?e[r]=An(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,a,o;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&Mn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:On,kindOfTest:jn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Bn(e))return e;let t=e.length;if(!Hn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ir,hasOwnProperty:ar,hasOwnProp:ar,reduceDescriptors:sr,freezeMethods:e=>{sr(e,((t,n)=>{if(Un(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Un(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Bn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Zn,global:er,isContextDefined:tr,ALPHABET:cr,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Un(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Gn(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Bn(e)?[]:{};return Jn(e,((e,t)=>{const a=n(e,r+1);!zn(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:dr,isThenable:e=>e&&(Gn(e)||Un(e))&&Un(e.then)&&Un(e.catch)};function fr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}hr.inherits(fr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:hr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pr=fr.prototype,mr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{mr[e]={value:e}})),Object.defineProperties(fr,mr),Object.defineProperty(pr,"isAxiosError",{value:!0}),fr.from=(e,t,n,r,i,a)=>{const o=Object.create(pr);return hr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),fr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const gr=fr;function vr(e){return hr.isPlainObject(e)||hr.isArray(e)}function xr(e){return hr.endsWith(e,"[]")?e.slice(0,-2):e}function yr(e,t,n){return e?e.concat(t).map((function(e,t){return e=xr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const br=hr.toFlatObject(hr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const wr=function(e,t,n){if(!hr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=hr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!hr.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&hr.isSpecCompliantForm(t);if(!hr.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(hr.isDate(e))return e.toISOString();if(!s&&hr.isBlob(e))throw new gr("Blob is not supported. Use a Buffer instead.");return hr.isArrayBuffer(e)||hr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(hr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(hr.isArray(e)&&function(e){return hr.isArray(e)&&!e.some(vr)}(e)||(hr.isFileList(e)||hr.endsWith(n,"[]"))&&(s=hr.toArray(e)))return n=xr(n),s.forEach((function(e,r){!hr.isUndefined(e)&&null!==e&&t.append(!0===o?yr([n],r,a):null===o?n:n+"[]",l(e))})),!1;return!!vr(e)||(t.append(yr(i,n,a),l(e)),!1)}const c=[],d=Object.assign(br,{defaultVisitor:u,convertValue:l,isVisitable:vr});if(!hr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!hr.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),hr.forEach(n,(function(n,a){!0===(!(hr.isUndefined(n)||null===n)&&i.call(t,n,hr.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),c.pop()}}(e),t};function kr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function _r(e,t){this._pairs=[],e&&wr(e,this,t)}const Cr=_r.prototype;Cr.append=function(e,t){this._pairs.push([e,t])},Cr.toString=function(e){const t=e?function(t){return e.call(this,t,kr)}:kr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Sr=_r;function Er(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nr(e,t,n){if(!t)return e;const r=n&&n.encode||Er,i=n&&n.serialize;let a;if(a=i?i(t,n):hr.isURLSearchParams(t)?t.toString():new Sr(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Rr=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){hr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Tr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ir={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Sr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Dr="undefined"!==typeof window&&"undefined"!==typeof document,Ar=(Pr="undefined"!==typeof navigator&&navigator.product,Dr&&["ReactNative","NativeScript","NS"].indexOf(Pr)<0);var Pr;const Mr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Or={...e,...Ir};const Fr=function(e){function t(e,n,r,i){let a=e[i++];const o=Number.isFinite(+a),s=i>=e.length;if(a=!a&&hr.isArray(r)?r.length:a,s)return hr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o;r[a]&&hr.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],i)&&hr.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}(r[a])),!o}if(hr.isFormData(e)&&hr.isFunction(e.entries)){const n={};return hr.forEachEntry(e,((e,r)=>{t(function(e){return hr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const jr={transitional:Tr,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=hr.isObject(e);i&&hr.isHTMLForm(e)&&(e=new FormData(e));if(hr.isFormData(e))return r&&r?JSON.stringify(Fr(e)):e;if(hr.isArrayBuffer(e)||hr.isBuffer(e)||hr.isStream(e)||hr.isFile(e)||hr.isBlob(e))return e;if(hr.isArrayBufferView(e))return e.buffer;if(hr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return wr(e,new Or.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Or.isNode&&hr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=hr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return wr(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(hr.isString(e))try{return(t||JSON.parse)(e),hr.trim(e)}catch(bt){if("SyntaxError"!==bt.name)throw bt}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||jr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&hr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(bt){if(n){if("SyntaxError"===bt.name)throw gr.from(bt,gr.ERR_BAD_RESPONSE,this,null,this.response);throw bt}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Or.classes.FormData,Blob:Or.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};hr.forEach(["delete","get","head","post","put","patch"],(e=>{jr.headers[e]={}}));const Lr=jr,Br=hr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zr=Symbol("internals");function Wr(e){return e&&String(e).trim().toLowerCase()}function Vr(e){return!1===e||null==e?e:hr.isArray(e)?e.map(Vr):String(e)}function Ur(e,t,n,r,i){return hr.isFunction(r)?r.call(this,t,n):(i&&(t=n),hr.isString(t)?hr.isString(r)?-1!==t.indexOf(r):hr.isRegExp(r)?r.test(t):void 0:void 0)}class Hr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Wr(t);if(!i)throw new Error("header name must be a non-empty string");const a=hr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Vr(e))}const a=(e,t)=>hr.forEach(e,((e,n)=>i(e,n,t)));return hr.isPlainObject(e)||e instanceof this.constructor?a(e,t):hr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Br[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Wr(e)){const n=hr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(hr.isFunction(t))return t.call(this,e,n);if(hr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Wr(e)){const n=hr.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ur(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Wr(e)){const i=hr.findKey(n,e);!i||t&&!Ur(0,n[i],i,t)||(delete n[i],r=!0)}}return hr.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ur(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return hr.forEach(this,((r,i)=>{const a=hr.findKey(n,i);if(a)return t[a]=Vr(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Vr(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return hr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&hr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[zr]=this[zr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Wr(e);t[r]||(!function(e,t){const n=hr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return hr.isArray(e)?e.forEach(r):r(e),this}}Hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),hr.reduceDescriptors(Hr.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),hr.freezeMethods(Hr);const Gr=Hr;function qr(e,t){const n=this||Lr,r=t||n,i=Gr.from(r.headers);let a=r.data;return hr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Kr(e){return!(!e||!e.__CANCEL__)}function Xr(e,t,n){gr.call(this,null==e?"canceled":e,gr.ERR_CANCELED,t,n),this.name="CanceledError"}hr.inherits(Xr,gr,{__CANCEL__:!0});const Yr=Xr;const $r=Or.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const o=[e+"="+encodeURIComponent(t)];hr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),hr.isString(r)&&o.push("path="+r),hr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qr(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Jr=Or.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=hr.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Zr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,a=0,o=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),u=r[o];i||(i=l),n[a]=s,r[a]=l;let c=o,d=0;for(;c!==a;)d+=n[c++],c%=e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),l-i<t)return;const h=u&&l-u;return h?Math.round(1e3*d/h):void 0}};function ei(e,t){let n=0;const r=Zr(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,l=r(s);n=a;const u={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const ti="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Gr.from(e.headers).normalize();let a,o,{responseType:s,withXSRFToken:l}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}if(hr.isFormData(r))if(Or.hasStandardBrowserEnv||Or.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const d=Qr(e.baseURL,e.url);function h(){if(!c)return;const r=Gr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new gr("Request failed with status code "+n.status,[gr.ERR_BAD_REQUEST,gr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Nr(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new gr("Request aborted",gr.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new gr("Network Error",gr.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Tr;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new gr(t,r.clarifyTimeoutError?gr.ETIMEDOUT:gr.ECONNABORTED,e,c)),c=null},Or.hasStandardBrowserEnv&&(l&&hr.isFunction(l)&&(l=l(e)),l||!1!==l&&Jr(d))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&$r.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in c&&hr.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),hr.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),s&&"json"!==s&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",ei(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ei(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{c&&(n(!t||t.type?new Yr(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);f&&-1===Or.protocols.indexOf(f)?n(new gr("Unsupported protocol "+f+":",gr.ERR_BAD_REQUEST,e)):c.send(r||null)}))},ni={http:null,xhr:ti};hr.forEach(ni,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(bt){}Object.defineProperty(e,"adapterName",{value:t})}}));const ri=e=>"- ".concat(e),ii=e=>hr.isFunction(e)||null===e||!1===e,ai=e=>{e=hr.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!ii(n)&&(r=ni[(t=String(n)).toLowerCase()],void 0===r))throw new gr("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+a]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ri).join("\n"):" "+ri(e[0]):"as no adapter specified";throw new gr("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function oi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yr(null,e)}function si(e){oi(e),e.headers=Gr.from(e.headers),e.data=qr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ai(e.adapter||Lr.adapter)(e).then((function(t){return oi(e),t.data=qr.call(e,e.transformResponse,t),t.headers=Gr.from(t.headers),t}),(function(t){return Kr(t)||(oi(e),t&&t.response&&(t.response.data=qr.call(e,e.transformResponse,t.response),t.response.headers=Gr.from(t.response.headers))),Promise.reject(t)}))}const li=e=>e instanceof Gr?e.toJSON():e;function ui(e,t){t=t||{};const n={};function r(e,t,n){return hr.isPlainObject(e)&&hr.isPlainObject(t)?hr.merge.call({caseless:n},e,t):hr.isPlainObject(t)?hr.merge({},t):hr.isArray(t)?t.slice():t}function i(e,t,n){return hr.isUndefined(t)?hr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!hr.isUndefined(t))return r(void 0,t)}function o(e,t){return hr.isUndefined(t)?hr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t)=>i(li(e),li(t),!0)};return hr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||i,o=a(e[r],t[r],r);hr.isUndefined(o)&&a!==s||(n[r]=o)})),n}const ci="1.6.2",di={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{di[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const hi={};di.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new gr(r(i," has been removed"+(t?" in "+t:"")),gr.ERR_DEPRECATED);return t&&!hi[i]&&(hi[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};const fi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new gr("options must be an object",gr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],o=t[a];if(o){const t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new gr("option "+a+" must be "+n,gr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new gr("Unknown option "+a,gr.ERR_BAD_OPTION)}},validators:di},pi=fi.validators;class mi{constructor(e){this.defaults=e,this.interceptors={request:new Rr,response:new Rr}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ui(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&fi.assertOptions(n,{silentJSONParsing:pi.transitional(pi.boolean),forcedJSONParsing:pi.transitional(pi.boolean),clarifyTimeoutError:pi.transitional(pi.boolean)},!1),null!=r&&(hr.isFunction(r)?t.paramsSerializer={serialize:r}:fi.assertOptions(r,{encode:pi.function,serialize:pi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&hr.merge(i.common,i[t.method]);i&&hr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Gr.concat(a,i);const o=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,d=0;if(!s){const e=[si.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);d<c;)u=u.then(e[d++],e[d++]);return u}c=o.length;let h=t;for(d=0;d<c;){const e=o[d++],t=o[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{u=si.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,c=l.length;d<c;)u=u.then(l[d++],l[d++]);return u}getUri(e){return Nr(Qr((e=ui(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}hr.forEach(["delete","get","head","options"],(function(e){mi.prototype[e]=function(t,n){return this.request(ui(n||{},{method:e,url:t,data:(n||{}).data}))}})),hr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(ui(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}mi.prototype[e]=t(),mi.prototype[e+"Form"]=t(!0)}));const gi=mi;class vi{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Yr(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new vi((function(t){e=t}));return{token:t,cancel:e}}}const xi=vi;const yi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yi).forEach((e=>{let[t,n]=e;yi[n]=t}));const bi=yi;const wi=function e(t){const n=new gi(t),r=An(gi.prototype.request,n);return hr.extend(r,gi.prototype,n,{allOwnKeys:!0}),hr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ui(t,n))},r}(Lr);wi.Axios=gi,wi.CanceledError=Yr,wi.CancelToken=xi,wi.isCancel=Kr,wi.VERSION=ci,wi.toFormData=wr,wi.AxiosError=gr,wi.Cancel=wi.CanceledError,wi.all=function(e){return Promise.all(e)},wi.spread=function(e){return function(t){return e.apply(null,t)}},wi.isAxiosError=function(e){return hr.isObject(e)&&!0===e.isAxiosError},wi.mergeConfig=ui,wi.AxiosHeaders=Gr,wi.formToJSON=e=>Fr(hr.isHTMLForm(e)?new FormData(e):e),wi.getAdapter=ai,wi.HttpStatusCode=bi,wi.default=wi;const ki=wi,_i="https://eyecare-api-k5dr.onrender.com",Ci=_i+"/api/auth",Si={login:(e,t)=>ki.post(Ci+"/login",{username:e,password:t}).then((e=>(e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data))),logout:()=>{localStorage.removeItem("user")},getCurrentUser:()=>JSON.parse(localStorage.getItem("user")),createAccount:(e,t,n,r)=>ki.post(Ci+"/register",{username:e,email:t,password:n,confirmPassword:r,userType:"USER"})},Ei=[{name:"Home",href:"/"},{name:"About",href:"/about-home"},{name:"Help",href:"/help-home"}];function Ni(){const[e,t]=(0,r.useState)(!1);return(0,Tn.jsx)("div",{className:"navbar-common",children:(0,Tn.jsxs)("header",{className:"absolute inset-x-0 top-0 z-50",children:[(0,Tn.jsxs)("nav",{className:"flex items-center justify-between p-6 lg:px-8","aria-label":"Global",children:[(0,Tn.jsx)("div",{className:"flex lg:flex-1",children:(0,Tn.jsx)("a",{href:"/",className:"-m-1.5 p-1.5",children:(0,Tn.jsx)("img",{className:"h-12 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:""})})}),(0,Tn.jsx)("div",{className:"flex lg:hidden",children:(0,Tn.jsx)("button",{type:"button",className:"-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700",onClick:()=>t(!0),children:(0,Tn.jsx)(En,{className:"h-6 w-6","aria-hidden":"true"})})}),(0,Tn.jsx)("div",{className:"hidden lg:flex lg:gap-x-12",children:Ei.map((e=>(0,Tn.jsx)("a",{href:e.href,className:"text-sm font-semibold leading-6 text-gray-900",children:e.name},e.name)))})]}),(0,Tn.jsxs)(Cn,{as:"div",className:"lg:hidden",open:e,onClose:t,children:[(0,Tn.jsx)("div",{className:"fixed inset-0 z-50"}),(0,Tn.jsxs)(Cn.Panel,{className:"fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10",children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Tn.jsx)("a",{href:"/",className:"-m-1.5 p-1.5",children:(0,Tn.jsx)("img",{className:"h-8 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:""})}),(0,Tn.jsxs)("button",{type:"button",className:"-m-2.5 rounded-md p-2.5 text-gray-700",onClick:()=>t(!1),children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Close menu"}),(0,Tn.jsx)(Rn,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,Tn.jsx)("div",{className:"mt-6 flow-root",children:(0,Tn.jsxs)("div",{className:"-my-6 divide-y divide-gray-500/10",children:[(0,Tn.jsx)("div",{className:"space-y-2 py-6",children:Ei.map((e=>(0,Tn.jsx)("a",{href:e.href,className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:e.name},e.name)))}),(0,Tn.jsx)("div",{className:"py-6",children:(0,Tn.jsx)("a",{href:"/login",className:"-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Log in"})})]})})]})]})]})})}function Ri(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[s,l]=(0,r.useState)(""),u=ee();return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ni,{}),(0,Tn.jsxs)("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 pb-32 pt-32 py-12 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,Tn.jsx)("img",{className:"mx-auto h-20 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:"Your Company"}),(0,Tn.jsx)("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign in to your account"})]}),(0,Tn.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,Tn.jsxs)("form",{className:"space-y-6",onSubmit:async t=>{t.preventDefault(),o(!0);try{await Si.login(e,n).then((()=>{u("/dashboard"),window.location.reload()}),(e=>{l(e.response.data.message)}))}catch(r){console.log(r)}finally{o(!1)}},children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-gray-900",children:"Username"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>t(e.target.value)})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Tn.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"}),(0,Tn.jsx)("div",{className:"text-sm",children:(0,Tn.jsx)("a",{href:"/login",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Forgot password?"})})]}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>i(e.target.value)})})]}),(0,Tn.jsx)("div",{children:(0,Tn.jsxs)("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:[a&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),a?" Loading...":"Sign in"]})})]}),s&&(0,Tn.jsx)("br",{}),s&&(0,Tn.jsx)("div",{className:"error-message",style:{color:"red"},children:s}),(0,Tn.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-500",children:["Not a member?"," ",(0,Tn.jsx)("a",{href:"/signup",className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Sign up"})]})]})]})]})}function Ti(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),f=ee();return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ni,{}),(0,Tn.jsxs)("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 pb-32 pt-32 py-12 lg:px-8",children:[(0,Tn.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,Tn.jsx)("img",{className:"mx-auto h-20 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:"Your Company"}),(0,Tn.jsx)("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Create an account"})]}),(0,Tn.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,Tn.jsxs)("form",{className:"space-y-6",onSubmit:async t=>{t.preventDefault(),c(!0);try{await Si.createAccount(e,a,n,s).then((()=>{f("/login"),window.location.reload()}),(e=>{h(e.response.data.message)}))}catch(r){console.log(r)}finally{c(!1)}},children:[(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-gray-900",children:"Username"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>t(e.target.value)})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>o(e.target.value)})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"flex items-center justify-between",children:(0,Tn.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>i(e.target.value)})})]}),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("div",{className:"flex items-center justify-between",children:(0,Tn.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Confirm Password"})}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:e=>l(e.target.value)})})]}),(0,Tn.jsx)("div",{children:(0,Tn.jsxs)("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:[u&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),u?" Loading...":"Create Account"]})})]}),d&&(0,Tn.jsx)("br",{}),d&&(0,Tn.jsx)("div",{className:"error-message",style:{color:"red"},children:d}),(0,Tn.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-500",children:["Already have an account?"," ",(0,Tn.jsx)("a",{href:"/login",className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Log in"})]})]})]})]})}function Ii(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}var Di=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Di||{}),Ai=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ai||{});let Pi={0:e=>{let t={...e,popoverState:He(e.popoverState,{0:1,1:0})};return 0===t.popoverState&&(t.__demoMode=!1),t},1:e=>1===e.popoverState?e:{...e,popoverState:1},2:(e,t)=>e.button===t.button?e:{...e,button:t.button},3:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},4:(e,t)=>e.panel===t.panel?e:{...e,panel:t.panel},5:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},Mi=(0,r.createContext)(null);function Oi(e){let t=(0,r.useContext)(Mi);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Oi),t}return t}Mi.displayName="PopoverContext";let Fi=(0,r.createContext)(null);function ji(e){let t=(0,r.useContext)(Fi);if(null===t){let t=new Error("<".concat(e," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,ji),t}return t}Fi.displayName="PopoverAPIContext";let Li=(0,r.createContext)(null);function Bi(){return(0,r.useContext)(Li)}Li.displayName="PopoverGroupContext";let zi=(0,r.createContext)(null);function Wi(e,t){return He(t.type,Pi,e,t)}zi.displayName="PopoverPanelContext";let Vi=Ge.RenderStrategy|Ge.Static;let Ui=Ge.RenderStrategy|Ge.Static;let Hi=Qe((function(e,t){var n;let{__demoMode:i=!1,...a}=e,o=(0,r.useRef)(null),s=Le(t,je((e=>{o.current=e}))),l=(0,r.useRef)([]),u=(0,r.useReducer)(Wi,{__demoMode:i,popoverState:i?0:1,buttons:l,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,r.createRef)(),afterPanelSentinel:(0,r.createRef)()}),[{popoverState:c,button:d,buttonId:h,panel:f,panelId:p,beforePanelSentinel:m,afterPanelSentinel:g},v]=u,x=Me(null!=(n=o.current)?n:d),y=(0,r.useMemo)((()=>{if(!d||!f)return!1;for(let o of document.querySelectorAll("body > *"))if(Number(null==o?void 0:o.contains(d))^Number(null==o?void 0:o.contains(f)))return!0;let e=st(),t=e.indexOf(d),n=(t+e.length-1)%e.length,r=(t+1)%e.length,i=e[n],a=e[r];return!f.contains(i)&&!f.contains(a)}),[d,f]),b=Re(h),w=Re(p),k=(0,r.useMemo)((()=>({buttonId:b,panelId:w,close:()=>v({type:1})})),[b,w,v]),_=Bi(),C=null==_?void 0:_.registerPopover,S=Te((()=>{var e;return null!=(e=null==_?void 0:_.isFocusWithinPopoverGroup())?e:(null==x?void 0:x.activeElement)&&((null==d?void 0:d.contains(x.activeElement))||(null==f?void 0:f.contains(x.activeElement)))}));(0,r.useEffect)((()=>null==C?void 0:C(k)),[C,k]);let[E,N]=Nt(),R=Qt({mainTreeNodeRef:null==_?void 0:_.mainTreeNodeRef,portals:E,defaultContainers:[d,f]});Ie(null==x?void 0:x.defaultView,"focus",(e=>{var t,n,r,i;e.target!==window&&e.target instanceof HTMLElement&&0===c&&(S()||d&&f&&(R.contains(e.target)||null!=(n=null==(t=m.current)?void 0:t.contains)&&n.call(t,e.target)||null!=(i=null==(r=g.current)?void 0:r.contains)&&i.call(r,e.target)||v({type:1})))}),!0),$t(R.resolveContainers,((e,t)=>{v({type:1}),ut(t,lt.Loose)||(e.preventDefault(),null==d||d.focus())}),0===c);let T=Te((e=>{v({type:1});let t=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:d:d;null==t||t.focus()})),I=(0,r.useMemo)((()=>({close:T,isPortalled:y})),[T,y]),D=(0,r.useMemo)((()=>({open:0===c,close:T})),[c,T]),A={ref:s};return r.createElement(zi.Provider,{value:null},r.createElement(Mi.Provider,{value:u},r.createElement(Fi.Provider,{value:I},r.createElement(tn,{value:He(c,{0:Zt.Open,1:Zt.Closed})},r.createElement(N,null,Ke({ourProps:A,theirProps:a,slot:D,defaultTag:"div",name:"Popover"}),r.createElement(R.MainTreeNode,null))))))})),Gi=Qe((function(e,t){let n=Gt(),{id:i="headlessui-popover-button-".concat(n),...a}=e,[o,s]=Oi("Popover.Button"),{isPortalled:l}=ji("Popover.Button"),u=(0,r.useRef)(null),c="headlessui-focus-sentinel-".concat(Gt()),d=Bi(),h=null==d?void 0:d.closeOthers,f=null!==(0,r.useContext)(zi);(0,r.useEffect)((()=>{if(!f)return s({type:3,buttonId:i}),()=>{s({type:3,buttonId:null})}}),[f,i,s]);let[p]=(0,r.useState)((()=>Symbol())),m=Le(u,t,f?null:e=>{if(e)o.buttons.current.push(p);else{let e=o.buttons.current.indexOf(p);-1!==e&&o.buttons.current.splice(e,1)}o.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),e&&s({type:2,button:e})}),g=Le(u,t),v=Me(u),x=Te((e=>{var t,n,r;if(f){if(1===o.popoverState)return;switch(e.key){case dn.Space:case dn.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),s({type:1}),null==(r=o.button)||r.focus()}}else switch(e.key){case dn.Space:case dn.Enter:e.preventDefault(),e.stopPropagation(),1===o.popoverState&&(null==h||h(o.buttonId)),s({type:0});break;case dn.Escape:if(0!==o.popoverState)return null==h?void 0:h(o.buttonId);if(!u.current||null!=v&&v.activeElement&&!u.current.contains(v.activeElement))return;e.preventDefault(),e.stopPropagation(),s({type:1})}})),y=Te((e=>{f||e.key===dn.Space&&e.preventDefault()})),b=Te((t=>{var n,r;on(t.currentTarget)||e.disabled||(f?(s({type:1}),null==(n=o.button)||n.focus()):(t.preventDefault(),t.stopPropagation(),1===o.popoverState&&(null==h||h(o.buttonId)),s({type:0}),null==(r=o.button)||r.focus()))})),w=Te((e=>{e.preventDefault(),e.stopPropagation()})),k=0===o.popoverState,_=(0,r.useMemo)((()=>({open:k})),[k]),C=function(e,t){let[n,i]=(0,r.useState)((()=>Ii(e)));return Ne((()=>{i(Ii(e))}),[e.type,e.as]),Ne((()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&i("button")}),[n,t]),n}(e,u),S=f?{ref:g,type:C,onKeyDown:x,onClick:b}:{ref:m,id:o.buttonId,type:C,"aria-expanded":0===o.popoverState,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:x,onKeyUp:y,onClick:b,onMouseDown:w},E=We(),N=Te((()=>{let e=o.panel;e&&He(E.current,{[ze.Forwards]:()=>ft(e,it.First),[ze.Backwards]:()=>ft(e,it.Last)})===at.Error&&ft(st().filter((e=>"true"!==e.dataset.headlessuiFocusGuard)),He(E.current,{[ze.Forwards]:it.Next,[ze.Backwards]:it.Previous}),{relativeTo:o.button})}));return r.createElement(r.Fragment,null,Ke({ourProps:S,theirProps:a,slot:_,defaultTag:"button",name:"Popover.Button"}),k&&!f&&l&&r.createElement(tt,{id:c,features:et.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:N}))})),qi=Qe((function(e,t){let n=Gt(),{id:i="headlessui-popover-overlay-".concat(n),...a}=e,[{popoverState:o},s]=Oi("Popover.Overlay"),l=Le(t),u=en(),c=null!==u?(u&Zt.Open)===Zt.Open:0===o,d=Te((e=>{if(on(e.currentTarget))return e.preventDefault();s({type:1})}));return Ke({ourProps:{ref:l,id:i,"aria-hidden":!0,onClick:d},theirProps:a,slot:(0,r.useMemo)((()=>({open:0===o})),[o]),defaultTag:"div",features:Vi,visible:c,name:"Popover.Overlay"})})),Ki=Qe((function(e,t){let n=Gt(),{id:i="headlessui-popover-panel-".concat(n),focus:a=!1,...o}=e,[s,l]=Oi("Popover.Panel"),{close:u,isPortalled:c}=ji("Popover.Panel"),d="headlessui-focus-sentinel-before-".concat(Gt()),h="headlessui-focus-sentinel-after-".concat(Gt()),f=(0,r.useRef)(null),p=Le(f,t,(e=>{l({type:4,panel:e})})),m=Me(f),g=function(){let e=(0,r.useRef)([]),t=(0,r.useCallback)((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.every((e=>null==e)))return e.current=r,t}}();Ne((()=>(l({type:5,panelId:i}),()=>{l({type:5,panelId:null})})),[i,l]);let v=en(),x=null!==v?(v&Zt.Open)===Zt.Open:0===s.popoverState,y=Te((e=>{var t;if(e.key===dn.Escape){if(0!==s.popoverState||!f.current||null!=m&&m.activeElement&&!f.current.contains(m.activeElement))return;e.preventDefault(),e.stopPropagation(),l({type:1}),null==(t=s.button)||t.focus()}}));(0,r.useEffect)((()=>{var t;e.static||1===s.popoverState&&(null==(t=e.unmount)||t)&&l({type:4,panel:null})}),[s.popoverState,e.unmount,e.static,l]),(0,r.useEffect)((()=>{if(s.__demoMode||!a||0!==s.popoverState||!f.current)return;let e=null==m?void 0:m.activeElement;f.current.contains(e)||ft(f.current,it.First)}),[s.__demoMode,a,f,s.popoverState]);let b=(0,r.useMemo)((()=>({open:0===s.popoverState,close:u})),[s,u]),w={ref:p,id:i,onKeyDown:y,onBlur:a&&0===s.popoverState?e=>{var t,n,r,i,a;let o=e.relatedTarget;o&&f.current&&(null!=(t=f.current)&&t.contains(o)||(l({type:1}),(null!=(r=null==(n=s.beforePanelSentinel.current)?void 0:n.contains)&&r.call(n,o)||null!=(a=null==(i=s.afterPanelSentinel.current)?void 0:i.contains)&&a.call(i,o))&&o.focus({preventScroll:!0})))}:void 0,tabIndex:-1},k=We(),_=Te((()=>{let e=f.current;e&&He(k.current,{[ze.Forwards]:()=>{var t;ft(e,it.First)===at.Error&&(null==(t=s.afterPanelSentinel.current)||t.focus())},[ze.Backwards]:()=>{var e;null==(e=s.button)||e.focus({preventScroll:!0})}})})),C=Te((()=>{let e=f.current;e&&He(k.current,{[ze.Forwards]:()=>{var e;if(!s.button)return;let t=st(),n=t.indexOf(s.button),r=t.slice(0,n+1),i=[...t.slice(n+1),...r];for(let a of i.slice())if("true"===a.dataset.headlessuiFocusGuard||null!=(e=s.panel)&&e.contains(a)){let e=i.indexOf(a);-1!==e&&i.splice(e,1)}ft(i,it.First,{sorted:!1})},[ze.Backwards]:()=>{var t;ft(e,it.Previous)===at.Error&&(null==(t=s.button)||t.focus())}})}));return r.createElement(zi.Provider,{value:i},x&&c&&r.createElement(tt,{id:d,ref:s.beforePanelSentinel,features:et.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}),Ke({mergeRefs:g,ourProps:w,theirProps:o,slot:b,defaultTag:"div",features:Ui,visible:x,name:"Popover.Panel"}),x&&c&&r.createElement(tt,{id:h,ref:s.afterPanelSentinel,features:et.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}))})),Xi=Qe((function(e,t){let n=(0,r.useRef)(null),i=Le(n,t),[a,o]=(0,r.useState)([]),s=function(){let e=(0,r.useRef)(null);return{mainTreeNodeRef:e,MainTreeNode:(0,r.useMemo)((()=>function(){return r.createElement(tt,{features:et.Hidden,ref:e})}),[e])}}(),l=Te((e=>{o((t=>{let n=t.indexOf(e);if(-1!==n){let e=t.slice();return e.splice(n,1),e}return t}))})),u=Te((e=>(o((t=>[...t,e])),()=>l(e)))),c=Te((()=>{var e;let t=Pe(n);if(!t)return!1;let r=t.activeElement;return!(null==(e=n.current)||!e.contains(r))||a.some((e=>{var n,i;return(null==(n=t.getElementById(e.buttonId.current))?void 0:n.contains(r))||(null==(i=t.getElementById(e.panelId.current))?void 0:i.contains(r))}))})),d=Te((e=>{for(let t of a)t.buttonId.current!==e&&t.close()})),h=(0,r.useMemo)((()=>({registerPopover:u,unregisterPopover:l,isFocusWithinPopoverGroup:c,closeOthers:d,mainTreeNodeRef:s.mainTreeNodeRef})),[u,l,c,d,s.mainTreeNodeRef]),f=(0,r.useMemo)((()=>({})),[]),p=e,m={ref:i};return r.createElement(Li.Provider,{value:h},Ke({ourProps:m,theirProps:p,slot:f,defaultTag:"div",name:"Popover.Group"}),r.createElement(s.MainTreeNode,null))})),Yi=Object.assign(Hi,{Button:Gi,Overlay:qi,Panel:Ki,Group:Xi});function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,r.useState)(e),i=De(),a=(0,r.useCallback)((e=>{i.current&&n((t=>t|e))}),[t,i]),o=(0,r.useCallback)((e=>Boolean(t&e)),[t]),s=(0,r.useCallback)((e=>{i.current&&n((t=>t&~e))}),[n,i]),l=(0,r.useCallback)((e=>{i.current&&n((t=>t^e))}),[n]);return{flags:t,addFlag:a,hasFlag:o,removeFlag:s,toggleFlag:l}}function Qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.add(...n)}function Ji(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.remove(...n)}function Zi(e,t,n,r){let i=n?"enter":"leave",a=ke(),o=void 0!==r?function(e){let t={called:!1};return function(){if(!t.called)return t.called=!0,e(...arguments)}}(r):()=>{};"enter"===i&&(e.removeAttribute("hidden"),e.style.display="");let s=He(i,{enter:()=>t.enter,leave:()=>t.leave}),l=He(i,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=He(i,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Ji(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Qi(e,...t.base,...s,...u),a.nextFrame((()=>{Ji(e,...t.base,...s,...u),Qi(e,...t.base,...s,...l),function(e,t){let n=ke();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[a,o]=[r,i].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t})),s=a+o;if(0!==s){n.group((n=>{n.setTimeout((()=>{t(),n.dispose()}),s),n.addEventListener(e,"transitionrun",(e=>{e.target===e.currentTarget&&n.dispose()}))}));let r=n.addEventListener(e,"transitionend",(e=>{e.target===e.currentTarget&&(t(),r())}))}else t();n.add((()=>t())),n.dispose}(e,(()=>(Ji(e,...t.base,...s),Qi(e,...t.base,...t.entered),o())))})),a.dispose}function ea(e){let{immediate:t,container:n,direction:r,classes:i,onStart:a,onStop:o}=e,s=De(),l=_e(),u=Re(r);Ne((()=>{t&&(u.current="enter")}),[t]),Ne((()=>{let e=ke();l.add(e.dispose);let t=n.current;if(t&&"idle"!==u.current&&s.current)return e.dispose(),a.current(u.current),e.add(Zi(t,i.current,"enter"===u.current,(()=>{e.dispose(),o.current(u.current)}))),e.dispose}),[r])}function ta(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s+/).filter((e=>e.length>1))}let na=(0,r.createContext)(null);na.displayName="TransitionContext";var ra=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ra||{});let ia=(0,r.createContext)(null);function aa(e){return"children"in e?aa(e.children):e.current.filter((e=>{let{el:t}=e;return null!==t.current})).filter((e=>{let{state:t}=e;return"visible"===t})).length>0}function oa(e,t){let n=Re(e),i=(0,r.useRef)([]),a=De(),o=_e(),s=Te((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe.Hidden,r=i.current.findIndex((t=>{let{el:n}=t;return n===e}));-1!==r&&(He(t,{[qe.Unmount](){i.current.splice(r,1)},[qe.Hidden](){i.current[r].state="hidden"}}),o.microTask((()=>{var e;!aa(i)&&a.current&&(null==(e=n.current)||e.call(n))})))})),l=Te((e=>{let t=i.current.find((t=>{let{el:n}=t;return n===e}));return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>s(e,qe.Unmount)})),u=(0,r.useRef)([]),c=(0,r.useRef)(Promise.resolve()),d=(0,r.useRef)({enter:[],leave:[],idle:[]}),h=Te(((e,n,r)=>{u.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter((t=>{let[n]=t;return n!==e}))),null==t||t.chains.current[n].push([e,new Promise((e=>{u.current.push(e)}))]),null==t||t.chains.current[n].push([e,new Promise((e=>{Promise.all(d.current[n].map((e=>{let[t,n]=e;return n}))).then((()=>e()))}))]),"enter"===n?c.current=c.current.then((()=>null==t?void 0:t.wait.current)).then((()=>r(n))):r(n)})),f=Te(((e,t,n)=>{Promise.all(d.current[t].splice(0).map((e=>{let[t,n]=e;return n}))).then((()=>{var e;null==(e=u.current.shift())||e()})).then((()=>n(t)))}));return(0,r.useMemo)((()=>({children:i,register:l,unregister:s,onStart:h,onStop:f,wait:c,chains:d})),[l,s,i,h,f,d,c])}function sa(){}ia.displayName="NestingContext";let la=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ua(e){var t;let n={};for(let r of la)n[r]=null!=(t=e[r])?t:sa;return n}let ca=Ge.RenderStrategy;let da=Qe((function(e,t){let{show:n,appear:i=!1,unmount:a=!0,...o}=e,s=(0,r.useRef)(null),l=Le(s,t);Oe();let u=en();if(void 0===n&&null!==u&&(n=(u&Zt.Open)===Zt.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,d]=(0,r.useState)(n?"visible":"hidden"),h=oa((()=>{d("hidden")})),[f,p]=(0,r.useState)(!0),m=(0,r.useRef)([n]);Ne((()=>{!1!==f&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))}),[m,n]);let g=(0,r.useMemo)((()=>({show:n,appear:i,initial:f})),[n,i,f]);(0,r.useEffect)((()=>{if(n)d("visible");else if(aa(h)){let e=s.current;if(!e)return;let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&d("hidden")}else d("hidden")}),[n,h]);let v={unmount:a},x=Te((()=>{var t;f&&p(!1),null==(t=e.beforeEnter)||t.call(e)})),y=Te((()=>{var t;f&&p(!1),null==(t=e.beforeLeave)||t.call(e)}));return r.createElement(ia.Provider,{value:h},r.createElement(na.Provider,{value:g},Ke({ourProps:{...v,as:r.Fragment,children:r.createElement(ha,{ref:l,...v,...o,beforeEnter:x,beforeLeave:y})},theirProps:{},defaultTag:r.Fragment,features:ca,visible:"visible"===c,name:"Transition"})))})),ha=Qe((function(e,t){var n,i;let{beforeEnter:a,afterEnter:o,beforeLeave:s,afterLeave:l,enter:u,enterFrom:c,enterTo:d,entered:h,leave:f,leaveFrom:p,leaveTo:m,...g}=e,v=(0,r.useRef)(null),x=Le(v,t),y=null==(n=g.unmount)||n?qe.Unmount:qe.Hidden,{show:b,appear:w,initial:k}=function(){let e=(0,r.useContext)(na);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[_,C]=(0,r.useState)(b?"visible":"hidden"),S=function(){let e=(0,r.useContext)(ia);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:E,unregister:N}=S;(0,r.useEffect)((()=>E(v)),[E,v]),(0,r.useEffect)((()=>{if(y===qe.Hidden&&v.current)return b&&"visible"!==_?void C("visible"):He(_,{hidden:()=>N(v),visible:()=>E(v)})}),[_,v,E,N,b,y]);let R=Re({base:ta(g.className),enter:ta(u),enterFrom:ta(c),enterTo:ta(d),entered:ta(h),leave:ta(f),leaveFrom:ta(p),leaveTo:ta(m)}),T=function(e){let t=(0,r.useRef)(ua(e));return(0,r.useEffect)((()=>{t.current=ua(e)}),[e]),t}({beforeEnter:a,afterEnter:o,beforeLeave:s,afterLeave:l}),I=Oe();(0,r.useEffect)((()=>{if(I&&"visible"===_&&null===v.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[v,_,I]);let D=w&&b&&k,A=!I||k&&!w?"idle":b?"enter":"leave",P=$i(0),M=Te((e=>He(e,{enter:()=>{P.addFlag(Zt.Opening),T.current.beforeEnter()},leave:()=>{P.addFlag(Zt.Closing),T.current.beforeLeave()},idle:()=>{}}))),O=Te((e=>He(e,{enter:()=>{P.removeFlag(Zt.Opening),T.current.afterEnter()},leave:()=>{P.removeFlag(Zt.Closing),T.current.afterLeave()},idle:()=>{}}))),F=oa((()=>{C("hidden"),N(v)}),S),j=(0,r.useRef)(!1);ea({immediate:D,container:v,classes:R,direction:A,onStart:Re((e=>{j.current=!0,F.onStart(v,e,M)})),onStop:Re((e=>{j.current=!1,F.onStop(v,e,O),"leave"===e&&!aa(F)&&(C("hidden"),N(v))}))});let L=g,B={ref:x};return D?L={...L,className:Ue(g.className,...R.current.enter,...R.current.enterFrom)}:j.current&&(L.className=Ue(g.className,null==(i=v.current)?void 0:i.className),""===L.className&&delete L.className),r.createElement(ia.Provider,{value:F},r.createElement(tn,{value:He(_,{visible:Zt.Open,hidden:Zt.Closed})|P.flags},Ke({ourProps:B,theirProps:L,defaultTag:"div",features:ca,visible:"visible"===_,name:"Transition.Child"})))})),fa=Qe((function(e,t){let n=null!==(0,r.useContext)(na),i=null!==en();return r.createElement(r.Fragment,null,!n&&i?r.createElement(da,{ref:t,...e}):r.createElement(ha,{ref:t,...e}))})),pa=Object.assign(da,{Child:fa,Root:da});const ma=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))})),ga=ma;const va=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))})),xa=va;const ya=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"}))})),ba=ya;const wa=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))})),ka=wa;const _a=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))})),Ca=_a;const Sa=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))})),Ea=Sa,Na=[{name:"Help",description:"",href:"/help",icon:ga},{name:"Contact Us",description:"",href:"/contacts",icon:xa},{name:"About",description:"",href:"/about",icon:ba},{name:"Profile",description:"",href:"/profile",icon:ka},{name:"Settings",description:"",href:"/settings",icon:Ca}];function Ra(){const[e,t]=(0,r.useState)(!1),n=ee(),i=async e=>{e.preventDefault(),Si.logout(),n("/login"),window.location.reload()};return(0,Tn.jsxs)("header",{className:"bg-white",children:[(0,Tn.jsxs)("nav",{className:"mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8","aria-label":"Global",children:[(0,Tn.jsx)("div",{className:"flex lg:flex-1",children:(0,Tn.jsxs)("a",{href:"/dashboard",className:"-m-1.5 p-1.5",children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Your Company"}),(0,Tn.jsx)("img",{className:"h-12 w-auto",src:"/images/eyecaresquarelogoblack.png",alt:""})]})}),(0,Tn.jsx)("div",{className:"flex lg:hidden",children:(0,Tn.jsxs)("button",{type:"button",className:"-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray-700",onClick:()=>t(!0),children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,Tn.jsx)(En,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,Tn.jsxs)(Yi.Group,{className:"hidden lg:flex lg:gap-x-12",children:[(0,Tn.jsx)("a",{href:"/dashboard",className:"text-sm font-semibold leading-6 text-gray-900",children:"Dashboard"}),(0,Tn.jsx)("a",{href:"/cvs-home",className:"text-sm font-semibold leading-6 text-gray-900",children:"CVS Test"}),(0,Tn.jsx)("a",{href:"/health",className:"text-sm font-semibold leading-6 text-gray-900",children:"Health Tips"}),(0,Tn.jsx)("a",{href:"/usage",className:"text-sm font-semibold leading-6 text-gray-900",children:"Usage Reports"}),(0,Tn.jsxs)(Yi,{className:"relative",children:[(0,Tn.jsxs)(Yi.Button,{className:"flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900",children:["More",(0,Tn.jsx)(Ea,{className:"h-5 w-5 flex-none text-gray-400","aria-hidden":"true"})]}),(0,Tn.jsx)(pa,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,Tn.jsx)(Yi.Panel,{className:"absolute -left-8 top-full z-10 mt-3 w-screen max-w-md overflow-hidden rounded-3xl bg-white shadow-lg ring-1 ring-gray-900/5",children:(0,Tn.jsx)("div",{className:"p-4",children:Na.map((e=>(0,Tn.jsxs)("div",{className:"group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50",children:[(0,Tn.jsx)("div",{className:"flex h-11 w-11 flex-none items-center justify-center rounded-lg bg-gray-50 group-hover:bg-white",children:(0,Tn.jsx)(e.icon,{className:"h-6 w-6 text-gray-600 group-hover:text-indigo-600","aria-hidden":"true"})}),(0,Tn.jsxs)("div",{className:"flex-auto",children:[(0,Tn.jsxs)("a",{href:e.href,className:"block font-semibold text-gray-900",children:[e.name,(0,Tn.jsx)("span",{className:"absolute inset-0"})]}),(0,Tn.jsx)("p",{className:"mt-1 text-gray-600",children:e.description})]})]},e.name)))})})})]})]}),(0,Tn.jsx)("div",{className:"hidden lg:flex lg:flex-1 lg:justify-end",children:(0,Tn.jsxs)("a",{onClick:i,className:"text-sm font-semibold leading-6 text-gray-900",children:["Logout ",(0,Tn.jsx)("span",{"aria-hidden":"true",children:"\u2192"})]})})]}),(0,Tn.jsxs)(Cn,{as:"div",className:"lg:hidden",open:e,onClose:t,children:[(0,Tn.jsx)("div",{className:"fixed inset-0 z-10"}),(0,Tn.jsxs)(Cn.Panel,{className:"fixed inset-y-0 right-0 z-10 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10",children:[(0,Tn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Tn.jsxs)("a",{href:"/dashboard",className:"-m-1.5 p-1.5",children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Your Company"}),(0,Tn.jsx)("img",{className:"h-20 w-auto",src:"/images/eyecaresquarelogowithtextblack.png",alt:""})]}),(0,Tn.jsxs)("button",{type:"button",className:"-m-2.5 rounded-md p-2.5 text-gray-700",onClick:()=>t(!1),children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Close menu"}),(0,Tn.jsx)(Rn,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,Tn.jsx)("div",{className:"mt-6 flow-root",children:(0,Tn.jsxs)("div",{className:"-my-6 divide-y divide-gray-500/10",children:[(0,Tn.jsxs)("div",{className:"space-y-2 py-6",children:[(0,Tn.jsx)("a",{href:"/dashboard",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Dashboard"}),(0,Tn.jsx)("a",{href:"/cvs-home",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"CVS Test"}),(0,Tn.jsx)("a",{href:"/health",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Health Tips"}),(0,Tn.jsx)("a",{href:"/usage",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Usage Reports"}),(0,Tn.jsx)("a",{href:"/help",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Help"}),(0,Tn.jsx)("a",{href:"/contacts",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Contact Us"}),(0,Tn.jsx)("a",{href:"/about",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"About"}),(0,Tn.jsx)("a",{href:"/profile",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Profile"}),(0,Tn.jsx)("a",{href:"/settings",className:"-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Settings"})]}),(0,Tn.jsx)("div",{className:"py-6",children:(0,Tn.jsx)("span",{onClick:i,className:"-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50",children:"Logout"})})]})})]})]})]})}function Ta(){return(0,Tn.jsx)(Tn.Fragment,{children:(0,Tn.jsx)("footer",{className:"bg-white",children:(0,Tn.jsx)("nav",{className:"mx-auto flex flex-col items-center justify-between p-6 lg:px-8","aria-label":"Global",children:(0,Tn.jsxs)(Yi.Group,{className:"flex flex-col items-center gap-y-2 lg:flex-row lg:gap-x-12 lg:items-center",children:[(0,Tn.jsx)("a",{href:"/about",className:"text-sm font-semibold leading-6 text-gray-900",children:"About"}),(0,Tn.jsx)("a",{href:"/contacts",className:"text-sm font-semibold leading-6 text-gray-900",children:"Contact Us"}),(0,Tn.jsx)("a",{href:"/help",className:"text-sm font-semibold leading-6 text-gray-900",children:"Help"})]})})})})}var Ia=function(e,t){return(Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Da(e,t){function n(){this.constructor=e}Ia(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Aa(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function Pa(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var Ma=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],i=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)}))}},e}();function Oa(){return Fa}var Fa=null,ja=new Map,La=new Map;function Ba(e,t){var n=Ua(e,t);return ja.get(n)}function za(e){for(var t=ja.entries(),n=[];;){var r=t.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===e&&n.push(s)}return n}function Wa(e){var t=e.kernelName,n=e.backendName,r=Ua(t,n);if(ja.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");ja.set(r,e)}function Va(e){var t=e.kernelName;La.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),La.set(t,e)}function Ua(e,t){return t+"_"+e}function Ha(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Ga(e,t,n){return Math.max(e,Math.min(t,n))}function qa(e){return e%2==0?e:e+1}function Ka(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Xa(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ya(e,t,n){void 0===n&&(n=""),Xa(Za(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function $a(e){Xa(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Qa(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||po(e)&&!n)for(var r=0;r<e.length;++r)Qa(e[r],t,n);else t.push(e);return t}function Ja(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Za(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function eo(e){return e%1==0}function to(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function no(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ro(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function io(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,i){var a=0,o=function(){if(e())r();else{a++;var s=t(a);null!=n&&a>=n?i():setTimeout(o,s)}};o()}))}function ao(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function oo(e,t){var n=t.length;return Xa((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Xa(e.every((function(e){return eo(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function so(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||i?null:oo(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=a){if(a[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==a[o]||a[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function lo(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function uo(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function co(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function ho(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function fo(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function po(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function mo(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function go(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function vo(e){return"string"==typeof e||e instanceof String}function xo(e){return"boolean"==typeof e}function yo(e){return"number"==typeof e}function bo(e){return Array.isArray(e)?bo(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":yo(e)?"float32":vo(e)?"string":xo(e)?"bool":"float32"}function wo(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ko(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function _o(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Co(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Qa(e)),n&&co(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function So(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var i=new Array;if(1===n.length)for(var a=n[0],o=0;o<a;o++)i[o]=r[t+o];else{a=n[0];var s=n.slice(1),l=s.reduce((function(e,t){return e*t}));for(o=0;o<a;o++)i[o]=e(t+o*l,s,r)}return i}(0,e,t)}function Eo(e,t){for(var n=No(e,t),r=0;r<n.length;r++)n[r]=1;return n}function No(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Ro(){return Oa().platform.now()}function To(e){e.forEach((function(t){Xa(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Io(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Oa().platform.encode(e,t)}function Do(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Oa().platform.decode(e,t)}function Ao(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function Po(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}Object.freeze({shuffle:Ha,clamp:Ga,nearestLargerEven:qa,sum:Ka,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r]);n+=i*i}return n},assert:Xa,assertShapesMatch:Ya,assertNonNull:$a,flatten:Qa,sizeFromShape:Ja,isScalarShape:function(e){return 0===e.length},arraysEqual:Za,isInt:eo,tanh:to,sizeToSquarishShape:no,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Ha(t),t},rightPad:ro,repeatedTry:io,inferFromImplicitShape:ao,parseAxisParam:oo,squeezeShape:so,getTypedArrayFromDType:lo,getArrayFromDType:uo,checkConversionForErrors:co,isValidDtype:ho,hasEncodingLoss:fo,isTypedArray:po,bytesPerElement:mo,bytesFromStringArray:go,isString:vo,isBoolean:xo,isNumber:yo,inferDtype:bo,isFunction:wo,nearestDivisor:ko,computeStrides:_o,toTypedArray:Co,toNestedArray:So,makeOnesTypedArray:Eo,makeZerosTypedArray:No,now:Ro,assertNonNegativeIntegerDimensions:To,fetch:function(e,t){return Oa().platform.fetch(e,t)},encodeString:Io,decodeString:Do,locToIndex:Ao,indexToLoc:Po});var Mo=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Oo)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,a=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then((function(a){var o="";null!=a.getExtraProfileInfo&&(o=a.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,a.kernelMs,t,o)}))}))})),r},e}(),Oo=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,a){var o="number"==typeof r?ro(r+"ms",9):r.error,s=ro(e,25),l=t.rank,u=t.size,c=ro(t.shape.toString(),14),d="";for(var h in i){var f=i[h].shape||t.shape,p=f.length;d+=h+": "+p+"D "+(p>0?f:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+l+"D "+c+"\t%c"+u+"\t%c"+d+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Fo=7;function jo(e,t,n){return ro(Array.isArray(e)?parseFloat(e[0].toFixed(Fo))+" + "+parseFloat(e[1].toFixed(Fo))+"j":vo(e)?"'"+e+"'":"bool"===n?Lo(e):parseFloat(e.toFixed(Fo)).toString(),t)}function Lo(e){return 0===e?"false":"true"}function Bo(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var zo=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ja(e),null!=n){var i=n.length;Xa(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||uo(t,this.size),this.strides=_o(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Xa(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var i=this.locToIndex(n);this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var a=i[r];if(a<0||a>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=e[e.length-1],l=0;l<e.length-1;++l)s+=this.strides[l]*e[l];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Wo().makeTensor(this.values,this.shape,this.dtype)},e}(),Wo=null,Vo=null,Uo=null,Ho=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ja(e),this.strides=_o(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Xa(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),Vo.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Vo.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Vo.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,So(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return So(this.shape,this.dataSync())},e.prototype.data=function(){return Aa(this,void 0,void 0,(function(){var e,t;return Pa(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Wo().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return Do(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Wo().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Do(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Wo().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Wo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Vo.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Vo.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Vo.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Vo.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Vo.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Vo.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Vo.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=_o(t),a=function(e,t,n,r){var i=Ja(t),a=r[r.length-1],o=new Array(a).fill(0),s=t.length,l="complex64"===n?Bo(e):e;if(s>1)for(var u=0;u<i/a;u++)for(var c=u*a,d=0;d<a;d++)o[d]=Math.max(o[d],jo(l[c+d],0,n).length);return o}(e,t,n,i),o=t.length,s=function e(t,n,r,i,a,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,l=n[0],u=n.length;if(0===u)return"complex64"===r?[jo(Bo(t)[0],0,r)]:"bool"===r?[Lo(t[0])]:[t[0].toString()];if(1===u){if(l>20){var c=3*s,d=Array.from(t.slice(0,c)),h=Array.from(t.slice((l-3)*s,l*s));return"complex64"===r&&(d=Bo(d),h=Bo(h)),["["+d.map((function(e,t){return jo(e,a[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return jo(e,a[l-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Bo(t):Array.from(t)).map((function(e,t){return jo(e,a[t],r)})).join(", ")+"]"]}var f=n.slice(1),p=i.slice(1),m=i[0]*s,g=[];if(l>20){for(var v=0;v<3;v++){var x=(y=v*m)+m;g.push.apply(g,e(t.slice(y,x),f,r,p,a,!1))}for(g.push("..."),v=l-3;v<l;v++)x=(y=v*m)+m,g.push.apply(g,e(t.slice(y,x),f,r,p,a,v===l-1))}else for(v=0;v<l;v++){var y;x=(y=v*m)+m,g.push.apply(g,e(t.slice(y,x),f,r,p,a,v===l-1))}var b=2===u?",":"";for(g[0]="["+g[0]+b,v=1;v<g.length-1;v++)g[v]=" "+g[v]+b;var w=",\n";for(v=2;v<u;v++)w+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(o?"":w),g}(e,t,n,i,a),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+o),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map((function(e){return"    "+e})).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Vo.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Vo.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Vo.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Vo.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Vo.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Vo.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Vo.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Vo.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Vo.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Vo.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Vo.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Vo.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),Uo("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),Vo.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Vo.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Vo.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Vo.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Vo.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Vo.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Vo.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Vo.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Vo.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Vo.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Vo.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Vo.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Vo.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Vo.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Vo.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Vo.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Vo.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Vo.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Vo.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Vo.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Vo.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Vo.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Vo.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Vo.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Vo.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Vo.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Vo.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Vo.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Vo.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Vo.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Vo.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Vo.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Vo.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Vo.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Vo.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Vo.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Vo.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Vo.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Vo.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Vo.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Vo.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Vo.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Vo.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Vo.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Vo.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Vo.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Vo.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Vo.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Vo.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Vo.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Vo.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Vo.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Vo.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Vo.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Vo.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Vo.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Vo.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Vo.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Vo.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Vo.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Vo.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Vo.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Vo.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Vo.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Vo.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Vo.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Vo.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Vo.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Vo.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Vo.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Vo.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Vo.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Vo.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Vo.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Vo.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Vo.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Vo.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Vo.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Vo.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Vo.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Vo.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Vo.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Vo.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Vo.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Vo.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Vo.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Vo.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Vo.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Vo.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Vo.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,a){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),Vo.conv1d(this,e,t,n,r,i,a)},e.prototype.conv2d=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),Vo.conv2d(this,e,t,n,r,i,a)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),Vo.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),Vo.depthwiseConv2d(this,e,t,n,r,i,a)},e.prototype.separableConv2d=function(e,t,n,r,i,a){return void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),Vo.separableConv2d(this,e,t,n,r,i,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Vo.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Vo.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Vo.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),Vo.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Wo().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Vo.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Vo.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Vo.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Vo.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,a,o,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),Vo.stridedSlice(this,e,t,n,r,i,a,o,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Vo.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Vo.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Vo.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Vo.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Vo.spectral.irfft(this)},e}();Object.defineProperty(Ho,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Go,qo,Ko,Xo,Yo,$o=function(e){function t(t,n,r,i){var a=e.call(this,t.shape,t.dtype,t.dataId,i)||this;return a.trainable=n,a.name=r,a}return Da(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Za(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Wo().disposeTensor(this),this.dataId=e.dataId,Wo().incRef(this,null)},t.prototype.dispose=function(){Wo().disposeVariable(this),this.isDisposedInternal=!0},t}(Ho);Object.defineProperty($o,Symbol.hasInstance,{value:function(e){return e instanceof Ho&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Go||(Go={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(qo||(qo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ko||(Ko={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Xo||(Xo={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Yo||(Yo={}));var Qo={float32:Xo,int32:qo,bool:Ko,complex64:Yo};function Jo(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Qo[e][t]}function Zo(e){return Jo(e,"int32")}function es(e,t){if(e.dtype===t.dtype)return[e,t];var n=Jo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ts(e,t){Xa(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function ns(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Ho)n.push(t);else if(i=t,Array.isArray(i)||"object"==typeof i){var i,a=t;for(var o in a){var s=a[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:es,assertTypesMatch:ts,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:ns});var rs,is=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),as=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new is}return e.prototype.ready=function(){return Aa(this,void 0,void 0,(function(){var e,t,n;return Pa(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r;return Pa(this,(function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Mo(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;za(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;za(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,a=r.then((function(n){return!(i<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,a=r.asyncInit;if(a||i)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun((function(){return r.startScope(i)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,i){return this.runKernelFunc(null,t,null,e,n,r,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),i=0;n.forEach((function(e){i+="complex64"===e.dtype?3:1}));var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-a;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,i,a,o){var s,l=this;void 0===a&&(a=[]),void 0===o&&(o=[]);var u=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,h=function(e){c&&(u=e.map((function(e){return l.keep(l.clone(e))})))},f=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=Ba(r,this.backendName);return d=null!=g?function(){var e=l.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:i,backend:l.backend});var n=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return l.makeTensorFromDataId(t,n,r)})),u=s.filter((function(e,t){return o[t]}));return h((a||[]).slice().concat(u)),s}:function(){var t=l.backend.numDataIds();m=l.tidy((function(){return e(l.backend,h)}));var n=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return l.state.kernelDepth++}),(function(){return l.state.kernelDepth--}),(function(){s=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(r,t,(function(){return d()})):d()})),c&&this.addTapeNode(r,t,s,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var i=e;"string"===n&&vo(e[0])&&(i=e.map((function(e){return Io(e)})));var a=r.write(i,t,n),o=new Ho(t,n,a,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(a),l=go(i);this.state.numBytes+=l-s.bytes,s.bytes=l}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var i=new Ho(t,n=n||"float32",e,this.nextTensorId());return this.incRef(i,r),i},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var i=new $o(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*mo(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof $o||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Aa(this,void 0,void 0,(function(){var t,n;return Pa(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,i){var a=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=function(e){return La.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],i=No(r.size,r.dtype);return a.makeTensor(i,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],i)}),this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=ns(e),r=new Set(n.map((function(e){return e.id}))),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||r.has(a.id)||a.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),Xa(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",e)}));Xa(a instanceof Ho,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},i={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var o=(p=e[a]).inputs;for(var s in o){for(var l=o[s],u=!1,c=0;c<t.length;c++)if(r[l.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),u=!0,i[p.id]=!0;break}if(u)break}}var d={};d[n.id]=!0;var h={};for(a=e.length-1;a>=0;a--)for(o=(p=e[a]).inputs,c=0;c<p.outputs.length;c++)if(d[p.outputs[c].id]){for(var s in o)d[o[s].id]=!0,h[p.id]=!0;break}var f=[];for(a=0;a<e.length;a++){var p;if(i[(p=e[a]).id]&&h[p.id]){var m={};for(var s in p.inputs){var g=p.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},p);v.inputs=m,v.outputs=p.outputs,f.push(v)}}return f}(this.state.activeTape,t,a);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[a.id]=null==n?(r=Eo(Ja(e=a.shape),"float32"),os.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var i=t[r],a=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var o=i.gradient(a),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=i.inputs[t];if(!Za(r.shape,a.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var s=e[a.id];e[a.id]=s.add(r),s.dispose()}};for(var l in i.inputs)s(l)},i=t.length-1;i>=0;i--)r(i)}(s,o,(function(e){return i.tidy(e)}));var l=t.map((function(e){return s[e.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),i.state.activeTape=null),{value:a,grads:l}}))},e.prototype.customGrad=function(e){var t=this;return Xa(wo(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];Xa(r.every((function(e){return e instanceof Ho})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(e,t){a[t]=e})),t.runKernelFunc((function(t,i){return Xa((n=e.apply(void 0,r.concat([i]))).value instanceof Ho,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Xa(wo(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(e,t){var i=n.gradFunc(e,t),a=Array.isArray(i)?i:[i];Xa(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Xa(a.every((function(e){return e instanceof Ho})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Aa(this,void 0,void 0,(function(){var t,n;return Pa(this,(function(r){switch(r.label){case 0:return t=Ro(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Ro()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new is,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),os=function(){var e=function(){if(null==rs){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}rs=e}return rs}();if(null==e._tfengine){var t=new Ma(e);e._tfengine=new as(t)}return function(e){Fa=e}(e._tfengine.ENV),Wo=function(){return e._tfengine},e._tfengine}();function ss(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var ls=Oa();ls.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),ls.registerFlag("IS_BROWSER",(function(){return ss()})),ls.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),ls.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),ls.registerFlag("PROD",(function(){return!1})),ls.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return ls.getBool("DEBUG")})),ls.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),ls.registerFlag("IS_TEST",(function(){return!1}));var us,cs,ds,hs={},fs={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ps(e,t){hs[e]=t}function ms(e){e in hs||(hs[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete hs[e]}),!1),1===e?t.getContext("webgl",fs)||t.getContext("experimental-webgl",fs):t.getContext("webgl2",fs)}(e));var t=hs[e];return t.isContextLost()?(delete hs[e],ms(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),hs[e])}function gs(e,t){return[t,e]}function vs(e){var t=Ja(e);return no(Math.ceil(t/4))}function xs(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ys(e,t){var n,r,i,a,o,s,l,u,c,d=e;return 2===Oa().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,a=d.RGBA32F,o=d.RED,s=4,l=1,u=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,a=d.RGBA,o=e.RGBA,s=4,l=4,u=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:c}}function bs(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+ks(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(us||(us={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(cs||(cs={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ds||(ds={}));function ws(e){return!!(Oa().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ks(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function _s(e,t,n){return qs(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Cs(e,t,n){var r=qs(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(bs(e,t,(function(){return e.shaderSource(r,n)})),bs(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Ss(e,t,n){var r=qs(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(bs(e,t,(function(){return e.shaderSource(r,n)})),bs(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Rs.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),a=i.length.toString().length+2,o=i.map((function(e,t){return ro((t+1).toString(),a)+e})),s=0,l=0;l<o.length;l++)s=Math.max(o[l].length,s);var u=o.slice(0,r-1),c=o.slice(r-1,r),d=o.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+ro(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Es,Ns,Rs=/ERROR: [0-9]+:([0-9]+):/g;function Ts(e,t){return qs(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Is(e,t,n){if(bs(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ds(e,t,n){if(bs(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function As(e,t,n){var r=qs(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return bs(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),bs(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Ps(e,t,n){var r=qs(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return bs(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),bs(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Ms(e,t){return qs(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Os(e,t){var n=Oa().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Fs(e,t){return qs(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function js(e,t,n,r,i,a,o,s){var l=e.getAttribLocation(n,r);return-1!==l&&(bs(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,i)})),bs(e,t,(function(){return e.vertexAttribPointer(l,a,e.FLOAT,!1,o,s)})),bs(e,t,(function(){return e.enableVertexAttribArray(l)})),!0)}function Ls(e,t,n,r){Ks(e,r),bs(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function Bs(e,t,n,r){return qs(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function zs(e,t,n){return e.getUniformLocation(t,n)}function Ws(e,t,n,r,i,a){bs(e,t,(function(){return Ls(e,t,r,a)})),bs(e,t,(function(){return e.uniform1i(i,a)}))}function Vs(e,t,n,r){bs(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),bs(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Us(e,t,n){bs(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),bs(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Hs(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Gs(e,t))}function Gs(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function qs(e,t,n,r){var i=bs(e,t,(function(){return n()}));if(null==i)throw new Error(r);return i}function Ks(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Xs(e,t){return void 0===t&&(t=2),Ja(e.slice(0,e.length-t))}function Ys(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function $s(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Xs(e)].concat(Ys(e))),t}function Qs(e,t){var n;void 0===t&&(t=!1);var r=Oa().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?qa(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var i=so(e);e=i.newShape}var a=Ja(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Xs(e),s=2,l=2;return e.length&&(s=(n=Ys(e))[0],l=n[1]),no(a=o*(s/2)*(l/2)).map((function(e){return 2*e}))}return no(a)}function Js(e){return e%2==0}function Zs(e,t){if(Za(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Js(n)&&Js(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Js(e[0])&&Js(t[0])}function el(e){if(null==Es){var t=ms(e);Es=t.getParameter(t.MAX_TEXTURE_SIZE)}return Es}function tl(e){if(null==Ns){var t=ms(e);Ns=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ns)}function nl(e){if(0===e)return 0;var t=ms(e);return rl(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:rl(t,"EXT_disjoint_timer_query")?1:0}function rl(e,t){return null!=e.getExtension(t)}function il(e){try{if(null!=ms(e))return!0}catch(e){return!1}return!1}function al(e){if(0===e)return!1;var t=ms(e);if(1===e){if(!rl(t,"OES_texture_float"))return!1}else if(!rl(t,"EXT_color_buffer_float"))return!1;return sl(t)}function ol(e){if(0===e)return!1;var t=ms(e);if(1!==e){if(rl(t,"EXT_color_buffer_float"))return sl(t);if(rl(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=ys(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}(t,n)}return!1}return!!rl(t,"OES_texture_float")&&!!rl(t,"WEBGL_color_buffer_float")&&sl(t)}function sl(e){var t=ys(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function ll(e){return 2===e&&null!=ms(e).fenceSync}var ul=Object.freeze({callAndCheck:bs,canBeRepresented:ws,getWebGLErrorMessage:ks,getExtensionOrThrow:_s,createVertexShader:Cs,createFragmentShader:Ss,createProgram:Ts,linkProgram:Is,validateProgram:Ds,createStaticVertexBuffer:As,createStaticIndexBuffer:Ps,getNumChannels:function(){return 2===Oa().getNumber("WEBGL_VERSION")?1:4},createTexture:Ms,validateTextureSize:Os,createFramebuffer:Fs,bindVertexBufferToProgramAttribute:js,bindTextureUnit:Ls,unbindTextureUnit:function(e,t,n){Ks(e,n),bs(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Bs,getProgramUniformLocation:zs,bindTextureToProgramUniformSampler:Ws,bindCanvasToFramebuffer:function(e,t){bs(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),bs(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),bs(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Vs,unbindColorTextureFromFramebuffer:Us,validateFramebuffer:Hs,getFramebufferErrorMessage:Gs,getBatchDim:Xs,getRowsCols:Ys,getShapeAs3D:$s,getTextureShapeFromLogicalShape:Qs,isReshapeFree:Zs,getWebGLMaxTextureSize:el,resetMaxTextureSize:function(){Es=null},resetMaxTexturesInShader:function(){Ns=null},getMaxTexturesInShader:tl,getWebGLDisjointQueryTimerVersion:nl,hasExtension:rl,isWebGLVersionEnabled:il,isCapableOfRenderingToFloatTexture:al,isDownloadFloatTextureEnabled:ol,isWebGLFenceEnabled:ll}),cl=Oa();function dl(e){Oa().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function hl(e,t){return os.tidy(e,t)}function fl(e){ns(e).forEach((function(e){return e.dispose()}))}function pl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Oa().getBool("IS_TEST")||console.warn.apply(console,e)}function ml(e,t){var n=e;if(po(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||po(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Oa().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||po(t)){Xa(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Xa(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var i=n.slice(1),a=0;a<t.length;++a)e(t[a],i,r.concat(a))}else Xa(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function gl(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function vl(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Ho)return gl(r,e.dtype,t,n),e;var i=bo(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),gl(r,i,t,n),null==e||!po(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=ml(e,i);po(e)||Array.isArray(e)||(e=[e]);var s="string"!==i?Co(e,i,Oa().getBool("DEBUG")):Qa(e,[],!0);return os.makeTensor(s,o,i)}function xl(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return vl(e,t+"["+r+"]",n)}),r)}function yl(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function bl(e,t,n){for(var r=e.length+t.length,i=[],a=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[a++]):i.push(t[o++]);return i}function wl(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((function(t){return e[t]}))]}function kl(e,t){return bl(e,t.map((function(e){return 1})),t)}function _l(e,t,n){Xa(yl(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function Cl(e,t){if(yl(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Sl(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function El(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Nl(e,t){var n=e[0].length;e.forEach((function(e,t){Xa(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Xa(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,i){for(var a=0;a<n;a++)Xa(a===t||e[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function Rl(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Tl(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];os.startScope(n);try{var i=r.apply(void 0,e);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),os.endScope(i),i}catch(e){throw os.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}cl.registerFlag("HAS_WEBGL",(function(){return cl.getNumber("WEBGL_VERSION")>0})),cl.registerFlag("WEBGL_VERSION",(function(){return il(2)?2:il(1)?1:0})),cl.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===cl.get("WEBGL_VERSION")})),cl.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),cl.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),cl.registerFlag("WEBGL_PACK",(function(){return cl.getBool("HAS_WEBGL")})),cl.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_CLIP",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),cl.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_PACK_REDUCE",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_CONV_IM2COL",(function(){return cl.getBool("WEBGL_PACK")})),cl.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return el(cl.getNumber("WEBGL_VERSION"))})),cl.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return tl(cl.getNumber("WEBGL_VERSION"))})),cl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=cl.getNumber("WEBGL_VERSION");return 0===e?0:nl(e)})),cl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return cl.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),cl.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return al(cl.getNumber("WEBGL_VERSION"))})),cl.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!cl.getBool("WEBGL_FORCE_F16_TEXTURES")&&cl.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),cl.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return ol(cl.getNumber("WEBGL_VERSION"))})),cl.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return ll(cl.getNumber("WEBGL_VERSION"))})),cl.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return cl.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Uo=dl;var Il=Tl({complex_:function(e,t){var n=vl(e,"real","complex"),r=vl(t,"imag","complex");return Ya(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),os.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Dl=Tl({real_:function(e){var t=vl(e,"input","real");return os.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Al=Tl({imag_:function(e){var t=vl(e,"input","imag");return os.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Pl(e,t,n){return Ml(e,t,ml(e,n),n)}function Ml(e,t,n,r){if(null==r&&(r=bo(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!po(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){To(t);var i=Ja(t),a=Ja(n);Xa(i===a,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+a}));for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==Ja(t.slice(o));Xa(n[o]===t[o]||!l,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return po(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Co(e,r,Oa().getBool("DEBUG")):Qa(e,[],!0),os.makeTensor(e,t,r)}function Ol(e,t){if((po(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&po(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ml(e,[],[],t)}function Fl(e,t){$a(e);var n=ml(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ml(e,null,n,t)}function jl(e,t,n){if($a(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=ml(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ml(e,t,r,n)}function Ll(e,t,n){if($a(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=ml(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)}function Bl(e,t,n){if($a(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=ml(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)}function zl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=zl(e,"float32"),r=Wl(e,"float32");return Il(n,r)}var i=Eo(Ja(e),t);return os.makeTensor(i,e,t)}function Wl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Wl(e,"float32"),r=Wl(e,"float32");return Il(n,r)}var i=No(Ja(e),t);return os.makeTensor(i,e,t)}function Vl(e,t,n){return os.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Ul(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Wl([0],r);var i=No(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Fl(i,r)}var Hl=Tl({onesLike_:function(e){var t=vl(e,"x","onesLike");if("complex64"===t.dtype){var n=Hl(Dl(t)),r=Gl(Al(t));return Il(n,r)}return os.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Gl(e)}}}))}}),Gl=Tl({zerosLike_:function(e){var t=vl(e,"x","zerosLike");return os.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Gl(e)}}}))}}),ql=Tl({concat_:function(e,t){void 0===t&&(t=0),Xa(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=xl(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=oo(t,n[0].shape)[0];var r=Rl(n.map((function(e){return e.shape})),t);if(0===Ja(r))return Pl([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var i=n.map((function(e){return e.shape}));Nl(i,t);var a=n,o={axis:t};return os.runKernelFunc((function(e){return e.concat(n,t)}),a,(function(e){var n=i.map((function(e){return e[t]}));return Ql(e,n,t).map((function(e){return function(){return e}}))}),"Concat",o)}}),Kl=Tl({concat1d_:function(e){return ql(e,0)}}),Xl=Tl({concat2d_:function(e,t){return ql(e,t)}}),Yl=Tl({concat3d_:function(e,t){return ql(e,t)}}),$l=Tl({concat4d_:function(e,t){return ql(e,t)}}),Ql=Tl({split_:function(e,t,n){void 0===n&&(n=0);var r,i=vl(e,"x","split");return n=oo(n,i.shape)[0],"number"==typeof t?(Xa(i.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(i.shape[n]/t)):(Xa(i.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),os.runKernelFunc((function(e){return e.split(i,r,n)}),{$x:i},(function(e){return{$x:function(){return ql(e,n)}}}))}});function Jl(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Zl=Jl((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),a=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),eu=Jl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),tu=Jl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),nu=Jl((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.x&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),ru=Jl((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.X&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),iu=Jl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),au=Jl((function(e){!function(t,r){var i,a=this,o=256,s="random",l=r.pow(o,6),u=r.pow(2,52),c=2*u,d=o-1;function h(e,n,d){var h=[],v=m(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,g(t)]}}():e,3),h),x=new f(h),y=function(){for(var e=x.g(6),t=l,n=0;e<u;)e=(e+n)*o,t*=o,n=x.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|x.g(4)},y.quick=function(){return x.g(4)/4294967296},y.double=y,m(g(x.S),t),(n.pass||d||function(e,t,n,i){return i&&(i.S&&p(i,x),e.state=function(){return p(x,{})}),n?(r[s]=e,t):e})(y,v,"global"in n?n.global:this==r,n.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=d&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=d&i+1],n=n*o+s[d&(s[i]=s[a=d&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=h,m(r.random(),t),e.exports){e.exports=h;try{i=n(902)}catch(e){}}}([],Math)}));au.alea=Zl,au.xor128=eu,au.xorwow=tu,au.xorshift7=nu,au.xor4096=ru,au.tychei=iu;var ou=au.alea,su=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=ou(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,a=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),lu=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=ou(i.toString()),this.randn=new su(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(i=this.randu())<t||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),uu=function(){function e(e,t,n,r){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=ou(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function cu(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",To(e),new zo(e,t,n)}var du=Tl({batchToSpaceND_:function(e,t,n){var r=vl(e,"x","batchToSpaceND"),i=t.reduce((function(e,t){return e*t}));return Xa(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Xa(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Xa(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i})),os.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),hu=Tl({broadcastTo_:function(e,t){var n=vl(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var i=n.shape.slice();i.length<t.length;)i.unshift(1);n=n.reshape(i)}for(var a=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])a[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=a.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():os.runKernelFunc((function(e){return e.tile(n,a)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),fu=Tl({cast_:function(e,t){var n=vl(e,"x","cast");if(!ho(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return os.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),pu=Tl({clone_:function(e){var t=vl(e,"x","clone",null);return os.runKernelFunc((function(){return os.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),mu=Tl({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=vl(e,"x","cumsum"),a=Cl([t|=0],i.rank),o=i;null!=a&&(o=i.transpose(a));var s=El(1,i.rank)[0],l=os.runKernelFunc((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=a&&(l=l.transpose(a)),l}}),gu=Tl({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=vl(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return Xa(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Xa(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Xa(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),os.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),vu=Tl({expandDims_:function(e,t){void 0===t&&(t=0);var n=vl(e,"x","expandDims",null);Xa(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Xa(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Iu(n,r)}}),xu=Tl({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var i=cu([e,t],r),a=e<=t?e:t,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Mu(vu(s,0),[n[0],1,1]);if(2===n.length)return Mu(vu(vu(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Mu(vu(vu(vu(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),yu=Tl({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var i=vl(e,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?i.as2D(1,-1):i,l=os.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?l.as1D():l}}),bu=Tl({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=vl(e,"indices","oneHot","int32"),a=i.shape.concat([t]);return i=i.flatten(),os.runKernelFunc((function(e){return e.oneHot(i,t,n,r)}),{$indices:i},(function(e){return{$indices:function(){return Wl(i.shape,"float32")}}})).reshape(a)}}),wu=Tl({pad_:function(e,t,n){void 0===n&&(n=0);var r=vl(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:n};return os.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",i)}}),ku=Tl({pad1d_:function(e,t,n){return void 0===n&&(n=0),Xa(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),wu(e,[t],n)}}),_u=Tl({pad2d_:function(e,t,n){return void 0===n&&(n=0),Xa(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),wu(e,t,n)}}),Cu=Tl({pad3d_:function(e,t,n){return void 0===n&&(n=0),Xa(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),wu(e,t,n)}}),Su=Tl({pad4d_:function(e,t,n){return void 0===n&&(n=0),Xa(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),wu(e,t,n)}}),Eu=Tl({rand_:function(e,t,n){var r=Ja(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=t();return os.makeTensor(i,e,n)}}),Nu=Tl({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new su(t,n,r,!1,i),o=cu(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Ru=Tl({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new lu(t,n,r,i),o=cu(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Tu=Tl({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=cu(e,r),o=new uu(t,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Iu=Tl({reshape_:function(e,t){var n=vl(e,"x","reshape",null);t=ao(t,n.size),Xa(n.size===Ja(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return os.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),Du=Tl({spaceToBatchND_:function(e,t,n){var r=vl(e,"x","spaceToBatchND");return Xa(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Xa(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Xa(r.shape.reduce((function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),os.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Au=Tl({squeeze_:function(e,t){var n=vl(e,"x","squeeze");return Iu(n,so(n.shape,t).newShape)}}),Pu=Tl({stack_:function(e,t){void 0===t&&(t=0);var n=xl(e,"tensors","stack");if(Xa(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;Xa(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Ya(i,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Xa(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(e){return e.expandDims(t)}));return ql(o,t)}}),Mu=Tl({tile_:function(e,t){var n=vl(e,"x","tile",null);Xa(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],i={reps:t};return os.runKernelFunc((function(e,r){var i=e.tile(n,t);return r([n]),i}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Gl(r);if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<t[0];++i)for(var a=0;a<t[1];++a)n=n.add(e.slice([i*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<t[0];++i)for(a=0;a<t[1];++a)for(var o=0;o<t[2];++o)n=n.add(e.slice([i*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<t[0];++i)for(a=0;a<t[1];++a)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",i,r)}}),Ou=Tl({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new su(t,n,r,!0,i),o=cu(e,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Fu=Tl({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=vl(e,"x","unstack");Xa(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return os.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Pu(e,t)}}}),"Unpack",r)}});function ju(e,t,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var a=t.length,o=0;o<a;++o)i=i.concat([e[o+1]/t[o],t[o]]);i=i.concat(e.slice(a+1))}return i}function Lu(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<e;++i)i>=2*t+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function Bu(e,t,n,r){void 0===r&&(r=!0);var i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?i.push(t[a-1]*e[a]):i.push(e[a]/t[a-1]):i.push(e[a]);return i}function zu(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Wu(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function Vu(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=e.shape,s=n.slice();s.pop();var l=1;for(a=r;a<e.rank;++a)l*=o[a],s.push(o[a]);var u=_o(e.shape).map((function(e){return e/l})).concat([1]).slice(0,r);return[s,i,l,u]}Object.freeze({prepareAndValidate:Vu});function Uu(e){return e<=30?e:ko(e,Math.floor(Math.sqrt(e)))}function Hu(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(e.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==t.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==e[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+e[o+i]+")")}function Gu(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Hu(n,t,e)}function qu(e,t,n){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var l=i<1?1:i;return{sliceRank:i,numUpdates:Ja(t.shape)/l,sliceSize:o,strides:_o(n.slice(0,i)).concat([1]),outputSize:Ja(n)}}Object.freeze({validateUpdateShape:Hu,validateInput:Gu,calculateShapes:qu});function Ku(e,t,n){Xa(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Xa(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Xa(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},i=0;i<e.rank;++i)r(i)}function Xu(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Yu(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function $u(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),Ga(0,a,s-1)}function Qu(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),o>0?Ga(0,a,s):Ga(-1,a,s-1)}function Ju(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Zu(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Ku,maskToAxes:Xu,computeOutShape:Yu,startForAxis:$u,stopForAxis:Qu,isSliceContinous:Ju,computeFlatOffset:Zu});function ec(e){return os.customGrad(e)}var tc=Tl({softmax_:function(e,t){void 0===t&&(t=-1);var n=vl(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return os.runKernelFunc((function(e,r){var i=e.softmax(n,t);return r([i]),i}),{logits:n},(function(e,n){var r=n[0],i=e.mul(r);return{logits:function(){return i.sub(i.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),nc=Tl({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=vl(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return ec((function(e,n){var r=e.max(t,!0),i=e.sub(r),a=i.toFloat().sub(i.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),rc=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),ic=function(){function e(){}return e.prototype.time=function(e){return ac("time")},e.prototype.read=function(e){return ac("read")},e.prototype.readSync=function(e){return ac("readSync")},e.prototype.numDataIds=function(){return ac("numDataIds")},e.prototype.disposeData=function(e){return ac("disposeData")},e.prototype.write=function(e,t,n){return ac("write")},e.prototype.move=function(e,t,n,r){return ac("move")},e.prototype.memory=function(){return ac("memory")},e.prototype.floatPrecision=function(){return ac("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return ac("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ac("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return ac("slice")},e.prototype.stridedSlice=function(e,t,n,r){return ac("stridedSlice")},e.prototype.unstack=function(e,t){return ac("unstack")},e.prototype.reverse=function(e,t){return ac("reverse")},e.prototype.concat=function(e,t){return ac("concat")},e.prototype.neg=function(e){return ac("neg")},e.prototype.add=function(e,t){return ac("add")},e.prototype.addN=function(e){return ac("addN")},e.prototype.subtract=function(e,t){return ac("subtract")},e.prototype.multiply=function(e,t){return ac("multiply")},e.prototype.realDivide=function(e,t){return ac("realDivide")},e.prototype.floorDiv=function(e,t){return ac("floorDiv")},e.prototype.sum=function(e,t){return ac("sum")},e.prototype.prod=function(e,t){return ac("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return ac("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return ac("argMin")},e.prototype.argMax=function(e,t){return ac("argMax")},e.prototype.equal=function(e,t){return ac("equal")},e.prototype.notEqual=function(e,t){return ac("notEqual")},e.prototype.less=function(e,t){return ac("less")},e.prototype.lessEqual=function(e,t){return ac("lessEqual")},e.prototype.greater=function(e,t){return ac("greater")},e.prototype.greaterEqual=function(e,t){return ac("greaterEqual")},e.prototype.logicalNot=function(e){return ac("logicalNot")},e.prototype.logicalAnd=function(e,t){return ac("logicalAnd")},e.prototype.logicalOr=function(e,t){return ac("logicalOr")},e.prototype.where=function(e){return ac("where")},e.prototype.select=function(e,t,n){return ac("select")},e.prototype.topk=function(e,t,n){return ac("topk")},e.prototype.min=function(e,t){return ac("min")},e.prototype.minimum=function(e,t){return ac("minimum")},e.prototype.mod=function(e,t){return ac("mod")},e.prototype.max=function(e,t){return ac("max")},e.prototype.maximum=function(e,t){return ac("maximum")},e.prototype.all=function(e,t){return ac("all")},e.prototype.any=function(e,t){return ac("any")},e.prototype.squaredDifference=function(e,t){return ac("squaredDifference")},e.prototype.ceil=function(e){return ac("ceil")},e.prototype.floor=function(e){return ac("floor")},e.prototype.round=function(e){return ac("round")},e.prototype.sign=function(e){return ac("sign")},e.prototype.isNaN=function(e){return ac("isNaN")},e.prototype.isInf=function(e){return ac("isInf")},e.prototype.isFinite=function(e){return ac("isFinite")},e.prototype.pow=function(e,t){return ac("pow")},e.prototype.exp=function(e){return ac("exp")},e.prototype.expm1=function(e){return ac("expm1")},e.prototype.softmax=function(e,t){return ac("softmax")},e.prototype.log=function(e){return ac("log")},e.prototype.log1p=function(e){return ac("log1p")},e.prototype.sqrt=function(e){return ac("sqrt")},e.prototype.rsqrt=function(e){return ac("rsqrt")},e.prototype.square=function(e){return ac("square")},e.prototype.reciprocal=function(e){return ac("reciprocal")},e.prototype.relu=function(e){return ac("relu")},e.prototype.relu6=function(e){return ac("relu6")},e.prototype.prelu=function(e,t){return ac("prelu")},e.prototype.elu=function(e){return ac("elu")},e.prototype.eluDer=function(e,t){return ac("eluDer")},e.prototype.selu=function(e){return ac("selu")},e.prototype.int=function(e){return ac("int")},e.prototype.clip=function(e,t,n){return ac("clip")},e.prototype.abs=function(e){return ac("abs")},e.prototype.complexAbs=function(e){return ac("complexAbs")},e.prototype.sigmoid=function(e){return ac("sigmoid")},e.prototype.softplus=function(e){return ac("softplus")},e.prototype.sin=function(e){return ac("sin")},e.prototype.cos=function(e){return ac("cos")},e.prototype.tan=function(e){return ac("tan")},e.prototype.asin=function(e){return ac("asin")},e.prototype.acos=function(e){return ac("acos")},e.prototype.atan=function(e){return ac("atan")},e.prototype.atan2=function(e,t){return ac("atan2")},e.prototype.sinh=function(e){return ac("sinh")},e.prototype.cosh=function(e){return ac("cosh")},e.prototype.tanh=function(e){return ac("tanh")},e.prototype.asinh=function(e){return ac("asinh")},e.prototype.acosh=function(e){return ac("acosh")},e.prototype.atanh=function(e){return ac("atanh")},e.prototype.erf=function(e){return ac("erf")},e.prototype.step=function(e,t){return ac("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ac("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return ac("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return ac("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return ac("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ac("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return ac("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return ac("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return ac("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return ac("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return ac("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return ac("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return ac("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return ac("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return ac("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return ac("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return ac("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return ac("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return ac("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return ac("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return ac("reshape")},e.prototype.cast=function(e,t){return ac("cast")},e.prototype.tile=function(e,t){return ac("tile")},e.prototype.pad=function(e,t,n){return ac("pad")},e.prototype.transpose=function(e,t){return ac("transpose")},e.prototype.gather=function(e,t,n){return ac("gather")},e.prototype.gatherND=function(e,t){return ac("gatherND")},e.prototype.scatterND=function(e,t,n){return ac("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return ac("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return ac("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return ac("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return ac("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return ac("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return ac("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,i,a){return ac("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){return ac("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,i,a,o){return ac("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return ac("multinomial")},e.prototype.oneHot=function(e,t,n,r){return ac("oneHot")},e.prototype.cumsum=function(e,t,n,r){return ac("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return ac("nonMaxSuppression")},e.prototype.fft=function(e){return ac("fft")},e.prototype.ifft=function(e){return ac("ifft")},e.prototype.complex=function(e,t){return ac("complex")},e.prototype.real=function(e){return ac("real")},e.prototype.imag=function(e){return ac("imag")},e.prototype.cropAndResize=function(e,t,n,r,i,a){return ac("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return ac("depthToSpace")},e.prototype.split=function(e,t,n){return ac("split")},e.prototype.sparseToDense=function(e,t,n,r){return ac("sparseToDense")},e.prototype.diag=function(e){return ac("diag")},e.prototype.fill=function(e,t,n){return ac("fill")},e.prototype.onesLike=function(e){return ac("onesLike")},e.prototype.zerosLike=function(e){return ac("zerosLike")},e.prototype.linspace=function(e,t,n){return ac("linspace")},e.prototype.dispose=function(){return ac("dispose")},e}();function ac(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function oc(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var a=n-1-i,o=e[a]||1;(t[t.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function sc(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],a=t.length-r-1,o=t[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function lc(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var a=e[e.length-i-1];null==a&&(a=1);var o=t[t.length-i-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function uc(e,t,n,r,i,a,o){void 0===o&&(o="channelsLast");var s,l=pc(t),u=l[0],c=l[1];if("channelsLast"===o)s=[u,c,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[u,c,e[1],e[1]]}return dc(e,s,n,r,i,a,!1,o)}function cc(e,t,n,r,i,a,o){void 0===o&&(o="NDHWC");var s,l,u=mc(t),c=u[0],d=u[1],h=u[2];if("NDHWC"===o)l="channelsLast",s=[c,d,h,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);l="channelsFirst",s=[c,d,h,e[1],e[1]]}return hc(e,s,n,r,i,!1,l,a)}function dc(e,t,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],h=l[3];if("channelsLast"===s)u=e[0],c=e[1],d=e[2],h=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=e[0],h=e[1],c=e[2],d=e[3]}var f,p=t[0],m=t[1],g=t[3],v=pc(n),x=v[0],y=v[1],b=pc(r),w=b[0],k=b[1],_=gc(p,w),C=gc(m,k),S=function(e,t,n,r,i,a,o,s){var l,u,c;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,i){null==r&&(r=fc(e,t,n));var a=e[1],o=vc((e[0]-t+2*r)/n+1,i);Xa(eo(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var s=vc((a-t+2*r)/n+1,i);return Xa(eo(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[o,s]}([t,n],a,r,e,s);u=d[0],c=d[1]}else if("same"===e){u=Math.ceil(t/r),c=Math.ceil(n/i);var h=Math.max(0,(u-1)*r+a-t),f=Math.max(0,(c-1)*i+o-n),p=Math.floor(h/2),m=h-p,g=Math.floor(f/2);l={top:p,bottom:m,left:g,right:f-g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-a+1)/r),c=Math.ceil((n-o+1)/i)}return{padInfo:l,outHeight:u,outWidth:c}}(i,c,d,x,y,_,C,a),E=S.padInfo,N=S.outHeight,R=S.outWidth,T=o?g*h:g;return"channelsFirst"===s?f=[u,T,N,R]:"channelsLast"===s&&(f=[u,N,R,T]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:N,outWidth:R,outChannels:T,padInfo:E,strideHeight:x,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:C,dilationHeight:w,dilationWidth:k,inShape:e,outShape:f,filterShape:t}}function hc(e,t,n,r,i,a,o,s){void 0===a&&(a=!1),void 0===o&&(o="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],h=l[3],f=l[4];if("channelsLast"===o)u=e[0],c=e[1],d=e[2],h=e[3],f=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);u=e[0],f=e[1],c=e[2],d=e[3],h=e[4]}var p,m=t[0],g=t[1],v=t[2],x=t[4],y=mc(n),b=y[0],w=y[1],k=y[2],_=mc(r),C=_[0],S=_[1],E=_[2],N=gc(m,C),R=gc(g,S),T=gc(v,E),I=function(e,t,n,r,i,a,o,s,l,u,c){var d,h,f,p;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,i,a){null==i&&(i=fc(e,t,r));var o=e[1],s=e[2],l=vc((e[0]-t+2*i)/r+1,a);Xa(eo(l),(function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var u=vc((o-t+2*i)/r+1,a);Xa(eo(u),(function(){return"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=vc((s-t+2*i)/r+1,a);return Xa(eo(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[l,u,c,1]}([t,n,r,1],s,0,i,e,c);h=m[0],f=m[1],p=m[2]}else if("same"===e){var g=((h=Math.ceil(t/i))-1)*i+s-t,v=((f=Math.ceil(n/a))-1)*a+l-n,x=((p=Math.ceil(r/o))-1)*o+u-r,y=Math.floor(g/2),b=g-y,w=Math.floor(v/2),k=v-w,_=Math.floor(x/2);d={top:w,bottom:k,left:_,right:x-_,front:y,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/i),f=Math.ceil((n-l+1)/a),p=Math.ceil((r-u+1)/o)}return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}(i,c,d,h,b,w,k,N,R,T,s),D=I.padInfo,A=I.outDepth,P=I.outHeight,M=I.outWidth,O=a?x*f:x;return"channelsFirst"===o?p=[u,O,A,P,M]:"channelsLast"===o&&(p=[u,A,P,M,O]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:d,inWidth:h,inChannels:f,outDepth:A,outHeight:P,outWidth:M,outChannels:O,padInfo:D,strideDepth:b,strideHeight:w,strideWidth:k,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:N,effectiveFilterHeight:R,effectiveFilterWidth:T,dilationDepth:C,dilationHeight:S,dilationWidth:E,inShape:e,outShape:p,filterShape:t}}function fc(e,t,n,r){void 0===r&&(r=1);var i=gc(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function pc(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function mc(e){return"number"==typeof e?[e,e,e]:e}function gc(e,t){return t<=1?e:e+(e-1)*(t-1)}function vc(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function xc(e){var t=pc(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function yc(e,t){return xc(e)||xc(t)}function bc(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function wc(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Wl(e.shape),i=e.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!fo(e.dtype,t))return os.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return a=o.cast(t),o.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var s=Ol(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function kc(e,t){return os.makeTensorFromDataId(e.dataId,t,e.dtype)}function _c(e,t,n){var r=(t-e)/(n-1),i=No(n,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Fl(i,"float32")}Object.freeze({castTensor:wc,reshapeTensor:kc,linspaceImpl:_c,upcastType:Jo,axesAreInnerMostDims:yl,combineLocations:bl,computeOutAndReduceShapes:wl,expandShapeToKeepDim:kl,assertAxesAreInnerMostDims:_l,getAxesPermutation:Cl,getUndoAxesPermutation:Sl,getInnerMostAxes:El,getBroadcastDims:oc,getReductionAxes:sc,assertAndGetBroadcastShape:lc,assertParamsConsistent:Nl,computeOutShape:Rl,computePool2DInfo:uc,computePool3DInfo:cc,computeConv2DInfo:dc,computeConv3DInfo:hc,computeDefaultPad:fc,tupleValuesAreOne:xc,eitherStridesOrDilationsAreOne:yc,convertConv2DDataFormat:bc,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Uu});function Cc(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Sc(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Ec(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Nc(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Rc(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,i=e.length,a=0,o=!1;r<i;){var s=n(t,e[a=r+(i-r>>>1)]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}(e,t,n||Tc)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function Tc(e,t){return e>t?1:e<t?-1:0}function Ic(e,t,n,r,i){return Ac(e,t,n,r,i,0).selectedIndices}function Dc(e,t,n,r,i,a){var o=Ac(e,t,n,r,i,a,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Ac(e,t,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var l=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>i})).sort(Oc),u=a>0?-.5/a:0,c=[],d=[];c.length<n&&l.length>0;){var h=l.pop(),f=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(f<i)break;for(var g=!1,v=c.length-1;v>=m;--v){var x=Pc(e,p,c[v]);if(x>=r){g=!0;break}if(h.score=h.score*Mc(r,u,x),h.score<=i)break}h.suppressBeginIndex=c.length,g||(h.score===f?(c.push(p),d.push(h.score)):h.score>i&&Rc(l,h,Oc))}var y=c.length;return s&&(c.fill(0,y),d.fill(0,y)),{selectedIndices:Fl(c,"int32"),selectedScores:Fl(d,"float32"),numValidOutputs:Ol(y,"int32")}}function Pc(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(s-a)*(l-o),p=(d-u)*(h-c);if(f<=0||p<=0)return 0;var m=Math.max(a,u),g=Math.max(o,c),v=Math.min(s,d),x=Math.min(l,h),y=Math.max(v-m,0)*Math.max(x-g,0);return y/(f+p-y)}function Mc(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Oc(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Fc(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice();return t.map((function(t){i[n]=t;var a=e.slice(r,i);return r[n]+=t,a}))}function jc(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var i=cu(n,e.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=a[s]%e.shape[s];var l=e.locToIndex(o);i.values[r]=e.values[l]}return i.toTensor()}function Lc(e,t,n,r,i){for(var a=t[t.length-1],o=[e.length/a,a],s=o[0],l=o[1],u=lo(n,s*r),c=lo("int32",s*r),d=0;d<s;d++){for(var h=d*l,f=e.subarray(h,h+l),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((function(e,t){return t.value-e.value}));var g=d*r,v=u.subarray(g,g+r),x=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,x[m]=p[m].index}var y=t.slice();return y[y.length-1]=r,[Pl(u,y,n),Pl(c,y,"int32")]}function Bc(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var i=cu(e,"int32"),a=cu([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*e.length;a.values.set(o,s)}return a.toTensor()}var zc=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Wc=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Vc=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,a=e.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===t?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+l+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Uc(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Hc(e,t){return 1===t?[e]:Uc(e,t)}function Gc(){var e,t,n,r,i,a,o,s,l,u;return 2===Oa().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function qc(e,t,n){void 0===n&&(n="index");var r=_o(t);return r.map((function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"})).join("")}function Kc(e){var t=_o(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Xc="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Yc(e,t,n,r){var i=[];e.forEach((function(e){var t=Ja(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))}));var a,o,s=i.join("\n"),l=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Qc(e):$c(e);var i=e.shapeInfo.logicalShape,a=t.logicalShape;return i.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),a="get"+i+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,l=oc(e.shapeInfo.logicalShape,t.logicalShape),u=id(s),c=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var h;h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var f="return outputValue;",p=1===Ja(e.shapeInfo.logicalShape),m=1===Ja(t.logicalShape);if(1!==o||p||m){if(p&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var g=o-2,v=o-1;l.indexOf(g)>-1&&l.indexOf(v)>-1?f="return vec4(outputValue.x);":l.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+u+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+h+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&Za(o,a))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var u,c=id(l),d=oc(e.shapeInfo.logicalShape,t.logicalShape),h=l-s,f=["x","y","z","w","u","v"];u=0===s?"":l<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+f[e+h]+" = 0;"})).join("\n");var p;return p=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+h]})).join(", "),"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+u+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),u=t.texShape,c=Gc(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),h=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Jc+"\n    "+Zc+"\n    "+ed+"\n  "}(c);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Za(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),a=i,o="",s="b, r, c",l=2;l<e.length-1;l++)o="\n      int b"+l+" = index / "+(a*=e[e.length-l-1])+";\n      index -= b"+l+" * "+a+";\n    "+o,s="b"+l+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,a,o}(t.logicalShape,u),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return Za(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=qc(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=qc(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=qc(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=qc(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,u),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(h+=td),[h,d,o,s,a,l,n].join("\n")}function $c(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===i&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+nd(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+rd(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===a&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=nd(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+a+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Za(t,i)){var a=i[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=so(t),s=o.newShape,l=o.keptDims,u=s;if(u.length<t.length)return"\n      "+$c(ad(e,u))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+od(["row","col"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+rd(e)+"\n      }\n    ";var c=i[0],d=i[1],h=nd(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[1]*t[2],a=t[2],o=so(t),s=o.newShape,l=o.keptDims,u=s;if(u.length<t.length)return"\n        "+$c(ad(e,u))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+od(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+a+", 1)));\n        "+rd(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],h=c[1],f=e.shapeInfo.flatOffset;return h===i&&null==f?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===a&&null==f?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+a+" + depth + "+nd(n)+";\n        vec2 uv = uvFromFlat("+d+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[3],a=t[2]*i,o=t[1]*a,s=so(t),l=s.newShape,u=s.keptDims;if(l.length<t.length)return"\n      "+$c(ad(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+od(["row","col","depth","depth2"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+a+", "+i+", 1)));\n        "+rd(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];return f===o&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+a+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+f+", index + "+nd(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],a=t[3]*i,o=t[2]*a,s=t[1]*o,l=so(t),u=l.newShape,c=l.keptDims;if(u.length<t.length)return"\n      "+$c(ad(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+od(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+a+", "+i+")) +\n          depth3;\n        "+rd(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],p=h[1];return p===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===i&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+a+" +\n          depth2 * "+i+" + depth3 + "+nd(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=so(t),a=i.newShape,o=i.keptDims;if(a.length<t.length)return"\n      "+$c(ad(e,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+od(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var s=t[5],l=t[4]*s,u=t[3]*l,c=t[2]*u,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+u+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+rd(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],m=f[1];return m===d&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+u+", "+l+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+u+" +\n          depth2 * "+l+" + depth3 * "+s+" + depth4 + "+nd(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Qc(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Gc().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Gc();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=i[0],o=i[1],s=Gc();if(null!=i&&Za(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0])return"\n        "+Qc(ad(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+od(["b","row","col"],[1,2])+");\n        }\n      ";var o=a[0],s=a[1],l=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+s+", "+l*Math.ceil(t[1]/2)+", "+l+", b, row, col);\n      return "+Gc().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=o[0],l=o[1],u=Math.ceil(t[n-1]/2),c=u*Math.ceil(t[n-2]/2),d="int b, int row, int col",h="b * "+c+" + (row / 2) * "+u+" + (col / 2)",f=2;f<n-1;f++)d="int b"+f+", "+d,h="b"+f+" * "+(c*=t[n-f-1])+" + "+h;return"\n    vec4 "+i+"("+d+") {\n      int index = "+h+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+s+");\n      return "+Gc().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var Jc="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zc="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ed="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",td="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function nd(e){return"offset"+e}function rd(e){var t=e.name,n=Ja(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function id(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function ad(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function od(e,t){return t.map((function(t){return e[t]})).join(", ")}var sd=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Xa(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,l=this.outputShape,u=l.length,c=id(u),d=Hc("coords",u);if(1===a){var h=id(s=u+1);o="\n        "+h+" sourceLocR = "+h+"("+d.join()+", 0);\n        ++"+d[u-1]+";\n        "+h+" sourceLocG = "+h+"("+d.join()+", 0);\n        ++"+d[u-2]+";\n        "+h+" sourceLocA = "+h+"("+d.join()+", 0);\n        --"+d[u-1]+";\n        "+h+" sourceLocB = "+h+"("+d.join()+", 0);\n        --"+d[u-2]+";"}else s=u,o="\n        "+c+" sourceLocR = coords;\n        ++"+d[u-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[u-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[u-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[u-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map((function(e){return"int "+e})),g=Hc("sourceLocR",s-1).concat("inIdx.r"),v=Hc("sourceLocG",s-1).concat("inIdx.g"),x=Hc("sourceLocB",s-1).concat("inIdx.b"),y=Hc("sourceLocA",s-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+x.join()+"),\n                             getBestIndicesAChannel("+y.join()+")));",k="vec4(\n            getAChannel("+g.join()+"),\n            hasNextCol ? getAChannel("+v.join()+") : 0.,\n            hasNextRow ? getAChannel("+x.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+y.join()+") : 0.)",_=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+_+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[u-1]+" < "+(l[u-1]-1)+";\n        bool hasNextRow = "+d[u-2]+" < "+(l[u-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+k+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+k+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},ld=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+u+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+l+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ud=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=c-1-e.padInfo.front,p=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float avgMultiplier = float("+g+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+l+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+u+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},cd=function(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],lc(e,t),lc(e,n);var o="0.0";null!=r&&(lc(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=i&&(lc(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},dd=function(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lc(e,t),lc(e,n);var o="vec4(0.0)";null!=r&&(lc(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(lc(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},hd=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lc(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},fd="return a + b;",pd="return a - b;",md="return a * b;",gd="return (a < 0.) ? b * a : a;",vd=function(e,t,n){this.variableNames=["A","B"],this.outputShape=lc(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},xd="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",yd=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lc(t,n);var i=this.outputShape.length,a="";if(r)if(0===i||1===Ja(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+id(i)+" coords = getOutputCoords();\n        ",1===i)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=Hc("coords",i);a+="\n            bool nextRowOutOfBounds =\n              ("+o[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+o[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},bd=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),wd=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),kd=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},_d=function(e){this.outputShape=[],this.outputShape=Rl(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var i=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=t.length,o=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Cd=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Rl(e,t);var n=this.outputShape,r=n.length,i=id(r),a=Hc("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var u=o[t],c=o.slice(-2),d=o.join(),h="if ("+u+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(l=1;l<s.length;l++){var f=s[l-1];h+="\n        if ("+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+") {\n          return getChannel(\n            getT"+l+"("+Sd(o,u,f)+"),\n            vec2("+Sd(c,u,f)+"));\n        }"}var p=s.length,m=s[s.length-1];h+="\n        return getChannel(\n          getT"+p+"("+Sd(o,u,m)+"),\n          vec2("+Sd(c,u,m)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+h+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function Sd(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var Ed=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Nd=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=a?1:2,u=a?2:3,c=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+l+"], coords["+u+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rd=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Td=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+l+", "+u+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Id=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Dd=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ad=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,g=p?2:3,v=p?3:1,x="",y="";n&&(x=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",y="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+y+"\n        setOutput(result);\n      }\n    "},Pd=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+u+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Md=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=e.outChannels/e.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+g+"\n        setOutput(result);\n      }\n    "},Od=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=f,m="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var v=0;v<f;v++)m+="\n          vec4 xTexelR"+g+"C"+2*v+" = vec4(0.);\n          vec4 wR"+g+"C"+v+" = vec4(0.);\n          vec4 xR"+g+"C"+v+" = vec4(0.);";for(g=0;g<h;g++)for(var x=0;x<p;x++){if(m+="\n          xR = xRCorner + "+g*c+";\n          xC = xCCorner + "+(v=2*x)*d+";\n        ",1===u){if(v<f&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+g+"C"+v+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+".xy);\n                } else {\n                  xR"+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = xTexelR"+g+"C"+v+";\n              ",v+1<f)){var y=s%2==0?qa(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+y+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+v+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+y+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+";\n                "}}else v<f&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+u+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n              ",v+1<f&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+u+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+u+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+".xy);\n              ",v+1<f&&(m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n                ")),m+="}");v<f&&(m+="\n            vec4 wTexelR"+g+"C"+v+" = getW("+g+", "+v+", d1, q);\n            wR"+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+".xz);\n          ",v+1<f&&(m+="\n              vec4 wTexelR"+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+", d1, q);\n              wR"+g+"C"+(v+1)+" =\n                vec4(wTexelR"+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<h;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",w="";n&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+k+"\n        "+w+"\n        setOutput(result);\n      }\n    "},Fd=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],o=e[1],s=e[2],l=e[3],u=t[0],c=n[0],d=n[1];this.outputShape=[u,c,d,l];var h="bilinear"===r?1:0,f=[o-1+".0",s-1+".0"],p=f[0],m=f[1],g=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],x=g[1],y=g[2],b=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],k=b[1],_=b[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+x+";\n        float width_scale = "+k+";\n\n        float in_y = "+y+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},jd=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+id(r)+" coords = getOutputCoords();\n        int end = "+Ld(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Ld(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Ld(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Bd=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=us.DENSE;var t=vs(e),n=Gc();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+qc(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},zd=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=us.DENSE;var t=vs(e),n=Gc();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+qc(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Wd=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Vd=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Ud=function(e){this.variableNames=["A"],this.outTexUsage=cs.DOWNLOAD;var t=Gc();this.outputShape=e,this.userCode="\n      "+Xc+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Hd=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=cs.DOWNLOAD;var t=Gc();this.outputShape=e,this.userCode="\n      "+Xc+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Gd=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Gc(),i=t[0],a=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Kc(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},qd=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Gc(),i=t[0],a=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+u+" < "+e[2]+") {\n            localCoords[2] += "+u+";\n            if(localCoords[1] + "+l+" < "+e[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Kc(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Kd=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Xd=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Yd=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var i=id(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=0;a<e.length;a++)a===t?i.push("int(getIndices("+r[a]+"))"):i.push(""+r[a]);return i.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},$d=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=id(t.length),i=id(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Qd(e,t){var n=Gc();return Cs(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Jd(e,t){return As(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Zd(e,t){return Ps(e,t,new Uint16Array([0,1,2,2,1,3]))}function eh(e,t,n,r,i,a,o){Os(n,r);var s=Ms(e,t),l=e.TEXTURE_2D;return bs(e,t,(function(){return e.bindTexture(l,s)})),bs(e,t,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),bs(e,t,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),bs(e,t,(function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)})),bs(e,t,(function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)})),bs(e,t,(function(){return e.texImage2D(l,0,i,n,r,0,a,o,null)})),bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function th(e,t,n,r,i){var a=gs(n,r);return eh(e,t,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function nh(e,t,n,r,i){var a=gs(n,r);return eh(e,t,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function rh(e,t,n,r,i){var a=gs(n,r);return eh(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function ih(e,t,n,r,i){var a=xs(n,r);return eh(e,t,a[0],a[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function ah(e,t,n,r,i){var a=xs(n,r);return eh(e,t,a[0],a[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function oh(e,t,n,r){return bs(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),js(e,t,n,"clipSpacePos",r,3,20,0)&&js(e,t,n,"uv",r,2,20,12)}function sh(e,t,n,r,i,a,o){var s,l,u;bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),l=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(r*i*4),l=e.FLOAT,u=o.internalFormatPackedFloat),s.set(a),bs(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,r,i,0,e.RGBA,l,s)})),bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function lh(e,t,n,r){bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?bs(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):bs(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),bs(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function uh(e,t,n,r,i){var a=e.createBuffer();bs(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*n*r;return bs(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),bs(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),bs(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function ch(e,t,n){var r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function dh(e,t,n,r,i){var a=gs(n,r),o=a[0],s=a[1],l=new Uint8Array(n*r*4);return bs(e,t,(function(){return e.readPixels(0,0,o,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,l)})),new Float32Array(l.buffer)}function hh(e,t,n,r,i,a,o,s){var l=e,u=new Float32Array(function(e,t){var n=xs(e,t);return n[0]*n[1]*4}(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function fh(e,t,n,r){var i=new Float32Array(n*r*4);return bs(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)})),i}var ph=Object.freeze({createVertexShader:Qd,createVertexBuffer:Jd,createIndexBuffer:Zd,createFloat32MatrixTexture:th,createFloat16MatrixTexture:nh,createUnsignedBytesMatrixTexture:rh,createPackedMatrixTexture:ih,createFloat16PackedMatrixTexture:ah,bindVertexProgramAttributeStreams:oh,uploadDenseMatrixToTexture:sh,uploadPixelDataToTexture:lh,createBufferFromOutputTexture:uh,downloadFloat32MatrixFromBuffer:ch,downloadByteEncodedFloatMatrixFromOutputTexture:dh,downloadPackedMatrixFromBuffer:hh,downloadMatrixFromPackedOutputTexture:fh}),mh=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Oa().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,ps(t,e)):this.gl=ms(t);var n="WEBGL_color_buffer_float";if(1===Oa().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=_s(this.gl,this.debug,"OES_texture_float"),rl(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=_s(this.gl,this.debug,"OES_texture_half_float");else if(Oa().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),rl(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=_s(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Oa().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",rl(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!rl(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Jd(this.gl,this.debug),this.indexBuffer=Zd(this.gl,this.debug),this.framebuffer=Fs(this.gl,this.debug),this.textureConfig=ys(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Oa().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;bs(t,this.debug,(function(){return t.finish()})),bs(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),bs(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),bs(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),bs(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),bs(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),th(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),nh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),rh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),lh(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),sh(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),ah(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),ih(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Us(this.gl,this.debug,this.framebuffer),this.outputTexture=null),bs(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return dh(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,a){return hh(this.gl,e,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return ch(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=uh(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Oa().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(a,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=a}else Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return fh(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Ss(t,this.debug,e),r=Qd(t,this.debug),i=Ts(t,this.debug);return bs(t,this.debug,(function(){return t.attachShader(i,r)})),bs(t,this.debug,(function(){return t.attachShader(i,n)})),Is(t,this.debug,i),this.debug&&Ds(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=oh(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&bs(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Ds(this.gl,this.debug,this.program),bs(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Bs(this.gl,this.debug,e,t):zs(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),bs(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Ws(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=xs(t,n),i=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,i,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Ds(this.gl,this.debug,this.program),Hs(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),bs(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),bs(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=_s(this.gl,this.debug,2===Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Aa(this,void 0,void 0,(function(){var t=this;return Pa(this,(function(n){switch(n.label){case 0:return[4,io((function(){return t.disposed||t.isQueryAvailable(e,Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||io((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Vs(this.gl,this.debug,e,this.framebuffer),this.debug&&Hs(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Vs(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Hs(this.gl)):Us(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Vs(r,this.debug,e,this.framebuffer),this.debug&&Hs(r),this.outputTexture=e,bs(r,this.debug,(function(){return r.viewport(0,0,t,n)})),bs(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),bs(this.gl,this.debug,(function(){return i.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function gh(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,i=t[n],a=i.shape;if(!Za(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!i.isUniform){var o=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!Za(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var vh=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,s=n.padInfo,l=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=s.left,f=s.top,p=i*r,m=Gc(),g="channelsLast"===d,v=g?0:1,x=g?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+l+")) * "+o+" - "+f+";\n            d0 = offsetY + "+c+" * (pos / "+p+");\n\n            if(d0 < "+t[v]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+l+".) * "+a+". - "+h+".);\n              d1 = offsetX + "+u+" * (int(mod(float(pos), "+p+".) / "+i+".));\n\n              if(d1 < "+t[x]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+g+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+m.output+" = result;\n      }\n    "},xh=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},yh=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},bh=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},wh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,s=a-1-e.padInfo.left,l=i*a-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+l+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},kh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=l-1-e.padInfo.top,h=u-1-e.padInfo.left,f=s*l*u-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+u+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+l+" * "+u+" +\n                  wR * "+u+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_h=function(e,t,n,r,i,a,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";a&&(f=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+l+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+l+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+h[0]+");\n          result += ("+d[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},Ch=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Sh=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Eh=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Hc("rc",t),r=id(t),i=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var a=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),o=2;o<e;o++)a=t[t.length-1-o]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},Nh=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,i=id(r),a=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Rh=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,i=id(r),a=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Hc("rc",r),l=Hc("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+l.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+u+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+u+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=1===r?2:4;p<m;p++)f+="\n        "+d[p]+"\n        if ("+h+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+l.join()+"), "+c+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+a+");\n      const "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},Th=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,f="0.0";if(h||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+a+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+u+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+u+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+a+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Ih=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===t,v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+a+", "+o+");\n        const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+u+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var y=4*Math.floor(r/4),b=r%4,w="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+y+"; wC += 4) {\n              int xC = xCCorner + wC * "+u+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+u+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+u+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+y+";\n            if ("+(1===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+u+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},Dh=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");var u=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(o="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(o="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+l+");\n      }\n    "},Ah=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+qc(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Kc(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ph=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,s=o[1],l=o[2],u=[n&&s>1?i-1:i,n&&l>1?a-1:a],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],h=u[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Mh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Oh=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+",\n          "+l[1]/u[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Fh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,s=o[1],l=o[2],u=[n&&s>1?i-1:i,n&&l>1?a-1:a],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],h=u[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+u[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+u[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},jh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?a-1:a,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Lh=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),i=id(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Bh=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Hc("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=id(n);function s(n){var r=e.map((function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},zh=function(e,t,n,r,i,a,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=id(i.length),l=id(a.length),u="";1===n?u="i":2===n&&(u="i, j");var c="getIndices("+u+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var h="getUpdates("+d+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Wh=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var d="";i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+u+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+u+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+u+"\n        }\n        setOutput(sumValue);\n      }\n    "},Vh=function(e,t,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],l=0;l<t.length;l++)s.push(""+a[l]),l<e&&o.push(""+a[l]);r=o.join(),i=s.join()}var u=id(n);this.userCode="\n      void main() {\n        "+u+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Uh=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=id(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc";if(e<=6)return Hh.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Hh[t]+" = start["+t+"] + coords."+Hh[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Hh=["x","y","z","w","u","v"],Gh=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=id(this.rank),n=Hc("coords",this.rank),r=Hc("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+i+")",o="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+l+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),qh=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=id(n.length),a=id(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},Kh=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=Xh(t,n),a=Yh(e,i,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[a].shift();return this.usedTextures[a].push(o),o}return this.numUsedTextures++,this.log(),i===ds.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===ds.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===ds.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===ds.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===ds.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=Yh(t,Xh(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],o=a.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Xh(e,t){if(e===cs.UPLOAD)return ds.PACKED_2X2_FLOAT32;if(e===cs.RENDER||null==e)return function(e){return Oa().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ds.PACKED_2X2_FLOAT32:ds.UNPACKED_FLOAT32:e?ds.PACKED_2X2_FLOAT16:ds.UNPACKED_FLOAT16}(t);if(e===cs.DOWNLOAD||e===cs.PIXELS)return ds.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Yh(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var $h=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var i=id(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},Qh=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var i=id(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},Jh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=id(this.rank),a=Uc("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",l="++"+a[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+u+";\n      if("+l+") {\n        result[1] = "+u+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+u+";\n        if("+l+") {\n          result[3] = "+u+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Zh=1.7580993408473768,ef=1.0507009873554805,tf=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},nf="if (isnan(x)) return x;",rf="return abs(x);",af=nf+"\n  return (x < 0.0) ? 0.0 : x;\n",of=nf+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",sf="return (x >= 0.0) ? x : (exp(x) - 1.0);",lf="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Zh+";\n  float scale = "+ef+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",uf="return -x;",cf="return ceil(x);",df="return floor(x);",hf="return exp(x);",ff="return exp(x) - 1.0;",pf=nf+"\n  return sin(x);\n",mf=nf+"\n  return cos(x);\n",gf=nf+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",vf=nf+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",xf=nf+"\n  return atan(x);\n",yf=nf+"return log(x + sqrt(x * x + 1.0));",bf=nf+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",wf=nf+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",kf="return x;",_f="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Cf="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Sf="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Ef=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Nf=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Hc("rc",t),r=id(t),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),o=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},Rf={};function Tf(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?_f:af;if("elu"===e)return t?Sf:sf;if("relu6"===e)return t?Cf:of;if("prelu"===e)return t?xd:gd;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var If=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Oa().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var i=ms(Oa().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Oa().getNumber("WEBGL_VERSION"))in Rf||(Rf[n]={}),Rf[n]),r.gpgpu=new mh(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Kh(r.gpgpu),r.numMBBeforeWarning=null==Oa().global.screen?1024:Oa().global.screen.height*Oa().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new rc(r,os),r}return Da(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Oa().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:cs.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Oa().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:cs.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,a=t.slice,o=t.shape,s=t.isPacked;if(null!=a){var l;l=s?new Ef(o,kf):new tf(o,kf);var u=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(u.dataId);return this.disposeData(u.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,f=null!=this.activeTimers;return f&&(d=Ro()),h="complex64"===r?Cc(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=Ro()-d),this.convertAndCacheOnCPU(e,h)},t.prototype.read=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w,k;return Pa(this,(function(_){switch(_.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,i=n.shape,a=n.slice,o=n.dtype,s=n.complexTensors,l=n.isPacked,null!=a)return void 0,u=l?new Ef(i,kf):new tf(i,kf),c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:o}],o),d=this.read(c.dataId),this.disposeData(c.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Oa().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Oa().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==o&&Oa().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(e),p=this.texData.get(f.dataId),h=(k=this.gpgpu).createBufferFromTexture.apply(k,[p.texture].concat(vs(i)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:_.sent(),_.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return g=_.sent(),v=g[0],x=g[1],m=Cc(v,x),[3,5];case 4:null==h?m=this.getValuesFromTexture(e):(y=Ja(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,y)),_.label=5;case 5:return null!=f&&this.disposeData(f.dataId),b=this.convertAndCacheOnCPU(e,m),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(b)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,b]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!ws(n)){if(Oa().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.isPacked,o=Ja(r);if(Oa().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),l=this.texData.get(s.dataId),u=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(vs(r))).subarray(0,o);return this.disposeData(s.dataId),u}var c=Oa().getBool("WEBGL_PACK")&&!0===a,d=c?$s(r):r,h=c?new Hd(d):new Ud(d),f=this.runWebGLProgram(h,[{shape:d,dtype:i,dataId:e}],"float32"),p=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),m},t.prototype.time=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r,i,a,o,s;return Pa(this,(function(l){switch(l.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=Qa(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),a=Qa(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return s=l.sent(),o.kernelMs=Ka(s),o.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:a[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ro(),endMs:null}},t.prototype.endTimer=function(e){return Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ro(),e)},t.prototype.getQueryTime=function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){return Oa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,a=t.usage,o=t.isPacked,s=t.slice,l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Oa().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=os.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:os.keep(e.clone()),imag:os.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Ja(n))return Pl([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,i=Ju(e.shape,t,n);if(r||!i){var a=Oa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gh(n):new Uh(n),o=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=this.makeOutput(n,e.dtype),a=this.texData.get(i.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var o=Zu(t,e.strides);r.slice&&(o+=r.slice.flatOffset),a.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),i},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var i=Yu(t,n,r);if(i.some((function(e){return 0===e})))return Pl([],i);var a=new qh(t,r,i);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=Oa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bh(e.shape,t):new Lh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Dl(e)})),r=e.map((function(e){return Al(e)}));return Il(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Oa().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),a=this.concat(e.slice(0,i),t),o=this.concat(e.slice(i),t);return this.concat([a,o],t)}if(Oa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new Cd(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var l=Rl(e.map((function(e){return e.shape})),t),u=e.map((function(e){return e.as2D(-1,Ja(e.shape.slice(t)))})),c=new _d(u.map((function(e){return e.shape})));return this.compileAndRun(c,u).reshape(l)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,uf,e.dtype);var t=new tf(e.shape,uf);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===i||1===a)&&o>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var l=1===a?e:e.as3D(s,o,1),u=1===a?2:1,c=1===a?t.as3D(s,1,o):t;return this.multiply(l,c).sum(u,!0)}var d=Jo(e.dtype,t.dtype),h=new _h(e.shape,[s,i,a],n,r);return this.compileAndRun(h,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=r?t.shape[2]:t.shape[1],u=i?n.shape[1]:n.shape[2],c=t.shape[0],d=Jo(t.dtype,n.dtype),h=null!=a,f=null!=s,p=o?Tf(o,!0):null,m=new _h(t.shape,[c,l,u],r,i,h,p,f),g=[t,n];return a&&g.push(a),s&&g.push(s),this.compileAndRun(m,g,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new hd("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new hd("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(i,o),l=this.compileAndRun(a,o),u=this.complex(s,l);return s.dispose(),l.dispose(),u}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,md,e.dtype);var c=new vd(md,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){var o=[e,t,n],s=null;null!=a&&(s=a.shape,o.push(a));var l=null;if(null!=i&&(l=i.shape,o.push(i)),Oa().getBool("WEBGL_PACK_NORMALIZATION")){var u=new dd(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(u,o)}var c=new cd(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(c,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){var a=Oa().getBool("WEBGL_PACK_NORMALIZATION")?new bh(e.shape,t,n,r,i):new xh(e.shape,t,n,r,i);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){var s=new yh(t.shape,r,i,a,o);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return Do(e)}));return jc(cu(e.shape,e.dtype,n),t)}var r=new $h(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Oa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Rh(e.shape,t,n):new Nh(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Oa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jh(e.shape,t):new Qh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Yd(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){Xa(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=ju(e.shape,t,r),a=Lu(i.length,t.length),o=Bu(e.shape,t,r),s=zu(n,t.length),l=Wu(o,n,t.length);return e.reshape(i).transpose(a).reshape(o).slice(s,l)},t.prototype.spaceToBatchND=function(e,t,n){Xa(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),s=ju(o.shape,t,r,!1),l=Lu(s.length,t.length,!1),u=Bu(o.shape,t,r,!1);return o.reshape(s).transpose(l).reshape(u)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],a=Uu(i),o=new Dh({windowSize:a,inSize:i,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],i=e.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var a=Uu(i),o=new Vc({windowSize:a,inSize:i,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var l=this.compileAndRun(o,s,"int32");return 1===l.shape[1]?l:this.argReduce(e,t,l)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,i=Uu(r[r.length-1]),a=new sd(r,i,t,null==n),o=null==n?[e]:[e,n],s=this.compileAndRun(a,o,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){_l("sum",t,e.rank);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i),o=Zo(e.dtype);return this.reduce(a,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i),o=Zo(e.dtype);return this.reduce(a,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=Cl([r],e.rank),a=e;null!=i&&(a=e.transpose(i),r=El(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],i=e.length,a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),s=Ja([a.shape[r]]),l=a.as2D(-1,s),u=Zo(e.dtype),c=this.segOpCompute(l,"unsortedSegmentSum",t,u,n).reshape(o);return null!=i&&(c=c.transpose(Sl(i))),c},t.prototype.segOpCompute=function(e,t,n,r,i){var a=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=ko(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ko(e,n+1);return n}(o,i),l=new Wh({windowSize:s,inSize:o,batchSize:a,numSegments:i},t),u=this.compileAndRun(l,[e,n],r);return u.shape[1]===i?u:(n=Ul(0,i).tile([o/s]),this.segOpCompute(u,t,n,r,i))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(_l("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Oa().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=wl(e.shape,r),a=i[0],o=Ja(i[1]),s=e.as2D(-1,o);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var i=new jd(e.shape,n,r);return this.compileAndRun(i,[e])},t.prototype.equal=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new vd("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new vd("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new vd("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new vd("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new vd("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new vd("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new tf(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new vd("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new vd("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Vh(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Jo(t.dtype,n.dtype))},t.prototype.where=function(e){pl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Bc(e.shape,t)},t.prototype.topk=function(e,t,n){return Lc(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){_l("min",t,e.rank);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vd("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);_l("max",t,e.rank);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){_l("all",t,e.rank);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){_l("any",t,e.rank);var n=wl(e.shape,t),r=n[0],i=Ja(n[1]),a=e.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new vd("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new vd("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,fd);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Jo(e.dtype,t.dtype);if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,fd,n);var r=new vd(fd,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new Ef(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1);var a=new yd(n,e.shape,t.shape,i);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),a=this.texData.get(t.dataId),o=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map((function(i){var a=i[0],o=i[1],s=r.makeComplexComponentTensorInfo(e,a),l=r.makeComplexComponentTensorInfo(t,o),u=new vd(n,e.shape,t.shape);return r.compileAndRun(u,[s,l],Jo(a.dtype,o.dtype))})),s=o[0],l=o[1],u=this.complex(s,l);return s.dispose(),l.dispose(),u},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Oa().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var i=e.map((function(e){return e.dtype})).reduce((function(e,t){return Jo(e,t)})),a=e.map((function(e){return e.shape})),o=Oa().getBool("WEBGL_PACK")?new Wc(e[0].shape,a):new zc(e[0].shape,a);return this.compileAndRun(o,e,i)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,pd);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Jo(e.dtype,t.dtype);if(Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,pd,e.dtype);var r=new vd(pd,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vd("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Jo(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cf,e.dtype);var t=new tf(e.shape,cf);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,df,e.dtype);var t=new tf(e.shape,df);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new tf(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new tf(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new tf(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new tf(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new tf(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hf,e.dtype);var t=new tf(e.shape,hf);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ff,e.dtype);var t=new tf(e.shape,ff);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=oo([t],e.shape),r=this.max(e,n),i=kl(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return this.realDivide(o,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new tf(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new tf(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new tf(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new tf(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new tf(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Oa().getBool("WEBGL_PACK")?new Ef(e.shape,_f):new tf(e.shape,af),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Oa().getBool("WEBGL_PACK")?new Ef(e.shape,Cf):new tf(e.shape,of),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd(xd,e.shape,t.shape):new vd(gd,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Sf,e.dtype);var t=new tf(e.shape,sf);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new vd("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new tf(e.shape,lf);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new tf(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,i=(r=Oa().getBool("WEBGL_PACK_CLIP")?new wd(e.shape):new bd(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,i)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Oa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rf,e.dtype);var t=new tf(e.shape,rf);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new kd(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new tf(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new tf(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new tf(e.shape,pf);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new tf(e.shape,mf);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new tf(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new tf(e.shape,gf);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new tf(e.shape,vf);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new tf(e.shape,xf);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new vd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new tf(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new tf(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new tf(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new tf(e.shape,yf);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new tf(e.shape,bf);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new tf(e.shape,wf);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new tf(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new tf(e.shape,function(e){return void 0===e&&(e=0),nf+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,i,a){var o=e.shape,s=this.texData.get(e.dataId),l=n.inChannels,u=o[0]*o[1]*o[2],c=n.outChannels,d="channelsLast"===n.dataFormat,h=(1===u||1===c)&&l>1e3,f=o[2]%2!=0&&!!s.isPacked;if(h||!Oa().getBool("WEBGL_LAZILY_UNPACK")||!Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var p=d?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],m=this.reshape(e,[1,p,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),n.outShape)}var v=d?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),x={dataId:e.dataId,shape:[1,v,n.inChannels],dtype:e.dtype},y=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,Xa(Zs(s.shape,x.shape),(function(){return"packed reshape "+s.shape+" to "+x.shape+" isn't free"}));var b=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:x,b:b,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),k=this.texData.get(w.dataId);return Xa(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=y,k.shape=n.outShape,os.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,i,a){var o=n.filterWidth,s=n.filterHeight,l=n.inChannels,u=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,h=o*s*l,f=c*u,p=[h,f],m=e.squeeze([0]),g=t.reshape([1,h,-1]),v=new vh(p,m.shape,n),x=this.compileAndRun(v,[m]).reshape([1,p[0],p[1]]),y=null!=r,b=null!=a,w=i?Tf(i,!0):null,k=new _h(x.shape,[1,f,n.outChannels],!0,!1,y,w,b),_=[x,g];r&&_.push(r),b&&_.push(a);var C=this.compileAndRun(k,_);return d?C.reshape([1,c,u,n.outChannels]):C.reshape([1,n.outChannels,c,u])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,i,a,o);if(Oa().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,i,a,o);var s=null!=i,l=null!=o,u=a?Tf(a,!1):null,c=new Ad(r,s,u,l),d=[t,n];return i&&d.push(i),o&&d.push(o),this.compileAndRun(c,d)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Oa().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Ad(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Nd(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Ed(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,i=e.convInfo,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=Oa().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,u=o?Tf(o,l):null,c=[n,r],d=null!=a,h=null!=s;return d&&c.push(a),h&&c.push(s),l?(t=new Od(i,d,u,h),this.compileAndRun(t,c)):(t=new Md(i,d,u,h),this.compileAndRun(t,c))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Oa().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Od(n),this.compileAndRun(r,[e,t])):(r=new Md(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Dd(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Id(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Pd(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Td(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Rd(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Th(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Th(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var i=new Th(r,"max",!0),a=this.compileAndRun(i,[t]),o=new wh(r),s=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new ld(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return wc(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[t]=a,l[a]=this.slice(e,o,s).reshape(r);return l},t.prototype.avgPool3d=function(e,t){var n=new Ih(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new ud(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Ih(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new Ih(r,"max",!0),a=this.compileAndRun(i,[t]),o=new kh(r),s=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!Zs(e.shape,t)&&(null===n.texture||!Zs(n.shape,t))){var r=this.packedReshape(e,t);return os.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return kc(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var i=Oa().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Oh(e.shape,t,n,r):new Mh(e.shape,t,n,r);return this.compileAndRun(i,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Ph(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new jh(e.shape,t,n,r);return this.compileAndRun(i,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Fh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var i=t?e:tc(e),a=i.shape[0],o=i.shape[1],s=new Ch(a,o,n),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",l)},t.prototype.oneHot=function(e,t,n,r){var i=new Sh(e.size,t,n,r);return this.compileAndRun(i,[e])},t.prototype.diag=function(e){var t=new Vd(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return pl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Ic(e.dataSync(),t.dataSync(),n,r,i)},t.prototype.cropAndResize=function(e,t,n,r,i,a){var o=new Fd(e.shape,t.shape,r,i,a);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){Xa(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,l=a*t,u=o/(t*t),c=new Wd("NHWC"===n?[r,s,l,u]:[r,u,s,l],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return Fc(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=qu(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,u=[l/o,o],c=e.reshape([a,i]),d=t.reshape([a,o]);if(0===l)return kc(Pl([]),n);var h=Ol(0),f=new zh(a,i,c.rank,d.rank,s,u);return this.compileAndRun(f,[d,c,h]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var i=qu(0,e,n),a=i.sliceRank,o=i.numUpdates,s=i.strides,l=i.outputSize,u=new zh(o,a,e.rank,t.rank,s,[l,1],!1);return this.compileAndRun(u,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Kd("return real * expR - imag * expI;",e.shape,t),i=new Kd("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,a),s=this.compileAndRun(i,a),l=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),l},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Vu(e,t),a=i[0],o=i[1],s=i[2],l=i[3],u=t.reshape([o,r]),c=e.reshape([e.size/s,s]),d=new $d(r,l,[o,s]);return this.compileAndRun(d,[c,u]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||bo(t))){var r=uo(n,Ja(e));return r.fill(t),os.makeTensor(r,e,n,this)}var i=new Xd(e,t),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return _c(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return os.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Nf(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Eh(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Xs(e.shape)].concat(Ys(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[Xs(t)].concat(Ys(t)),a=new Ah(i,n),o=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,a=n.dtype,o=$s(i);return t=r?new zd(o):new Bd(o),{dtype:a,shape:i,dataId:this.runWebGLProgram(t,[{shape:o,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,i){var a=this;void 0===i&&(i=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===us.DENSE){var l=vs(e.outputShape);s.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Ja(o.shape))return s.values=lo(o.dtype,0),o;var u=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ja(t.shape)<=Oa().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),u.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Zs(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),u.push(t),n=a.texData.get(t.dataId),r.shape=i}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var d,h={shape:o.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var i=e.userCode;return e.constructor.name+"_"+r+"_"+i}(e,c,h),p=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var i=t.userCode,a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=Yc(a,s,i,t.packedInputs),u=e.createProgram(l),c=null,d=e.getUniformLocation(u,"NAN",!1);1===Oa().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));for(var h={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];h[p]=e.getUniformLocation(u,p,!1),h["offset"+p]=e.getUniformLocation(u,"offset"+p,!1)}return{program:t,source:l,webGLProgram:u,uniformLocations:h,inShapeInfos:o,outShapeInfo:s,infLoc:c,nanLoc:d}}(a.gpgpu,e,c,h)})),m=null!=this.activeTimers;if(m&&(d=this.startTimer()),function(e,t,n,r,i){gh(t.inShapeInfos,n),gh([t.outShapeInfo],[r]);var a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,o[0],o[1]):e.setOutputMatrixTexture(a,o[0],o[1]),e.setProgram(t.webGLProgram),1===Oa().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],a=t.uniformLocations[i],o=t.uniformLocations["offset"+i];if(null!=a)if(n.isUniform)if(Ja(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,c,h,r),u.forEach((function(e){return a.disposeData(e.dataId)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)})),!Oa().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var g=this.unpackTensor(o);return this.disposeData(o.dataId),g}return o},t.prototype.compileAndRun=function(e,t,n,r,i){void 0===i&&(i=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,i);return os.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Oa().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=hl((function(){if(!Oa().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Oa().getBool("DEBUG");Oa().set("DEBUG",!1);var n=e.abs(Ol(1e-8)).dataSync()[0];if(Oa().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.values,o=n.texture,s=n.usage,l=n.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=Ro());var d=n.texShape;if(null==d&&(d=Qs(r,l),n.texShape=d),null!=a){var h=$s(r),f=void 0,p=d[1],m=d[0],g=a instanceof Uint8Array;l?(p=(t=xs(d[0],d[1]))[0],m=t[1],f=new qd(h,[m,p],g)):f=new Gd(h,[m,p],g);var v=this.makeTensorInfo([m,p],i);this.texData.get(v.dataId).usage=g?cs.PIXELS:cs.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,a);var x=this.runWebGLProgram(f,[v],i,null,!0),y=this.texData.get(x.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(v.dataId),this.texData.delete(x.dataId),n.values=null,c&&(this.uploadWaitMs+=Ro()-u)}else{var b=this.acquireTexture(d,s,i,l);n.texture=b}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*mo(t)},t}(ic);ss()&&os.registerBackend("webgl",(function(){return new If}),2);var Df=Tl({square_:function(e){var t=vl(e,"x","square"),n=[t];return os.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),Af="SquaredDifference",Pf=Tl({squaredDifference_:function(e,t){var n,r=vl(e,"a","squaredDifference"),i=vl(t,"b","squaredDifference");n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return os.runKernelFunc((function(e,t){var n=e.squaredDifference(r,i);return t([r,i]),n}),a,(function(e,t){var n=t[0],r=t[1],i=Ol(2);return{a:function(){return e.mul(n.sub(r).mul(i))},b:function(){return e.mul(r.sub(n).mul(i))}}}),Af,{},o,[])}}),Mf=Tl({abs_:function(e){var t=vl(e,"x","abs");return"complex64"===t.dtype?os.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):os.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Of=Tl({acos_:function(e){var t=vl(e,"x","acos");return os.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ol(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Ff=Tl({acosh_:function(e){var t=vl(e,"x","acosh");return os.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),jf=Tl({asin_:function(e){var t=vl(e,"x","asin");return os.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ol(1).sub(n.toFloat().square()).sqrt())}}}))}}),Lf=Tl({asinh_:function(e){var t=vl(e,"x","asinh");return os.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ol(1).add(n.toFloat().square()).sqrt())}}}))}}),Bf=Tl({atan_:function(e){var t=vl(e,"x","atan");return os.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),zf=Tl({atanh_:function(e){var t=vl(e,"x","atanh");return os.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(Ol(1).sub(n.toFloat().square()))}}}))}}),Wf=Tl({ceil_:function(e){var t=vl(e,"x","ceil");return os.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),Vf=Tl({clipByValue_:function(e,t,n){var r=vl(e,"x","clipByValue");Xa(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var i=[r],a={min:t,max:n};return os.runKernelFunc((function(e,i){var a=e.clip(r,t,n);return i([r]),a}),{x:r},(function(e,r){var i=r[0];return{x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),Gl(e))}}}),"ClipByValue",a,i)}}),Uf=Tl({cos_:function(e){var t=vl(e,"x","cos"),n=[t];return os.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Hf=Tl({cosh_:function(e){var t=vl(e,"x","cosh");return os.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Gf=Tl({erf_:function(e){var t=vl(e,"x","erf");return Xa("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),os.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),qf=Tl({exp_:function(e){var t=vl(e,"x","exp");return os.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Kf=Tl({expm1_:function(e){var t=vl(e,"x","expm1");return os.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Xf=Tl({floor_:function(e){var t=vl(e,"x","floor");return os.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),Yf=Tl({log_:function(e){var t=vl(e,"x","log"),n=[t];return os.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),$f=Tl({log1p_:function(e){var t=vl(e,"x","log1p");return os.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Qf=Tl({logSigmoid_:function(e){var t=vl(e,"x","logSigmoid");return os.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),Jf=Tl({neg_:function(e){var t=vl(e,"x","neg"),n=[t];return os.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Zf=Tl({reciprocal_:function(e){var t=vl(e,"x","reciprocal");return os.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),ep=Tl({round_:function(e){var t=vl(e,"x","round");return os.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),tp=Tl({rsqrt_:function(e){var t=vl(e,"x","rsqrt"),n=[t];return os.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),np=Tl({sigmoid_:function(e){var t=vl(e,"x","sigmoid");return os.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Ol(1).sub(n)))}}}),"Sigmoid")}}),rp=Tl({sign_:function(e){var t=vl(e,"x","sign");return os.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),ip=Tl({isNaN_:function(e){var t=vl(e,"x","isNaN");return os.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),ap=Tl({isInf_:function(e){var t=vl(e,"x","isInf");return os.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),op=Tl({isFinite_:function(e){var t=vl(e,"x","isFinite");return os.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Gl(e)}}}))}}),sp=Tl({sin_:function(e){var t=vl(e,"x","sin"),n=[t];return os.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),lp=Tl({sinh_:function(e){var t=vl(e,"x","sinh");return os.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),up=Tl({softplus_:function(e){var t=vl(e,"x","softplus");return os.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),cp=Tl({sqrt_:function(e){var t=vl(e,"x","sqrt");return os.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),dp=Tl({step_:function(e,t){void 0===t&&(t=0);var n=vl(e,"x","step");return os.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Gl(e)}}}))}}),hp=Tl({tan_:function(e){var t=vl(e,"x","tan");return os.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),fp=Tl({tanh_:function(e){var t=vl(e,"x","tanh");return os.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return Ol(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function pp(e,t,n,r,i,a){var o,s,l=vl(e,"x","batchNorm"),u=vl(t,"mean","batchNorm"),c=vl(n,"variance","batchNorm");return null!=i&&(o=vl(i,"scale","batchNorm")),null!=r&&(s=vl(r,"offset","batchNorm")),Xa(2===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),Xa(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."})),Xa(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=o&&Xa(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&Xa(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),vp(l,u,c,s,o,a)}function mp(e,t,n,r,i,a){var o,s,l=vl(e,"x","batchNorm"),u=vl(t,"mean","batchNorm"),c=vl(n,"variance","batchNorm");return null!=i&&(o=vl(i,"scale","batchNorm")),null!=r&&(s=vl(r,"offset","batchNorm")),Xa(3===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),Xa(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."})),Xa(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=o&&Xa(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&Xa(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),vp(l,u,c,s,o,a)}function gp(e,t,n,r,i,a){var o,s,l=vl(e,"x","batchNorm"),u=vl(t,"mean","batchNorm"),c=vl(n,"variance","batchNorm");return null!=i&&(o=vl(i,"scale","batchNorm")),null!=r&&(s=vl(r,"offset","batchNorm")),Xa(4===l.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."})),Xa(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."})),Xa(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=o&&Xa(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&Xa(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),vp(l,u,c,s,o,a)}function vp(e,t,n,r,i,a){null==a&&(a=.001);var o,s,l,u=vl(e,"x","batchNorm"),c=vl(t,"mean","batchNorm"),d=vl(n,"variance","batchNorm");null!=i&&(o=vl(i,"scale","batchNorm")),null!=r&&(s=vl(r,"offset","batchNorm")),Xa(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Xa(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Xa(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),l=0===u.rank||1===u.rank?u.as4D(1,1,1,u.size):2===u.rank?u.as4D(1,1,u.shape[0],u.shape[1]):3===u.rank?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u;var h=[u,c,d,o];return os.runKernelFunc((function(e,t){var n=e.batchNormalization(l,xp(c),xp(d),a,xp(o),xp(s));return t([u,c,d,o]),n}),{x:u,mean:c,variance:d,scale:o,offset:s},(function(e,t){var n=t,r=n[0],i=n[1],o=n[2],s=n[3],u=null==s?Ol(1):s,c=sc(i.shape,l.shape),d=[];if(1===i.rank){for(var h=0;h<l.shape.length-1;++h)d.push(l.shape[h]);d.push(1)}var f=r.sub(i),p=e.mul(u),m=tp(o.add(Ol(a))),g=m.mul(m).mul(m).mul(Ol(-.5));return{x:function(){return 1===i.rank?e.mul(Mu(m.as4D(1,1,1,i.shape[0]),d)).mul(u).reshape(r.shape):e.mul(m).mul(u).reshape(r.shape)},mean:function(){var e=m.mul(Ol(-1)).mul(p);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},variance:function(){var e=g.mul(f).mul(p);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},scale:function(){var t=f.mul(m),n=e.mul(t);return 1===i.rank&&(n=n.sum(c)),n.reshape(i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=t.sum(c)),t.reshape(i.shape)}}}),"BatchNormalization",{varianceEpsilon:a},h).reshape(u.shape)}function xp(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function yp(){dl("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var bp=Tl({batchNormalization2d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),yp(),pp(e,t,n,a,i,r)}}),wp=Tl({batchNormalization3d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),yp(),mp(e,t,n,a,i,r)}}),kp=Tl({batchNormalization4d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),yp(),gp(e,t,n,a,i,r)}}),_p=Tl({batchNormalization_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),yp(),vp(e,t,n,a,i,r)}}),Cp=Tl({batchNorm_:vp}),Sp=Tl({batchNorm2d_:pp}),Ep=Tl({batchNorm3d_:mp}),Np=Tl({batchNorm4d_:gp}),Rp=Tl({logicalAnd_:function(e,t){var n=vl(e,"a","logicalAnd","bool"),r=vl(t,"b","logicalAnd","bool");return lc(n.shape,r.shape),os.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Tp=Tl({logicalNot_:function(e){var t=vl(e,"x","logicalNot","bool");return os.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Ip=Tl({logicalOr_:function(e,t){var n=vl(e,"a","logicalOr","bool"),r=vl(t,"b","logicalOr","bool");return lc(n.shape,r.shape),os.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Dp=Tl({logicalXor_:function(e,t){var n=vl(e,"a","logicalXor","bool"),r=vl(t,"b","logicalXor","bool");return lc(n.shape,r.shape),Ip(e,t).logicalAnd(Rp(e,t).logicalNot())}}),Ap=Tl({where_:function(e,t,n){var r=vl(t,"a","where"),i=vl(n,"b","where"),a=vl(e,"condition","where","bool");return Ya(r.shape,i.shape,"Error in where: "),1===a.rank?Xa(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Ya(a.shape,i.shape,"Error in where: "),os.runKernelFunc((function(e,t){var n=e.select(a,r,i);return t([a]),n}),{$condition:a,$a:r,$b:i},(function(e,t){var n=t[0];return{$condition:function(){return Gl(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Pp=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r;return Pa(this,(function(i){switch(i.label){case 0:return[4,(t=vl(e,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=Bc(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Mp=Tl({add_:function(e,t){var n,r=vl(e,"a","add"),i=vl(t,"b","add");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e){return e.add(r,i)}),{a:r,b:i},(function(e){return{a:function(){var t=e,n=sc(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=sc(i.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}}),"Add")}}),Op=Tl({addN_:function(e){Xa(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Xa(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return vl(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Za(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return os.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),Fp=Tl({addStrict_:function(e,t){var n=vl(e,"a","addStrict"),r=vl(t,"b","addStrict");return Ya(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),jp=Tl({atan2_:function(e,t){var n,r=vl(e,"a","atan2"),i=vl(t,"b","atan2");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e,t){var n=e.atan2(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Mp(n.square(),r.square()),i=e.mul(r.div(t)),o=sc(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var t=Mp(n.square(),r.square()),i=Jf(e.mul(n.div(t))),o=sc(r.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}}))}}),Lp=Tl({div_:function(e,t){var n,r=vl(e,"a","div"),i=vl(t,"b","div");if(n=es(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return Wp(r,i);var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e,t){var n=e.realDivide(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=sc(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=sc(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"Div")}}),Bp=Tl({divNoNan_:function(e,t){var n,r=vl(e,"a","div"),i=vl(t,"b","div");r=(n=es(r,i))[0],i=n[1];var a=Lp(r,i),o=Gl(a),s=i.equal(o);return Ap(s,o,a)}}),zp=Tl({divStrict_:function(e,t){var n=vl(e,"a","div"),r=vl(t,"b","div");return Ya(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Wp=Tl({floorDiv_:function(e,t){var n,r=vl(e,"a","floorDiv"),i=vl(t,"b","floorDiv");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e,t){var n=e.floorDiv(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=sc(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=sc(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),Vp=Tl({maximum_:function(e,t){var n,r=vl(e,"a","maximum"),i=vl(t,"b","maximum");return n=es(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),lc(r.shape,i.shape),os.runKernelFunc((function(e,t){var n=e.maximum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Up=Tl({maximumStrict_:function(e,t){var n=vl(e,"a","maximumStrict"),r=vl(t,"b","maximumStrict");return Ya(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Hp=Tl({minimum_:function(e,t){var n,r=vl(e,"a","minimum"),i=vl(t,"b","minimum");return n=es(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),lc(r.shape,i.shape),os.runKernelFunc((function(e,t){var n=e.minimum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Gp=Tl({minimumStrict_:function(e,t){var n=vl(e,"a","minimumStrict"),r=vl(t,"b","minimumStrict");return Ya(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),qp=Tl({mod_:function(e,t){var n,r=vl(e,"a","mod"),i=vl(t,"b","mod");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e,t){var n=e.mod(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=sc(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=sc(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),Kp=Tl({modStrict_:function(e,t){var n=vl(e,"a","modStrict"),r=vl(t,"b","modStrict");return Ya(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Xp=Tl({mul_:function(e,t){var n,r=vl(e,"a","mul"),i=vl(t,"b","mul");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e,t){var n=e.multiply(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),i=sc(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=sc(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}),"Mul")}}),Yp=Tl({mulStrict_:function(e,t){var n=vl(e,"a","mul"),r=vl(t,"b","mul");return Ya(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),$p=Tl({pow_:function(e,t){var n,r=vl(e,"base","pow"),i=vl(t,"exp","pow");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape),o=[r,i];return os.runKernelFunc((function(e,t){var n=e.pow(r,i);return t([r,i,n]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1],i=t[2];return{a:function(){var t=r.toFloat(),i=e.mul(t.mul(n.pow(t.sub(Ol(1))))),o=sc(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,Gl(n)),s=e.mul(i.mul(o)),l=sc(r.shape,a);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)}}}),"Pow",{},o,[!0])}}),Qp=Tl({powStrict_:function(e,t){return Ya(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Jp=Tl({squaredDifferenceStrict_:function(e,t){var n=vl(e,"a","squaredDifferenceStrict"),r=vl(t,"b","squaredDifferenceStrict");return Ya(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Zp=Tl({sub_:function(e,t){var n,r=vl(e,"a","sub"),i=vl(t,"b","sub");n=es(r,i),r=n[0],i=n[1];var a=lc(r.shape,i.shape);return os.runKernelFunc((function(e){return e.subtract(r,i)}),{a:r,b:i},(function(e){return{a:function(){var t=e,n=sc(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=sc(i.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}}),"Sub")}}),em=Tl({subStrict_:function(e,t){var n=vl(e,"a","subStrict"),r=vl(t,"b","subStrict");return Ya(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),tm=Tl({equal_:function(e,t){var n,r=vl(e,"a","equal"),i=vl(t,"b","equal");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e){return e.equal(r,i)}),{$a:r,$b:i})}}),nm=Tl({equalStrict_:function(e,t){var n=vl(e,"a","equalStrict"),r=vl(t,"b","equalStrict");return Ya(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),rm=Tl({greater_:function(e,t){var n,r=vl(e,"a","greater"),i=vl(t,"b","greater");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e){return e.greater(r,i)}),{a:r,b:i},null,"Greater")}}),im=Tl({greaterEqual_:function(e,t){var n,r=vl(e,"a","greaterEqual"),i=vl(t,"b","greaterEqual");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e,t){var n=e.greaterEqual(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Gl(n)},b:function(){return Gl(r)}}}),"GreaterEqual")}}),am=Tl({greaterEqualStrict_:function(e,t){var n=vl(e,"a","greaterEqualStrict"),r=vl(t,"b","greaterEqualStrict");return Ya(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),om=Tl({greaterStrict_:function(e,t){var n=vl(e,"a","greaterStrict"),r=vl(t,"b","greaterStrict");return Ya(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),sm=Tl({less_:function(e,t){var n,r=vl(e,"a","less"),i=vl(t,"b","less");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e){return e.less(r,i)}),{a:r,b:i},null,"Less")}}),lm=Tl({lessEqual_:function(e,t){var n,r=vl(e,"a","lessEqual"),i=vl(t,"b","lessEqual");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e,t){var n=e.lessEqual(r,i);return t([r,i]),n}),{a:r,b:i},null,"LessEqual")}}),um=Tl({lessEqualStrict_:function(e,t){var n=vl(e,"a","lessEqualStrict"),r=vl(t,"b","lessEqualStrict");return Ya(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),cm=Tl({lessStrict_:function(e,t){var n=vl(e,"a","lessStrict"),r=vl(t,"b","lessStrict");return Ya(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),dm=Tl({notEqual_:function(e,t){var n,r=vl(e,"a","notEqual"),i=vl(t,"b","notEqual");return n=es(r,i),r=n[0],i=n[1],lc(r.shape,i.shape),os.runKernelFunc((function(e){return e.notEqual(r,i)}),{a:r,b:i},null,"NotEqual")}}),hm=Tl({notEqualStrict_:function(e,t){var n=vl(e,"a","notEqualStrict"),r=vl(t,"b","notEqualStrict");return Ya(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function fm(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function pm(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var mm=Tl({gather_:function(e,t,n){void 0===n&&(n=0);var r=vl(e,"x","gather"),i=vl(t,"indices","gather","int32");n=oo(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],i=[],a=1,o=1,s=0;s<n;s++)i.push(e.shape[s]),a*=e.shape[s];for(s=0;s<t.rank;s++)i.push(t.shape[s]);for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),o*=e.shape[s];return{batchSize:a,sliceSize:o,dimSize:r,outputShape:i}}(r,i,n);return os.runKernelFunc((function(e,t){var a=e.gather(r,i.flatten(),n);return t([i]),a}),{x:r,indices:i},(function(e,t){var i=t[0];return{x:function(){var t=r.shape,a=i.size,o=t.slice(0,n),s=o.length,l=t.slice(n,t.length).slice(1),u=l.length,c=fm(0,s),d=fm(s+1,s+1+u),h=pm([o,[a],l]),f=e.reshape(h),p=i.reshape([a]),m=pm([[s],c,d]),g=f.transpose(m),v=gm(g,p,r.shape[n]),x=Sl(m);return v.transpose(x)},indices:function(){return i}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),gm=Tl({unsortedSegmentSum_:function(e,t,n){var r=vl(e,"x","unsortedSegmentSum"),i=vl(t,"segmentIds","unsortedSegmentSum","int32");return Xa(eo(n),(function(){return"numSegments must be of dtype int"})),os.runKernelFunc((function(e,t){var a=e.unsortedSegmentSum(r,i,n);return t([i]),a}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Vp(t,Gl(t)),r=mm(e,n),i=im(t,Ol(0,"int32")),a=r.rank-i.rank,o=0;o<a;++o)i=vu(i,o+1);i=Rp(i,zl(r.shape,"bool"));var s=Gl(r);return Ap(i,r,s)}(e,n)}}}))}});function vm(e,t,n,r,i,a,o){void 0===a&&(a="NHWC"),Xa(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,l=t,u=!1;3===t.rank&&(u=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),Xa(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),Xa(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank})),Xa(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===a?s[3]:s[1],d="NHWC"===a?l.shape[3]:l.shape[1];Xa(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),Xa(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&Xa(eo(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var h=bc(a),f=dc(s,n.shape,r,1,i,o,!1,h),p=os.runKernelFunc((function(e,t){var r=e.conv2dDerInput(l,n,f);return t([n,l]),r}),{dy4D:l,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return wm(e,n,r,i,a,1,o)},filter:function(){return _m(e,s,n.shape,r,i,a,o)}}}));return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function xm(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function ym(e,t,n,r,i){Xa(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var a=e,o=t,s=!1;4===t.rank&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var l=a[4],u=o.shape[4];Xa(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),Xa(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),Xa(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Xa(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."})),Xa(u===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."}));var c=hc(a,n.shape,r,1,i),d=os.runKernelFunc((function(e){return e.conv3dDerInput(o,n,c)}),{dy5D:o});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var bm=Tl({conv1d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NWC"),void 0===a&&(a=1);var s=vl(e,"x","conv1d"),l=vl(t,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),Xa(3===u.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."})),Xa(3===l.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."})),null!=o&&Xa(eo(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),Xa(u.shape[2]===l.shape[1],(function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."})),Xa(yc(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),Xa("NWC"===i,(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),h=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),f=wm(h,d,[1,n],r,"NHWC",[1,a],o);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),wm=Tl({conv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=vl(e,"x","conv2d"),l=vl(t,"filter","conv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Xa(4===u.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."})),Xa(4===l.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."})),null!=o&&Xa(eo(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d="NHWC"===i?u.shape[3]:u.shape[1];Xa(d===l.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."})),Xa(yc(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var h=bc(i),f=dc(u.shape,l.shape,n,a,r,o,!1,h),p=[l,u],m=os.runKernelFunc((function(e,t){var n=e.conv2d(u,l,f);return t([l,u]),n}),{x:u,filter:l},(function(e,t){var o=t,s=o[0],l=o[1];return Xa(xc(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return Cm(l.shape,e,s,n,r,i)},filter:function(){return _m(l,e,s.shape,n,r,i)}}}),"Conv2D",f,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),km=Tl({conv3d_:function(e,t,n,r,i,a){void 0===i&&(i="NDHWC"),void 0===a&&(a=[1,1,1]);var o=vl(e,"x","conv3d"),s=vl(t,"filter","conv3d"),l=o,u=!1;4===o.rank&&(u=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),Xa(5===l.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."})),Xa(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Xa(l.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Xa(function(e,t){return xm(e)||xm(t)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),Xa("NDHWC"===i,(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var c=hc(l.shape,s.shape,n,a,r),d=os.runKernelFunc((function(e,t){var n=e.conv3d(l,s,c);return t([l,s]),n}),{x:l,$filter:s},(function(e,t){Xa(xm(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var i=t[0],o=t[1];return{x:function(){return ym(i.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,i){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Xa(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),Xa(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),Xa(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Xa(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),Xa(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=hc(a.shape,n,r,1,i);return os.runKernelFunc((function(e){return e.conv3dDerFilter(a,o,s)}),{x5D:a,dy5D:o})}(i,e,o.shape,n,r)}}}));return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),_m=Tl({conv2dDerFilter_:function(e,t,n,r,i,a,o){void 0===a&&(a="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Xa(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),Xa(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."})),Xa(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var u="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?l.shape[3]:l.shape[1];Xa(u===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."})),Xa(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=o&&Xa(eo(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var d=bc(a),h=dc(s.shape,n,r,1,i,o,!1,d);return os.runKernelFunc((function(e){return e.conv2dDerFilter(s,l,h)}),{x4D:s,dy4D:l})}}),Cm=Tl({conv2dDerInput_:vm}),Sm=Tl({depthwiseConv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=vl(e,"x","depthwiseConv2d"),l=vl(t,"filter","depthwiseConv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Xa(4===u.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."})),Xa(4===l.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."})),Xa(u.shape[3]===l.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."})),null==a&&(a=[1,1]),Xa(yc(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&Xa(eo(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=dc(u.shape,l.shape,n,a,r,o,!0),h=[u,l],f=os.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(u,l,d);return t([u,l]),n}),{x:u,filter:l},(function(e,t){Xa(xc(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=t[0],r=t[1];return{x:function(){return Em(n.shape,e,r,d)},filter:function(){return Nm(n,e,r.shape,d)}}}),"DepthwiseConv2dNative",d,h);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Em=Tl({depthwiseConv2dDerInput_:function(e,t,n,r){var i=t,a=!1;3===t.rank&&(a=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=os.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(i,n,r)}),{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Nm=Tl({depthwiseConv2dDerFilter_:function(e,t,n,r){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),os.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(i,a,r)}),{x4D:i,dy4D:a})}}),Rm=Tl({separableConv2d_:function(e,t,n,r,i,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC");var s=vl(e,"x","separableConv2d"),l=vl(t,"depthwiseFilter","separableConv2d"),u=vl(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Xa(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Xa(4===l.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."})),Xa(4===u.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."})),Xa(1===u.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."})),Xa(1===u.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."}));var h=l.shape[2],f=l.shape[3];Xa(u.shape[2]===h*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+u.shape[2]+"."}));var p=Sm(c,l,r,i,o,a),m=wm(p,u,1,"valid",o);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Tm=Tl({conv2dTranspose_:function(e,t,n,r,i,a){return vm(n,vl(e,"x","conv2dTranspose"),vl(t,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),Im=Tl({conv3dTranspose_:function(e,t,n,r,i){return ym(n,vl(e,"x","conv3dTranspose"),vl(t,"filter","conv3dTranspose"),r,i)}}),Dm=Tl({matMul_:function(e,t,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=vl(e,"a","matMul"),o=vl(t,"b","matMul");i=es(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],l=r?o.shape[o.rank-1]:o.shape[o.rank-2],u=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],d=a.shape.slice(0,-2),h=o.shape.slice(0,-2),f=Ja(d),p=Ja(h);Xa(a.rank>=2&&o.rank>=2&&a.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."})),Xa(Za(d,h),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."})),Xa(s===l,(function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=a.shape.slice(0,-2).concat([u,c]),g=n?a.as3D(f,s,u):a.as3D(f,u,s),v=r?o.as3D(p,c,l):o.as3D(p,l,c),x={transposeA:n,transposeB:r};return os.runKernelFunc((function(e,t){var i=e.batchMatMul(g,v,n,r);return t([g,v]),i}),{a:g,b:v},(function(e,t){var i=t,a=i[0],o=i[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}}),"BatchMatMul",x).reshape(m)}}),Am=Tl({dot_:function(e,t){var n=vl(e,"t1","dot"),r=vl(t,"t2","dot");Xa(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return Xa(i===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Pm=Tl({outerProduct_:function(e,t){var n=vl(e,"v1","outerProduct"),r=vl(t,"v2","outerProduct");return Xa(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Mm=Tl({reverse_:function(e,t){var n=vl(e,"x","reverse");if(0===n.rank)return n.clone();var r=oo(t,n.shape);return os.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Om=Tl({reverse1d_:function(e){var t=vl(e,"x","reverse");return Xa(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Mm(t,0)}}),Fm=Tl({reverse2d_:function(e,t){var n=vl(e,"x","reverse");return Xa(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Mm(n,t)}}),jm=Tl({reverse3d_:function(e,t){var n=vl(e,"x","reverse");return Xa(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Mm(n,t)}}),Lm=Tl({reverse4d_:function(e,t){var n=vl(e,"x","reverse");return Xa(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Mm(n,t)}});function Bm(e,t,n,r,i,a){var o=vl(e,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),Xa(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Xa(yc(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&Xa(eo(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var u=uc(s.shape,t,n,r,i,a);if(1===u.filterWidth&&1===u.filterHeight&&Za(u.inShape,u.outShape))return o.clone();var c=[s],d=os.runKernelFunc((function(e,t){var n=e.maxPool(s,u);return t([s,n]),n}),{x:s},(function(e,a){var o=a[0],s=a[1];return{x:function(){return function(e,t,n,r,i,a,o,s){var l=vl(e,"dy","maxPoolBackprop"),u=vl(t,"input","maxPoolBackprop"),c=vl(n,"output","maxPoolBackprop");Xa(u.rank===l.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+l.rank+")"})),null==a&&(a=[1,1]),Xa(yc(i,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),Xa(4===l.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),Xa(4===u.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=uc(u.shape,r,i,a,o,s);return os.runKernelFunc((function(e){return e.maxPoolBackprop(l,u,c,d)}),{$dy:l,$input:u})}(e,o,s,t,n,r,i)}}}),"MaxPool",u,c);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function zm(e,t,n,r,i,a){var o=vl(e,"x","avgPool","float32");null==r&&(r=[1,1]),Xa(yc(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Xa(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=a&&Xa(eo(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var u=uc(s.shape,t,n,r,i,a);if(1===u.filterWidth&&1===u.filterHeight&&Za(u.inShape,u.outShape))return o.clone();var c=os.runKernelFunc((function(e){return e.avgPool(s,u)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,i,a){var o=vl(e,"dy","avgPoolBackprop"),s=vl(t,"input","avgPoolBackprop");Xa(s.rank===o.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"})),null==i&&(i=[1,1]),Xa(yc(r,i),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}));var l=s,u=o,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Xa(4===u.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Xa(4===l.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=uc(l.shape,n,r,i,a),h=os.runKernelFunc((function(e){return e.avgPoolBackprop(u,l,d)}),{dy4D:u,input4D:l});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(e,s,t,n,r,i)}}}),"AvgPool",u);return c=c.cast(o.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Wm=Tl({maxPool_:function(e,t,n,r,i){return Bm(e,t,n,1,r,i)}}),Vm=Tl({avgPool_:function(e,t,n,r,i){return zm(e,t,n,1,r,i)}}),Um=Tl({pool_:function(e,t,n,r,i,a){null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");var o=vl(e,"x","maxPool"),s=o,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Xa(yc(a,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"}));var u,c=uc(s.shape,t,a,i,r),d=[c.dilationHeight,c.dilationWidth];u="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),i=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],i[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),i=n.map((function(e){return e[1]})),a=e.concat(r,i),o=t.map((function(e,t){return(e-a[t]%e)%e})),s=i.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([c.inHeight,c.inWidth],d,u),p=f[0],m=f[1],g=h?r:"valid",v=h?s:Du(s,d,p),x=("avg"===n?function(){return zm(v,t,a,1,g)}:function(){return Bm(v,t,a,1,g)})(),y=h?x:du(x,d,m);return l?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),Hm=Tl({maxPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=vl(e,"x","maxPool3d"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),Xa(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."})),Xa("NDHWC"===a,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),Xa(yc(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&Xa(eo(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=cc(l.shape,t,n,o,r,i,a),d=os.runKernelFunc((function(e,t){var n=e.maxPool3d(l,c);return t([l,n]),n}),{x:l},(function(e,a){var s=a[0],l=a[1];return{x:function(){return function(e,t,n,r,i,a,o,s){var l=vl(e,"dy","maxPool3dBackprop"),u=vl(t,"input","maxPool3dBackprop"),c=vl(n,"output","maxPool3dBackprop"),d=l,h=u,f=c,p=!1;4===u.rank&&(p=!0,d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),Xa(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),Xa(5===h.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."})),Xa(5===f.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."})),null==a&&(a=[1,1,1]),Xa(yc(i,a),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),null!=s&&Xa(eo(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var m=cc(h.shape,r,i,a,o,s),g=os.runKernelFunc((function(e){return e.maxPool3dBackprop(d,h,f,m)}),{dy5D:d,input5D:h});return p?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(e,s,l,t,n,o,r,i)}}}));return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Gm=Tl({avgPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var s=vl(e,"x","avgPool3d","float32"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),Xa(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."})),Xa("NDHWC"===a,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),Xa(yc(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&Xa(eo(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=cc(l.shape,t,n,o,r,i,a),d=os.runKernelFunc((function(e){return e.avgPool3d(l,c)}),{x:l},(function(e){return{x:function(){return function(e,t,n,r,i,a,o){var s=vl(e,"dy","avgPool3dBackprop"),l=vl(t,"input","avgPool3dBackprop"),u=s,c=l,d=!1;4===l.rank&&(d=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),Xa(5===u.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+u.rank+"."})),Xa(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==i&&(i=[1,1,1]),Xa(yc(r,i),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})),null!=o&&Xa(eo(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=cc(c.shape,n,r,i,a,o),f=os.runKernelFunc((function(e){return e.avgPool3dBackprop(u,c,h)}),{dy5D:u,input5D:c});return d?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,l,t,n,o,r,i)}}}));return d=d.cast(l.dtype),u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),qm=Tl({slice_:function(e,t,n){var r,i,a=vl(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach((function(e){Xa(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Xa(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),a.shape[t]-r[t])})),Ku(a,r,i);var o=a.shape,s={begin:r,size:i};return os.runKernelFunc((function(e){return e.slice(a,r,i)}),{x:a},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-i[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),Km=Tl({slice1d_:function(e,t,n){var r=vl(e,"x","slice1d");return Xa(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),qm(r,[t],[n])}}),Xm=Tl({slice2d_:function(e,t,n){var r=vl(e,"x","slice2d");return Xa(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),qm(r,t,n)}}),Ym=Tl({slice3d_:function(e,t,n){var r=vl(e,"x","slice3d");return Xa(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),qm(r,t,n)}}),$m=Tl({slice4d_:function(e,t,n){var r=vl(e,"x","slice4d");return Xa(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),qm(r,t,n)}});function Qm(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(kl(t.shape,r))),e.rank<n.rank&&(e=e.reshape(kl(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==i?r:r.transpose(i)}}}var Jm=Tl({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","all","bool"),i=oo(t,r.shape),a=i,o=Cl(a,r.rank);null!=o&&(r=r.transpose(o),a=El(a.length,r.rank));var s=os.runKernelFunc((function(e){return e.all(r,a)}),{$x:r});if(n){var l=kl(s.shape,i);return s.reshape(l)}return s}}),Zm=Tl({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","any","bool"),i=oo(t,r.shape),a=i,o=Cl(a,r.rank);null!=o&&(r=r.transpose(o),a=El(a.length,r.rank));var s=os.runKernelFunc((function(e){return e.any(r,a)}),{$x:r});if(n){var l=kl(s.shape,i);return s.reshape(l)}return s}}),eg=Tl({argMax_:function(e,t){void 0===t&&(t=0);var n=vl(e,"x","argMax");null==t&&(t=0);var r=oo(t,n.shape),i=Cl(r,n.rank);null!=i&&(n=n.transpose(i),r=El(r.length,n.rank));var a={axis:r[0]},o=[n];return os.runKernelFunc((function(e,t){var i=e.argMax(n,r[0]);return t([n]),i}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Gl(n)}}}),"ArgMax",a,o)}}),tg=Tl({argMin_:function(e,t){void 0===t&&(t=0);var n=vl(e,"x","argMin");null==t&&(t=0);var r=oo(t,n.shape),i=Cl(r,n.rank);return null!=i&&(n=n.transpose(i),r=El(r.length,n.rank)),os.runKernelFunc((function(e,t){var i=e.argMin(n,r[0]);return t([n]),i}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Gl(n)}}}))}}),ng=Tl({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","logSumExp"),i=oo(t,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var l=kl(s.shape,i);return s.reshape(l)}return s}}),rg=Tl({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","max"),i=r,a=oo(t,r.shape),o=a,s=Cl(o,r.rank);null!=s&&(r=r.transpose(s),o=El(o.length,r.rank));var l=[r],u=os.runKernelFunc((function(e,t){var n=e.max(r,o);return t([i,n]),n}),{x:r},(function(e,t){return Qm(e,t[1],t[0],a,s)}),"Max",{axes:o},l,[!0]);if(n){var c=kl(u.shape,a);u=u.reshape(c)}return u}}),ig=Tl({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","mean"),i=oo(t,r.shape),a=Ja(wl(r.shape,i)[1]);return ec((function(e){var r=Ol(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(zl(e.shape,"float32")).div(a)}}}))(r)}}),ag=Tl({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","min"),i=r,a=oo(t,r.shape),o=a,s=Cl(o,r.rank);null!=s&&(r=r.transpose(s),o=El(o.length,r.rank));var l=[r],u=os.runKernelFunc((function(e,t){var n=e.min(r,o);return t([i,n]),n}),{x:r},(function(e,t){return Qm(e,t[1],t[0],a,s)}),"Min",{axes:o},l,[!0]);if(n){var c=kl(u.shape,a);u=u.reshape(c)}return u}}),og=Tl({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=oo(t,(e=vl(e,"x","moments")).shape),i=e.mean(r,n),a=i.shape;n||(a=kl(i.shape,r));var o=e.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),sg=Tl({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=oo(t,r.shape);return ec((function(e){var t=Cl(i,e.rank),r=i,a=e;null!=t&&(a=e.transpose(t),r=El(r.length,e.rank));var o=function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(zl(e.shape,"float32"))},s={axes:r},l=os.runKernelFunc((function(e){return e.sum(a,r)}),{x:a},(function(e){return{x:function(){return o(e)}}}),"Sum",s);if(n){var u=kl(l.shape,i);l=l.reshape(u)}return{value:l,gradFunc:o}}))(r)}}),lg=Tl({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=vl(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=oo(t,r.shape),a=Cl(i,r.rank),o=i,s=r;null!=a&&(s=r.transpose(a),o=El(o.length,r.rank));var l=os.runKernelFunc((function(e){return e.prod(s,o)}),{permutedX:s});if(n){var u=kl(l.shape,i);l=l.reshape(u)}return l}}),ug=Tl({elu_:function(e){var t=vl(e,"x","elu");return os.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return os.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),cg=Tl({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=vl(e,"x","leakyRelu");return Vp(Ol(t).mul(n),n)}}),dg=Tl({prelu_:function(e,t){var n=vl(e,"x","prelu"),r=vl(t,"alpha","prelu");return os.runKernelFunc((function(e,t){var i=e.prelu(n,r);return t([n,r]),i}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],i=n.greater(0);return{x:function(){return Ap(i,e,e.mul(r))},alpha:function(){var t=Ap(i,Gl(e),e.mul(n)),a=sc(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}}),"Prelu")}}),hg=Tl({relu_:function(e){var t=vl(e,"x","relu");return"bool"===t.dtype?t.toInt():os.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),fg=Tl({relu6_:function(e){var t=vl(e,"x","relu6");return"bool"===t.dtype?t.toInt():os.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),pg=Tl({selu_:function(e){var t=vl(e,"x","selu");return os.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Ol(0)),r=Ol(Zh),i=Ol(ef),a=e.mul(i),o=e.mul(r).mul(n.toFloat().exp());return Ap(t,a,o)}}}))}}),mg=Tl({transpose_:function(e,t){var n=vl(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Xa(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Xa(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return os.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=Sl(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),gg=Tl({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var a=vl(e,"x","localResponseNormalization");Xa(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),Xa(eo(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var l=os.runKernelFunc((function(e,a){var s=e.localResponseNormalization4D(o,t,n,r,i);return a([o,s]),s}),{x4D:o},(function(e,a){var o=a[0],s=a[1];return{x4D:function(){return os.runKernelFunc((function(a){return a.LRNGrad(e,o,s,t,n,r,i)}),{})}}}));return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),vg=Tl({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Ol(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=vl(e,"x","norm"),t,n),a=i.shape;if(r){var o=oo(n,e.shape);a=kl(i.shape,o)}return i.reshape(a)}}),xg=Tl({basicLSTMCell_:function(e,t,n,r,i,a){var o=vl(e,"forgetBias","basicLSTMCell"),s=vl(t,"lstmKernel","basicLSTMCell"),l=vl(n,"lstmBias","basicLSTMCell"),u=vl(r,"data","basicLSTMCell"),c=vl(i,"c","basicLSTMCell"),d=vl(a,"h","basicLSTMCell"),h=u.concat(d,1).matMul(s).add(l),f=h.shape[0],p=h.shape[1]/4,m=[f,p],g=h.slice([0,0],m),v=h.slice([0,p],m),x=h.slice([0,2*p],m),y=h.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(o.add(x).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),yg=Tl({multiRNNCell_:function(e,t,n,r){for(var i=vl(t,"data","multiRNNCell"),a=xl(n,"c","multiRNNCell"),o=xl(r,"h","multiRNNCell"),s=i,l=[],u=0;u<e.length;u++){var c=e[u](s,a[u],o[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var d=[],h=[];for(u=0;u<l.length;u+=2)d.push(l[u]),h.push(l[u+1]);return[d,h]}}),bg=Tl({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0);var a=vl(e,"v","movingAverage"),o=vl(t,"x","movingAverage"),s=vl(n,"decay","movingAverage");ts(a,o),Xa(Za(a.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var l=Ol(1),u=l.sub(s),c=o.sub(a).mul(u);if(i){Xa(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=vl(r,"step","movingAverage");c=c.div(l.sub($p(s,d)))}return a.add(c)}}),wg=Tl({stridedSlice_:function(e,t,n,r,i,a,o,s,l){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var u=vl(e,"x","stridedSlice"),c=Xu(s),d=u.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),u=u.reshape(d);for(var h=0;h<u.rank;h++)t[h]=$u(i,t,r,u.shape,h),n[h]=Qu(a,n,r,u.shape,h),r[h]=r[h]||1;var f=Xu(l);f.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=Yu(t,n,r),m=p.filter((function(e,t){return-1===f.indexOf(t)}));return r.every((function(e){return 1===e}))?qm(u,t,p).reshape(m):os.runKernelFunc((function(e){return e.stridedSlice(u,t,n,r)}),{$x:u}).reshape(m)}}),kg=Tl({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=vl(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var a=os.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),_g=Tl({scatterND_:function(e,t,n){var r=vl(e,"indices","scatterND","int32"),i=vl(t,"updates","scatterND");return Gu(i,r,n),os.runKernelFunc((function(e){return e.scatterND(r,i,n)}),{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),Cg=Tl({fft_:function(e){Xa("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return os.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Sg=Tl({ifft_:function(e){Xa("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return os.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),Eg=Tl({rfft_:function(e,t){Xa("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){var a=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(a,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Wl(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),u=Il(n,l).as2D(i,r),c=Cg(u),d=Math.floor(r/2)+1,h=Dl(c),f=Al(c),p=h.split([d,r-d],h.shape.length-1),m=f.split([d,r-d],f.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,Il(p[0],m[0]).reshape(g)}}),Ng=Tl({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),i=Sg(r);return Dl(i)}var a=[n,2*(t-1)],o=Dl(e).as2D(n,t),s=Al(e).as2D(n,t),l=o.slice([0,1],[n,t-2]).reverse(1),u=s.slice([0,1],[n,t-2]).reverse(1).mul(Ol(-1)),c=o.concat(l,1),d=s.concat(u,1);return r=Il(c,d).as2D(a[0],a[1]),i=Sg(r),Dl(i)}}),Rg=Object.freeze({fft:Cg,ifft:Sg,rfft:Eg,irfft:Ng}),Tg=Tl({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var i=vl(e,"sparseIndices","sparseToDense","int32"),a=vl(t,"sparseValues","sparseToDense"),o=vl(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),os.runKernelFunc((function(e){return e.sparseToDense(i,a,n,o)}),{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),Ig=Tl({gatherND_:function(e,t){var n=vl(t,"indices","gatherND","int32"),r=vl(e,"x","gatherND");return os.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),Dg=Tl({diag_:function(e){var t=vl(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return os.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Ag=Tl({dropout_:function(e,t,n,r){var i=vl(e,"x","dropout");if(Xa("float32"===i.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),Xa(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Ho?i.clone():i;var a=function(e,t){if(null==t)return e.shape.slice();if(Za(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),o=1-t,s=Tu(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function Pg(e,t,n){for(var r=1-e%2,i=new Float32Array(e),a=0;a<e;++a){var o=2*Math.PI*a/(e+r-1);i[a]=t-n*Math.cos(o)}return Fl(i,"float32")}var Mg,Og=Tl({hannWindow_:function(e){return Pg(e,.5,.5)}}),Fg=Tl({hammingWindow_:function(e){return Pg(e,.54,.46)}}),jg=Tl({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var a=0,o=[];a+t<=e.size;)o.push(qm(e,a,t)),a+=n;if(r)for(;a<e.size;){var s=a+t-e.size,l=ql([qm(e,a,t-s),Vl([s],i)]);o.push(l),a+=n}return 0===o.length?jl([],[0,t]):ql(o).as2D(o.length,t)}}),Lg=Tl({stft_:function(e,t,n,r,i){var a;void 0===i&&(i=Og),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=jg(e,t,n),s=Xp(o,i(t)),l=[],u=0;u<o.shape[0];u++)l.push(Eg(s.slice([u,0],[1,t]),r));return ql(l)}}),Bg=Object.freeze({hannWindow:Og,hammingWindow:Fg,frame:jg,stft:Lg});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Mg||(Mg={}));var zg=Tl({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Mg.SUM_BY_NONZERO_WEIGHTS);var i=vl(e,"labels","absoluteDifference"),a=vl(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=vl(n,"weights","absoluteDifference")),Ya(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return Wg(s,o,r)}}),Wg=Tl({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Mg.SUM_BY_NONZERO_WEIGHTS);var r=vl(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=vl(t,"weights","computeWeightedLoss"));var a=null==i?r:r.mul(i);if(n===Mg.NONE)return a;if(n===Mg.SUM)return a.sum();if(n===Mg.MEAN){if(null==i)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(Ol(o)):s}if(n===Mg.SUM_BY_NONZERO_WEIGHTS){if(null==i)return a.sum().div(Ol(r.size));var l=i.mul(zl(r.shape)).notEqual(Ol(0)).sum().toFloat();return a.sum().div(l)}throw Error("Unknown reduction: "+n)}}),Vg=Tl({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=Mg.SUM_BY_NONZERO_WEIGHTS);var a=vl(e,"labels","cosineDistance"),o=vl(t,"predictions","cosineDistance"),s=null;null!=r&&(s=vl(r,"weights","cosineDistance")),Ya(a.shape,o.shape,"Error in cosineDistance: ");var l=Ol(1).sub(a.mul(o).sum(n,!0));return Wg(l,s,i)}}),Ug=Tl({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Mg.SUM_BY_NONZERO_WEIGHTS);var i=vl(e,"labels","hingeLoss"),a=vl(t,"predictions","hingeLoss"),o=null;null!=n&&(o=vl(n,"weights","hingeLoss")),Ya(i.shape,a.shape,"Error in hingeLoss: ");var s=Ol(1);i=Ol(2).mul(i).sub(s);var l=s.sub(i.mul(a)).relu();return Wg(l,o,r)}}),Hg=Tl({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=Mg.SUM_BY_NONZERO_WEIGHTS);var a=vl(e,"labels","huberLoss"),o=vl(t,"predictions","huberLoss"),s=null;null!=n&&(s=vl(n,"weights","huberLoss")),Ya(a.shape,o.shape,"Error in huberLoss: ");var l=Ol(r),u=o.sub(a).abs(),c=Hp(u,l),d=u.sub(c),h=Ol(.5).mul(c.square()).add(l.mul(d));return Wg(h,s,i)}}),Gg=Tl({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=Mg.SUM_BY_NONZERO_WEIGHTS);var a=vl(e,"labels","logLoss"),o=vl(t,"predictions","logLoss"),s=null;null!=n&&(s=vl(n,"weights","logLoss")),Ya(a.shape,o.shape,"Error in logLoss: ");var l=Ol(1),u=Ol(r),c=a.mul(o.add(u).log()).neg().sub(l.sub(a).mul(l.sub(o).add(u).log()));return Wg(c,s,i)}}),qg=Tl({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Mg.SUM_BY_NONZERO_WEIGHTS);var i=vl(e,"labels","meanSquaredError"),a=vl(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=vl(n,"weights","meanSquaredError")),Ya(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return Wg(s,o,r)}}),Kg=Tl({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Mg.SUM_BY_NONZERO_WEIGHTS);var a=vl(e,"multiClassLabels","sigmoidCrossEntropy"),o=vl(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=vl(n,"weights","sigmoidCrossEntropy")),Ya(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Ol(r),u=Ol(1),c=Ol(.5);a=a.mul(u.sub(l)).add(c.mul(l))}var d=function(e,t){var n=vl(e,"labels","sigmoidCrossEntropyWithLogits"),r=vl(t,"logits","sigmoidCrossEntropyWithLogits");Ya(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),a=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(a).add(o)}(a,o);return Wg(d,s,i)}}),Xg=Tl({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Mg.SUM_BY_NONZERO_WEIGHTS);var a=vl(e,"onehotLabels","softmaxCrossEntropy"),o=vl(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=vl(n,"weights","softmaxCrossEntropy")),Ya(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Ol(r),u=Ol(1),c=Ol(a.shape[1]);a=a.mul(u.sub(l)).add(l.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ec((function(e,t,r){var i=t.logSumExp([n],!0),a=t.toFloat().sub(i);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],a=kl(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(i.exp())),e.reshape(a).mul(i.exp().sub(r.toFloat()))]}}}))(e,t)}(a,o);return Wg(d,s,i)}}),Yg=Object.freeze({get Reduction(){return Mg},absoluteDifference:zg,computeWeightedLoss:Wg,cosineDistance:Vg,hingeLoss:Ug,huberLoss:Hg,logLoss:Gg,meanSquaredError:qg,sigmoidCrossEntropy:Kg,softmaxCrossEntropy:Xg});function $g(e,t){return void 0===t&&(t=!1),os.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],i=xu(n),a=e.clone(),o=jl([[1]],[1,1]),s=o.clone(),l=n>=r?r:n,u=function(e){var t,l=a,u=s,c=i;t=os.tidy((function(){var t=a.slice([e,e],[n-e,1]),l=t.norm(),u=a.slice([e,e],[1,1]),c=jl([[-1]]).where(u.greater(0),jl([[1]])),d=u.sub(c.mul(l)),h=t.div(d);s=1===h.shape[0]?o.clone():o.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var f=c.matMul(d).div(l).neg(),p=a.slice([e,0],[n-e,r]),m=f.mul(s);if(0===e)a=p.sub(m.matMul(s.transpose().matMul(p)));else{var g=p.sub(m.matMul(s.transpose().matMul(p)));a=a.slice([0,0],[e,r]).concat(g,0)}var v=i.slice([0,e],[n,i.shape[1]-e]);if(0===e)i=v.sub(v.matMul(s).matMul(m.transpose()));else{var x=v.sub(v.matMul(s).matMul(m.transpose()));i=i.slice([0,0],[n,e]).concat(x,1)}return[s,a,i]})),s=t[0],a=t[1],i=t[2],fl([l,u,c])},c=0;c<l;++c)u(c);return!t&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]}))}var Qg=Tl({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=vl(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var l=Ul(0,o,1,"int32").reshape([-1,1]),u=Ul(0,s,1,"int32"),c=Zp(l,u),d=Rp(c.lessEqual(Ol(+t,"int32")),c.greaterEqual(Ol(-n,"int32"))),h=Wl([o,s],r.dtype);return Pu(Fu(r.reshape([-1,o,s])).map((function(e){return Ap(d,e,h)}))).reshape(i)}}),Jg=Tl({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Xa(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Xa(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},i=1;i<e.length;++i)r(i)}else t=!0,e=Ql(e,e.shape[0],0).map((function(e){return Au(e,[0])}));Xa(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var a=[],o=e,s=function(e){a.push(os.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=sg(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(vg(t,"euclidean"))})))};for(i=0;i<e.length;++i)s(i);return t?Pu(a,0):a}}),Zg=Tl({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return $g(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Fu(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach((function(e){var n=$g(e,t),r=n[0],o=n[1];i.push(r),a.push(o)})),[Pu(i,0).reshape(e.shape),Pu(a,0).reshape(e.shape)]}}),ev=Object.freeze({bandPart:Qg,gramSchmidt:Jg,qr:Zg});function tv(e,t,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);var o=e.shape[0];return n=Math.min(n,o),Xa(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Xa(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Xa(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Xa(1===t.rank,(function(){return"scores must be a 1D tensor"})),Xa(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),Xa(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var nv=Tl({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=vl(e,"images","resizeBilinear");Xa(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Xa(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=os.runKernelFunc((function(e,t){return t([i]),e.resizeBilinear(i,o,s,n)}),{x:i},(function(e,t){return{x:function(){return os.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),rv=Tl({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=vl(e,"images","resizeNearestNeighbor");Xa(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Xa(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Xa("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],l=os.runKernelFunc((function(e,t){return t([i]),e.resizeNearestNeighbor(i,o,s,n)}),{batchImages:i},(function(e,t){return{batchImages:function(){return os.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),iv=Tl({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var a=vl(e,"boxes","nonMaxSuppression"),o=vl(t,"scores","nonMaxSuppression"),s=tv(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return os.runKernelFunc((function(e){return e.nonMaxSuppression(a,o,n,r,i)}),{boxes:a,scores:o},null,"NonMaxSuppressionV3",l)}}),av=Tl({nonMaxSuppressionWithScore_:function(e,t,n,r,i,a){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var o=vl(e,"boxes","nonMaxSuppression"),s=vl(t,"scores","nonMaxSuppression"),l=tv(o,s,n,r,i,a),u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma},c=os.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},u);return{selectedIndices:c[0],selectedScores:c[1]}}}),ov=Tl({cropAndResize_:function(e,t,n,r,i,a){var o=vl(e,"image","cropAndResize"),s=vl(t,"boxes","cropAndResize","float32"),l=vl(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var u=s.shape[0];return Xa(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),Xa(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."})),Xa(1===l.rank&&l.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."})),Xa(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Xa(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Xa("bilinear"===i||"nearest"===i,(function(){return"method must be bilinear or nearest, but was "+i})),os.runKernelFunc((function(e,t){return e.cropAndResize(o,s,l,r,i,a)}),{images:o,boxes:s,boxInd:l},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),sv=Object.freeze({resizeBilinear:nv,resizeNearestNeighbor:rv,nonMaxSuppression:iv,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),Aa(this,void 0,void 0,(function(){var a,o,s,l,u,c,d;return Pa(this,(function(h){switch(h.label){case 0:return a=vl(e,"boxes","nonMaxSuppressionAsync"),o=vl(t,"scores","nonMaxSuppressionAsync"),s=tv(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return l=h.sent(),u=l[0],c=l[1],d=Ic(u,c,n,r,i),a!==e&&a.dispose(),o!==t&&o.dispose(),[2,d]}}))}))},nonMaxSuppressionWithScore:av,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,i,a){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),Aa(this,void 0,void 0,(function(){var o,s,l,u,c,d,h;return Pa(this,(function(f){switch(f.label){case 0:return o=vl(e,"boxes","nonMaxSuppressionAsync"),s=vl(t,"scores","nonMaxSuppressionAsync"),l=tv(o,s,n,r,i,a),n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return u=f.sent(),c=u[0],d=u[1],h=Dc(c,d,n,r,i,a),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,h]}}))}))},cropAndResize:ov}),lv=function(e,t){return!(e>0)||"linear"===t},uv=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},cv=function(e,t){var n=t,r=sc(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},dv=function(e,t,n){if("linear"===t)return e;if("relu"===t)return hg(e);if("elu"===t)return ug(e);if("relu6"===t)return fg(e);if("prelu"===t)return dg(e,n);throw new Error("Unknown fused activation "+t+".")},hv=Tl({fusedMatMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,a=void 0!==i&&i,o=e.transposeB,s=void 0!==o&&o,l=e.bias,u=e.activation,c=void 0===u?"linear":u,d=e.preluActivationWeights;if(!1===lv(os.state.gradientDepth,c)){var h=Dm(n,r,a,s);return null!=l&&(h=Mp(h,l)),dv(h,c,d)}var f=vl(n,"a","fused matMul"),p=vl(r,"b","fused matMul");t=es(f,p),f=t[0],p=t[1];var m=a?f.shape[f.rank-2]:f.shape[f.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=a?f.shape[f.rank-1]:f.shape[f.rank-2],x=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=f.shape.slice(0,-2),b=p.shape.slice(0,-2),w=Ja(y),k=Ja(b);Xa(f.rank>=2&&p.rank>=2&&f.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."})),Xa(Za(y,b),(function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."})),Xa(m===g,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var _,C,S=f.shape.slice(0,-2).concat([v,x]),E=a?f.as3D(w,m,v):f.as3D(w,v,m),N=s?p.as3D(k,x,g):p.as3D(k,g,x);null!=l&&lc(S,(_=es(_=vl(l,"bias","fused matMul"),f)[0]).shape),null!=d&&(C=vl(d,"prelu weights","fused matMul"));var R={a:E,b:N};null!=l&&(R.bias=_),null!=d&&(R.preluActivationWeights=C);var T=[E,N];return os.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:E,b:N,transposeA:a,transposeB:s,bias:_,activation:c,preluActivationWeights:C});return t([E,N,n]),n}),R,(function(e,t){var n=t[0],r=t[1],i=t[2],o=uv(e,i,c),u={};return null!=l&&(u={bias:function(){return cv(_,o)}}),a||s?!a&&s?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},u):a&&!s?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},u):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},u):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},u)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},T,[!0]).reshape(S)}}),fv=Tl({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,s=e.dilations,l=void 0===s?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(h=h||"linear",!1===lv(os.state.gradientDepth,h)){var p=wm(t,n,r,i,o,l,u);return null!=c&&(p=Mp(p,c)),dv(p,h,f)}var m=vl(t,"x","conv2d"),g=vl(n,"filter","conv2d"),v=m,x=!1;3===m.rank&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Xa(4===v.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."})),Xa(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."})),null!=u&&Xa(eo(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."})),Xa(v.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."})),Xa(yc(r,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"})),Xa("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var y,b,w=dc(v.shape,g.shape,r,l,i,u);null!=c&&(y=es(y=vl(c,"bias","fused conv2d"),m)[0],lc(w.outShape,y.shape)),null!=f&&(b=vl(f,"prelu weights","fused conv2d"));var k={x:v,filter:g};null!=c&&(k.bias=y),null!=f&&(k.preluActivationWeights=b);var _=[g,v],C=os.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:v,filter:g,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return t([g,v,n]),n}),k,(function(e,t){var n=t,a=n[0],o=n[1],s=n[2],u=uv(e,s,h);Xa(xc(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"}));var d={};return null!=c&&(d={bias:function(){return cv(y,u)}}),Object.assign({x:function(){return Cm(o.shape,u,a,r,i)},filter:function(){return _m(o,u,a.shape,r,i)}},d)}),"FusedConv2D",{convInfo:w,activation:h},_,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),pv=Tl({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,s=e.dilations,l=void 0===s?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(!1===lv(os.state.gradientDepth,h)){var p=Sm(t,n,r,i,o,l,u);return null!=c&&(p=Mp(p,c)),dv(p,h,f)}var m=vl(t,"x","depthwiseConv2d"),g=vl(n,"filter","depthwiseConv2d"),v=m,x=!1;3===m.rank&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Xa(4===v.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."})),Xa(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."})),Xa(v.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."})),null==l&&(l=[1,1]),Xa(yc(r,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"})),null!=u&&Xa(eo(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+u+" but got pad "+i+"."}));var y,b,w=dc(v.shape,g.shape,r,l,i,u,!0);null!=c&&(y=es(y=vl(c,"bias","fused conv2d"),m)[0],lc(w.outShape,y.shape)),null!=f&&(b=vl(f,"prelu weights","fused depthwiseConv2d"));var k={x:v,filter:g};null!=c&&(k.bias=y),null!=f&&(k.preluActivationWeights=b);var _=[g,v],C=os.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:v,filter:g,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return t([g,v,n]),n}),k,(function(e,t){Xa(xc(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"}));var n=t[0],r=t[1],i=t[2],a=uv(e,i,h),o={};return null!=c&&(o={bias:function(){return cv(y,a)}}),Object.assign({x:function(){return Em(r.shape,a,n,w)},filter:function(){return Nm(r,a,n.shape,w)}},o)}),"FusedDepthwiseConv2D",{convInfo:w,activation:h},_,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),mv=Object.freeze({matMul:hv,conv2d:fv,depthwiseConv2d:pv}),gv=Object.freeze({image:sv,linalg:ev,losses:Yg,spectral:Rg,fused:mv,signal:Bg,square:Df,squaredDifference:Pf,conv1d:bm,conv2d:wm,conv3d:km,depthwiseConv2d:Sm,separableConv2d:Rm,conv2dTranspose:Tm,conv3dTranspose:Im,op:Tl,batchNormalization2d:bp,batchNormalization3d:wp,batchNormalization4d:kp,batchNormalization:_p,batchNorm:Cp,batchNorm2d:Sp,batchNorm3d:Ep,batchNorm4d:Np,booleanMaskAsync:function(e,t,n){return Aa(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,d,h,f,p,m;return Pa(this,(function(g){switch(g.label){case 0:for(r=vl(e,"tensor","boolMask"),i=vl(t,"mask","boolMask","bool"),a=null==n?0:n,o=i.rank,s=r.shape,Xa(o>0,(function(){return"mask cannot be scalar"})),Ya(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=a;u<a+o;u++)l*=s[u];return c=s.slice(0,a).concat([l],s.slice(a+o)),d=r.reshape(c),h=i.reshape([-1]),[4,Pp(h)];case 1:return f=g.sent(),p=f.squeeze([1]),m=mm(d,p,a),e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,m]}}))}))},complex:Il,real:Dl,imag:Al,concat:ql,concat1d:Kl,concat2d:Xl,concat3d:Yl,concat4d:$l,split:Ql,matMul:Dm,dot:Am,outerProduct:Pm,reverse:Mm,reverse1d:Om,reverse2d:Fm,reverse3d:jm,reverse4d:Lm,maxPool:Wm,avgPool:Vm,pool:Um,maxPool3d:Hm,avgPool3d:Gm,slice:qm,slice1d:Km,slice2d:Xm,slice3d:Ym,slice4d:$m,abs:Mf,acos:Of,acosh:Ff,asin:jf,asinh:Lf,atan:Bf,atanh:zf,ceil:Wf,clipByValue:Vf,cos:Uf,cosh:Hf,erf:Gf,exp:qf,expm1:Kf,floor:Xf,log:Yf,log1p:$f,logSigmoid:Qf,neg:Jf,reciprocal:Zf,round:ep,rsqrt:tp,sigmoid:np,sign:rp,isNaN:ip,isInf:ap,isFinite:op,sin:sp,sinh:lp,softplus:up,sqrt:cp,step:dp,tan:hp,tanh:fp,all:Jm,any:Zm,argMax:eg,argMin:tg,logSumExp:ng,max:rg,mean:ig,min:ag,moments:og,sum:sg,prod:lg,equal:tm,equalStrict:nm,greater:rm,greaterEqual:im,greaterEqualStrict:am,greaterStrict:om,less:sm,lessEqual:lm,lessEqualStrict:um,lessStrict:cm,notEqual:dm,notEqualStrict:hm,add:Mp,addN:Op,addStrict:Fp,atan2:jp,div:Lp,divNoNan:Bp,divStrict:zp,floorDiv:Wp,maximum:Vp,maximumStrict:Up,minimum:Hp,minimumStrict:Gp,mod:qp,modStrict:Kp,mul:Xp,mulStrict:Yp,pow:$p,powStrict:Qp,squaredDifferenceStrict:Jp,sub:Zp,subStrict:em,elu:ug,leakyRelu:cg,prelu:dg,relu:hg,relu6:fg,selu:pg,logicalAnd:Rp,logicalNot:Tp,logicalOr:Ip,logicalXor:Dp,where:Ap,whereAsync:Pp,buffer:cu,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:du,broadcastTo:hu,cast:fu,clone:pu,cumsum:mu,depthToSpace:gu,expandDims:vu,eye:xu,multinomial:yu,oneHot:bu,pad:wu,pad1d:ku,pad2d:_u,pad3d:Cu,pad4d:Su,rand:Eu,randomNormal:Nu,randomGamma:Ru,randomUniform:Tu,reshape:Iu,spaceToBatchND:Du,squeeze:Au,stack:Pu,tile:Mu,truncatedNormal:Ou,unstack:Fu,setdiff1dAsync:function(e,t){return Aa(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,d;return Pa(this,(function(h){switch(h.label){case 0:return n=vl(e,"x","setdiff1d"),r=vl(t,"y","setdiff1d"),Xa(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Xa(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Xa(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(a=h.sent(),o=new Set(a),s=0,c=0;c<i.length;c++)o.has(i[c])||s++;for(l=new zo([s],n.dtype),u=new zo([s],"int32"),c=0,d=0;c<i.length;c++)o.has(i[c])||(l.values[d]=i[c],u.values[d]=c,d++);return[2,[l.toTensor(),u.toTensor()]]}}))}))},fill:Vl,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return os.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:zl,range:Ul,scalar:Ol,tensor:Pl,tensor1d:Fl,tensor2d:jl,tensor3d:Ll,tensor4d:Bl,tensor5d:function(e,t,n){if($a(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=ml(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)},tensor6d:function(e,t,n){if($a(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=ml(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ml(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),os.makeVariable(e,t,n,r)},zeros:Wl,onesLike:Hl,zerosLike:Gl,transpose:mg,softmax:tc,logSoftmax:nc,localResponseNormalization:gg,norm:vg,gather:mm,unsortedSegmentSum:gm,basicLSTMCell:xg,multiRNNCell:yg,movingAverage:bg,stridedSlice:wg,topk:kg,scatterND:_g,fft:Cg,ifft:Sg,rfft:Eg,irfft:Ng,sparseToDense:Tg,gatherND:Ig,diag:Dg,dropout:Ag,hannWindow:Og,hammingWindow:Fg,frame:jg,stft:Lg,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Aa(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,d,h,f,p,m,g;return Pa(this,(function(v){switch(v.label){case 0:return r=vl(e,"predictions","inTopK"),i=vl(t,"targets","inTopK"),Xa(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),Xa(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),Ya(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],Xa(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return o=v.sent(),[4,i.data()];case 2:for(s=v.sent(),l=[o.length/a,a],c=l[1],d=lo("bool",u=l[0]),h=0;h<u;h++){for(f=h*c,p=o.subarray(f,f+c),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort((function(e,t){return t.value-e.value})),d[h]=0,g=0;g<n;g++)if(m[g].index===s[h]){d[h]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,Pl(d,i.shape,"bool")]}}))}))}});function vv(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Xa("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function xv(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var yv=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new rc(t,os),t}return Da(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Oa().get("IS_NODE")&&pl("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Cc(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Do(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return cu(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return os.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){return t=Ro(),e(),[2,{kernelMs:Ro()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:os.keep(e.clone()),imag:os.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(vv(e,"slice"),Ju(e.shape,t,n)){var r=Zu(t,e.strides),i=Ja(n);return Pl(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var a=cu(n,e.dtype),o=this.bufferSync(e),s=0;s<a.size;++s){var l=a.indexToLoc(s).map((function(e,n){return e+t[n]}));a.values[s]=o.get.apply(o,l)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){vv(e,"stridedSlice");var i=Yu(t,n,r);if(i.some((function(e){return 0===e})))return Pl([],i);for(var a=cu(i,e.dtype),o=this.bufferSync(e),s=0;s<a.size;s++){for(var l=a.indexToLoc(s),u=new Array(l.length),c=0;c<u.length;c++)u[c]=l[c]*r[c]+t[c];a.set.apply(a,[o.get.apply(o,u)].concat(l))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=cu([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)o[t]=a,l[a]=this.slice(e,o,s).reshape(r);return l},t.prototype.reverse=function(e,t){vv(e,"reverse");for(var n=cu(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var a=n.indexToLoc(i),o=a.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(a))},a=0;a<n.size;a++)i(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Dl(e)})),i=e.map((function(e){return Al(e)}));return Il(this.concat(r,t),this.concat(i,t))}var a=e.map((function(e){var n=Ja(e.shape.slice(t));return e.as2D(-1,n)})),o=Rl(a.map((function(e){return e.shape})),1),s=cu(o,e[0].dtype).values;if(1===a[0].shape[0]){var l=0;a.forEach((function(e){s.set(n.readSync(e.dataId),l),l+=e.size}))}else{var u=0;a.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var a=i*o[1]+u,l=0;l<e.shape[1];++l)s[a+l]=t[r++];u+=e.shape[1]}))}var c=Rl(e.map((function(e){return e.shape})),t);return Pl(s,c,e[0].dtype)},t.prototype.neg=function(e){return vv(e,"neg"),this.multiply(Ol(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Jo(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;vv(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=cu(e[0].shape,e[0].dtype),i=r.values,a=0;a<e.length;a++)for(var o=n[a],s=0;s<i.length;s++)i[s]+=o[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=oo([t],e.shape),r=this.max(e,n),i=kl(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return this.realDivide(o,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Jo(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return vv([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){vv([e,t],"matMul");for(var i=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],l=this.readSync(e.dataId),u=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],h=c[1],f=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],g=p[1],v=p[2],x=a*o,y=cu([s,a,o],e.dtype),b=y.values,w=this.blockSize,k=0;k<s;k++)for(var _=0;_<a;_+=w)for(var C=0;C<o;C+=w)for(var S=0;S<i;S+=w)for(var E=Math.min(_+w,a),N=Math.min(C+w,o),R=Math.min(S+w,i),T=_;T<E;T++)for(var I=C;I<N;I++){for(var D=0,A=S;A<R;A++)D+=l[k*d+T*h+A*f]*u[A*m+I*g+k*v];b[k*x+(T*o+I)]+=D}return y.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,s=e.preluActivationWeights,l=this.batchMatMul(t,n,r,i);return a&&(l=this.add(l,a)),o&&(l=xv(this,l,o,s)),l},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Jo(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return vv([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return vv([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){vv(e,"sum"),_l("sum",t,e.rank);for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,Jo(e.dtype,"int32")),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=0,h=0;h<o;++h)d+=l[c+h];s[u]=d}return a},t.prototype.prod=function(e,t){vv(e,"sum");for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,Jo(e.dtype,"int32")),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=1,h=0;h<o;++h)d*=l[c+h];s[u]=d}return a},t.prototype.unsortedSegmentSum=function(e,t,n){vv(e,"unsortedSegmentSum");for(var r=[],i=e.rank-t.rank,a=0;a<i;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var o=Ol(a,"int32"),s=tm(o,t).asType("float32").mul(e).sum(0);r.push(s)}return Pu(r)},t.prototype.argMin=function(e,t){vv(e,"argMin");var n=[t];_l("argMin",n,e.rank);for(var r=wl(e.shape,n),i=r[0],a=r[1],o=Wl(i,"int32"),s=Ja(a),l=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<l.length;++c){for(var d=c*s,h=u[d],f=0,p=0;p<s;++p){var m=u[d+p];m<h&&(h=m,f=p)}l[c]=f}return o},t.prototype.argMax=function(e,t){vv(e,"argMax");var n=[t];_l("argMax",n,e.rank);for(var r=wl(e.shape,n),i=r[0],a=r[1],o=Wl(i,"int32"),s=Ja(a),l=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<l.length;++c){for(var d=c*s,h=u[d],f=0,p=0;p<s;++p){var m=u[d+p];m>h&&(h=m,f=p)}l[c]=f}return o},t.prototype.cumsum=function(e,t,n,r){if(vv(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var i=Jo(e.dtype,"int32"),a=Wl(e.shape,i),o=this.readSync(a.dataId),s=this.readSync(e.dataId),l=e.shape[e.rank-1],u=r?function(e,t){return e+l-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=l)for(var d=0;d<l;d++){var h=u(c,d);if(0===d)o[h]=n?0:s[h];else{var f=u(c,d-1);o[h]=n?s[f]+o[f]:s[h]+o[f]}}return a},t.prototype.equal=function(e,t){return vv([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return vv([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return vv([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return vv([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return vv([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return vv([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){vv(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return vv([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return vv([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){vv([e,t,n],"select");for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),a=this.readSync(n.dataId),o=Wl(t.shape,Jo(t.dtype,n.dtype)),s=this.readSync(o.dataId),l=0,u=0===e.rank||e.rank>1||1===t.rank?1:Ja(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<u;d++)1===r[c]?s[l++]=i[c]:s[l++]=a[c];return o},t.prototype.where=function(e){vv([e],"where");var t=this.readSync(e.dataId);return Bc(e.shape,t)},t.prototype.topk=function(e,t,n){return vv(e,"topk"),Lc(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){vv(e,"min"),_l("min",t,e.rank);for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,e.dtype),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=l[c],h=0;h<o;++h){var f=l[c+h];f<d&&(d=f)}s[u]=d}return a},t.prototype.minimum=function(e,t){return vv([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return vv([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){vv(e,"max"),_l("max",t,e.rank);for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,e.dtype),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=l[c],h=0;h<o;++h){var f=l[c+h];f>d&&(d=f)}s[u]=d}return a},t.prototype.maximum=function(e,t){return vv([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){vv(e,"all"),_l("all",t,e.rank);for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,e.dtype),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=l[c],h=0;h<o;++h){var f=l[c+h];d=d&&f}s[u]=d}return a},t.prototype.any=function(e,t){vv(e,"any"),_l("any",t,e.rank);for(var n=wl(e.shape,t),r=n[0],i=n[1],a=Wl(r,e.dtype),o=Ja(i),s=this.readSync(a.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*o,d=l[c],h=0;h<o;++h){var f=l[c+h];d=d||f}s[u]=d}return a},t.prototype.squaredDifference=function(e,t){return vv([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){vv(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){vv(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){vv(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){vv(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){vv(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){vv(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){vv(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r]);t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){vv(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){vv(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){vv(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){vv(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log1p(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){vv(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){vv(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=1/Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){vv(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){vv(e,"relu");for(var t=Wl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return t},t.prototype.relu6=function(e){vv(e,"relu");for(var t=Wl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return t},t.prototype.prelu=function(e,t){return vv([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){vv(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){vv([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),a=0;a<r.length;++a){var o=r[a];n[a]=o>=1?i[a]:i[a]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){vv(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){vv(e,"clip");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],a=n[2*r+1];t[r]=Math.hypot(i,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){vv(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){vv(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){vv(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a,o=r[i]>-t,s=r[i]<t,l=Math.exp(r[i]);a=s?l:o?r[i]:Math.log(1+l),n[i]=a}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){vv(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){vv(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){vv(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){vv(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){vv(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){vv(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return vv([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){vv(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){vv(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){vv(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=to(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){vv(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){vv(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){vv(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){vv(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),a=Math.abs(n[r]),o=1/(1+.3275911*a);t[r]=i*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),vv(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];isNaN(a)?n[i]=NaN:n[i]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return i&&(s=this.add(s,i)),a&&(s=xv(this,s,a,o)),s},t.prototype.conv2d=function(e,t,n){vv([e,t],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u="channelsLast"===n.dataFormat,c=cu(n.outShape,e.dtype),d=e.strides[0],h=u?e.strides[1]:e.strides[2],f=u?e.strides[2]:1,p=u?1:e.strides[1],m=c.strides[0],g=u?c.strides[1]:c.strides[2],v=u?c.strides[2]:1,x=u?1:c.strides[1],y=this.readSync(e.dataId),b=this.readSync(t.dataId),w=c.values,k=0;k<n.batchSize;++k)for(var _=k*d,C=k*m,S=0;S<n.outHeight;++S)for(var E=C+S*g,N=S*n.strideHeight-l,R=0;R<r;R++){var T=N+R*a;if(!(T<0||T>=n.inHeight))for(var I=R*t.strides[0],D=_+T*h,A=0;A<n.outWidth;++A)for(var P=E+A*v,M=A*n.strideWidth-s,O=0;O<i;O++){var F=M+O*o;if(!(F<0||F>=n.inWidth))for(var j=D+F*f,L=I+O*t.strides[1],B=0;B<n.inChannels;++B){for(var z=y[j+B*p],W=0;W<n.outChannels;++W)w[P+W*x]+=z*b[L+W];L+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,a=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,l=n.dilationWidth,u=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,h=cu(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=h.values,g=0;g<n.batchSize;++g)for(var v=g*e.strides[0],x=g*h.strides[0],y=0;y<n.outDepth;++y)for(var b=x+y*h.strides[1],w=y*n.strideDepth-u,k=0;k<r;k++){var _=w+k*o;if(!(_<0||_>=n.inDepth))for(var C=k*t.strides[0],S=v+_*e.strides[1],E=0;E<n.outHeight;++E)for(var N=b+E*h.strides[2],R=E*n.strideHeight-d,T=0;T<i;T++){var I=R+T*s;if(!(I<0||I>=n.inHeight))for(var D=C+T*t.strides[1],A=S+I*e.strides[2],P=0;P<n.outWidth;++P)for(var M=N+P*n.outChannels,O=P*n.strideWidth-c,F=0;F<a;F++){var j=O+F*l;if(!(j<0||j>=n.inWidth))for(var L=D+F*t.strides[2],B=A+j*n.inChannels,z=L,W=0;W<n.inChannels;++W){for(var V=f[B+W],U=0;U<n.outChannels;++U)m[M+U]+=V*p[z+U];z+=n.outChannels}}}}return h.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){vv([e,t],"conv2dDerInput");for(var r=cu(n.inShape,"float32"),i=r.values,a=this.readSync(e.dataId),o=this.readSync(t.dataId),s=t.strides,l=s[0],u=s[1],c=s[2],d=n.batchSize,h=n.filterHeight,f=n.filterWidth,p=n.inChannels,m=n.inHeight,g=n.inWidth,v=n.outChannels,x=n.outHeight,y=n.outWidth,b=n.strideHeight,w=n.strideWidth,k=n.dataFormat,_=h-1-n.padInfo.top,C=f-1-n.padInfo.left,S="channelsLast"===k,E=r.strides[0],N=S?r.strides[1]:r.strides[2],R=S?r.strides[2]:1,T=S?1:r.strides[1],I=e.strides[0],D=S?e.strides[1]:e.strides[2],A=S?e.strides[2]:1,P=S?1:e.strides[1],M=0;M<d;++M)for(var O=0;O<p;++O)for(var F=0;F<m;++F)for(var j=F-_,L=Math.max(0,Math.ceil(j/b)),B=Math.min(x,(h+j)/b),z=0;z<g;++z){for(var W=z-C,V=Math.max(0,Math.ceil(W/w)),U=Math.min(y,(f+W)/w),H=0,G=L;G<B;++G)for(var q=G*b-j,K=V;K<U;++K)for(var X=I*M+D*G+A*K,Y=l*(h-1-q)+u*(f-1-(K*w-W))+c*O,$=0;$<v;++$)H+=a[X+P*$]*o[Y+$];i[E*M+N*F+R*z+T*O]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=cu(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],u=a[3],c=this.readSync(e.dataId),d=e.strides,h=d[0],f=d[1],p=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,x=v[0],y=v[1],b=v[2],w=v[3],k=n.batchSize,_=n.filterDepth,C=n.filterHeight,S=n.filterWidth,E=n.inChannels,N=n.inDepth,R=n.inHeight,T=n.inWidth,I=n.outChannels,D=n.outDepth,A=n.outHeight,P=n.outWidth,M=n.strideDepth,O=n.strideHeight,F=n.strideWidth,j=_-1-n.padInfo.front,L=C-1-n.padInfo.top,B=S-1-n.padInfo.left,z=0;z<k;++z)for(var W=0;W<E;++W)for(var V=0;V<N;++V)for(var U=V-j,H=Math.max(0,Math.ceil(U/M)),G=Math.min(D,(_+U)/M),q=0;q<R;++q)for(var K=q-L,X=Math.max(0,Math.ceil(K/O)),Y=Math.min(A,(C+K)/O),$=0;$<T;++$){for(var Q=$-B,J=Math.max(0,Math.ceil(Q/F)),Z=Math.min(P,(S+Q)/F),ee=0,te=H;te<G;++te)for(var ne=te*M-U,re=X;re<Y;++re)for(var ie=re*O-K,ae=J;ae<Z;++ae)for(var oe=h*z+f*te+p*re+m*ae,se=x*(_-1-ne)+y*(C-1-ie)+b*(S-1-(ae*F-Q))+w*W,le=0;le<I;++le)ee+=c[oe+le]*g[se+le];i[o*z+s*V+l*q+u*$+W]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){vv([e,t],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,l=cu(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<a;++f)for(var p=Math.max(0,Math.ceil((c-f)/r)),m=Math.min(n.outHeight,(n.inHeight+c-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((u-g)/i)),x=Math.min(n.outWidth,(n.inWidth+u-g)/i),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var w=0,k=0;k<n.batchSize;++k)for(var _=p;_<m;++_)for(var C=f+_*r-c,S=v;S<x;++S){var E=g+S*i-u;w+=s?d.get(k,C,E,y)*h.get(k,_,S,b):d.get(k,y,C,E)*h.get(k,b,_,S)}l.set(w,f,g,y,b)}return l.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=cu(n.filterShape,"float32"),c=u.values,d=u.strides,h=d[0],f=d[1],p=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,x=v[0],y=v[1],b=v[2],w=v[3],k=this.readSync(e.dataId),_=e.strides,C=_[0],S=_[1],E=_[2],N=_[3],R=n.padInfo.front,T=n.padInfo.left,I=n.padInfo.top,D=0;D<o;++D)for(var A=Math.max(0,Math.ceil((R-D)/r)),P=Math.min(n.outDepth,(n.inDepth+R-D)/r),M=D*h,O=0;O<s;++O)for(var F=Math.max(0,Math.ceil((I-O)/i)),j=Math.min(n.outHeight,(n.inHeight+I-O)/i),L=O*f+M,B=0;B<l;++B)for(var z=Math.max(0,Math.ceil((T-B)/a)),W=Math.min(n.outWidth,(n.inWidth+T-B)/a),V=B*p+L,U=0;U<n.inChannels;++U)for(var H=U*m+V,G=0;G<n.outChannels;++G){for(var q=0,K=0;K<n.batchSize;++K)for(var X=K*C,Y=K*x,$=A;$<P;++$)for(var Q=(D+$*r-R)*S+X,J=$*y+Y,Z=F;Z<j;++Z)for(var ee=(O+Z*i-I)*E+Q,te=Z*b+J,ne=z;ne<W;++ne){var re=ne*w+te;q+=k[(B+ne*a-T)*N+ee+U]*g[re+G]}c[H+G]=q}return u.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return i&&(s=this.add(s,i)),a&&(s=xv(this,s,a,o)),s},t.prototype.depthwiseConv2D=function(e,t,n){vv([e,t],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u=n.outChannels/n.inChannels,c=cu(n.outShape,e.dtype),d=this.readSync(e.dataId),h=this.readSync(t.dataId),f=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],g=p*c.strides[0],v=0;v<n.outHeight;++v)for(var x=g+v*c.strides[1],y=v*n.strideHeight-s,b=0;b<r;++b){var w=y+b*a;if(!(w<0||w>=n.inHeight))for(var k=b*t.strides[0],_=m+w*e.strides[1],C=0;C<n.outWidth;++C)for(var S=x+C*c.strides[2],E=C*n.strideWidth-l,N=0;N<i;++N){var R=E+N*o;if(!(R<0||R>=n.inWidth))for(var T=k+N*t.strides[1],I=_+R*n.inChannels,D=S,A=T,P=0;P<n.inChannels;++P){for(var M=d[I+P],O=0;O<u;++O)f[D+O]+=M*h[A+O];D+=u,A+=u}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){vv([e,t],"depthwiseConv2DDerInput");for(var r=cu(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],l=a[2],u=this.readSync(e.dataId),c=e.strides,d=c[0],h=c[1],f=c[2],p=this.readSync(t.dataId),m=t.strides,g=m[0],v=m[1],x=m[2],y=n.batchSize,b=n.filterHeight,w=n.filterWidth,k=n.inChannels,_=n.inHeight,C=n.inWidth,S=n.outChannels,E=n.outHeight,N=n.outWidth,R=n.strideHeight,T=n.strideWidth,I=b-1-n.padInfo.top,D=w-1-n.padInfo.left,A=S/k,P=0;P<y;++P)for(var M=0;M<k;++M)for(var O=0;O<_;++O)for(var F=O-I,j=Math.max(0,Math.ceil(F/R)),L=Math.min(E,(b+F)/R),B=0;B<C;++B){for(var z=B-D,W=Math.max(0,Math.ceil(z/T)),V=Math.min(N,(w+z)/T),U=0,H=j;H<L;++H)for(var G=H*R-F,q=W;q<V;++q)for(var K=d*P+h*H+f*q,X=g*(b-1-G)+v*(w-1-(q*T-z))+x*M,Y=0;Y<A;++Y)U+=u[K+(M*A+Y)]*p[X+Y];i[o*P+s*O+l*B+M]=U}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){vv([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=cu(n.filterShape,"float32"),l=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<a;++f)for(var p=Math.max(0,Math.ceil((u-f)/r)),m=Math.min(n.outHeight,(n.inHeight+u-f)/r),g=0;g<o;++g)for(var v=Math.max(0,Math.ceil((l-g)/i)),x=Math.min(n.outWidth,(n.inWidth+l-g)/i),y=0;y<n.outChannels;++y){for(var b=Math.trunc(y/c),w=y%c,k=0,_=0;_<n.batchSize;++_)for(var C=p;C<m;++C)for(var S=f+C*r-u,E=v;E<x;++E){var N=g+E*i-l;k+=d.get(_,S,N,b)*h.get(_,C,E,y)}s.set(k,f,g,b,w)}return s.toTensor()},t.prototype.tile=function(e,t){return vv(e,"tile"),jc(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){vv(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),i=t.map((function(e){return e[0]})),a=this.bufferSync(e),o=cu(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var l=a.indexToLoc(s),u=l.map((function(e,t){return e+i[t]}));o.set.apply(o,[a.get.apply(a,l)].concat(u))}return o.toTensor()},t.prototype.transpose=function(e,t){vv(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var i=this.readSync(e.dataId),a=cu(n,e.dtype),o=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),l=new Array(s.length),u=0;u<l.length;u++)l[u]=s[t[u]];var c=a.locToIndex(l);a.values[c]=i[r]}return a.toTensor()},t.prototype.gather=function(e,t,n){vv([e,t],"gather");var r=e.shape.slice(),i=this.readSync(t.dataId);r[n]=i.length;for(var a=cu(r,e.dtype),o=this.bufferSync(e),s=0;s<a.size;++s){var l=a.indexToLoc(s),u=l.slice();u[n]=i[l[n]];var c=o.locToIndex(u);a.values[s]=o.values[c]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){vv([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),i=ju(e.shape,t,r),a=Lu(i.length,t.length),o=Bu(e.shape,t,r),s=zu(n,t.length),l=Wu(o,n,t.length);return e.reshape(i).transpose(a).reshape(o).slice(s,l)},t.prototype.spaceToBatchND=function(e,t,n){vv([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),s=ju(o.shape,t,r,!1),l=Lu(s.length,t.length,!1),u=Bu(o.shape,t,r,!1);return o.reshape(s).transpose(l).reshape(u)},t.prototype.pool=function(e,t,n){vv(e,"pool");for(var r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),f=cu(t.outShape,e.dtype),p=f.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],g=t.outShape[2]*t.outShape[3],v=t.outShape[3],x=0;x<t.batchSize;++x)for(var y=x*m,b=x*e.strides[0],w=0;w<t.inChannels;++w)for(var k=0;k<t.outHeight;++k)for(var _=k*r-u,C=Math.max(0,_),S=Math.min(t.inHeight,s+_),E=y+k*g,N=0;N<t.outWidth;++N){for(var R=N*i-c,T=Math.max(0,R),I=Math.min(t.inWidth,l+R),D=d,A=0,P=0,M=C;M<S;M+=a){for(var O=b+M*e.strides[1],F=T;F<I;F+=o){var j=h[O+F*e.strides[2]+w];"max"===n&&j>D?D=j:"avg"===n&&(A+=j,P++)}if(isNaN(D))break}p[E+N*v+w]="avg"===n?A/P:D}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=cu(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),h=0;h<t.batchSize;++h)for(var f=0;f<t.inChannels;++f)for(var p=0;p<t.outHeight;++p){for(var m=p*r-u,g=m;g<0;)g+=a;for(var v=Math.min(t.inHeight,s+m),x=0;x<t.outWidth;++x){for(var y=x*i-c,b=y;b<0;)b+=o;for(var w=Math.min(t.inWidth,l+y),k=Number.NEGATIVE_INFINITY,_=-1,C=g;C<v;C+=a)for(var S=C-m,E=b;E<w;E+=o){var N=E-y,R=d.get(h,C,E,f);R>k&&(k=R,_=S*l+N)}n.set(_,h,p,x,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){vv([t,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(t,r),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,h=u-1-r.padInfo.top,f=cu(t.shape,"float32"),p=this.bufferSync(i),m=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var x=0;x<r.inHeight;++x)for(var y=0;y<r.inWidth;++y){for(var b=x-h,w=y-d,k=0,_=0;_<u;_+=s){var C=(b+_)/a;if(!(C<0||C>=r.outHeight||Math.floor(C)!==C))for(var S=0;S<c;S+=l){var E=(w+S)/o;if(!(E<0||E>=r.outWidth||Math.floor(E)!==E)){var N=u*c-1-p.get(g,C,E,v)===_*c+S?1:0;0!==N&&(k+=m.get(g,C,E,v)*N)}}}f.set(k,g,x,y,v)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){vv([e,t],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,h=u-1-n.padInfo.top,f=cu(t.shape,"float32"),p=1/(a*o),m=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var v=0;v<n.inChannels;++v)for(var x=0;x<n.inHeight;++x)for(var y=0;y<n.inWidth;++y){for(var b=x-h,w=y-d,k=0,_=0;_<u;_+=s){var C=(b+_)/r;if(!(C<0||C>=n.outHeight||Math.floor(C)!==C))for(var S=0;S<c;S+=l){var E=(w+S)/i;E<0||E>=n.outWidth||Math.floor(E)!==E||(k+=m.get(g,C,E,v))}}f.set(k*p,g,x,y,v)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){vv(e,"pool3d");for(var r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),v=cu(t.outShape,e.dtype),x=v.values,y=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],b=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],k=t.outShape[4],_=0;_<t.batchSize;++_)for(var C=_*y,S=_*e.strides[0],E=0;E<t.inChannels;++E)for(var N=0;N<t.outDepth;++N){for(var R=N*r-h,T=R;T<0;)T+=o;for(var I=Math.min(t.inDepth,u+R),D=C+N*b,A=0;A<t.outHeight;++A){for(var P=A*i-f,M=P;M<0;)M+=s;for(var O=Math.min(t.inHeight,c+P),F=D+A*w,j=0;j<t.outWidth;++j){for(var L=j*a-p,B=L;B<0;)B+=l;for(var z=Math.min(t.inWidth,d+L),W=F+j*k,V=m,U=0,H=0,G=T;G<I;G+=o){for(var q=S+G*e.strides[1],K=M;K<O;K+=s){for(var X=q+K*e.strides[2],Y=B;Y<z;Y+=l){var $=g[X+Y*e.strides[3]+E];if("max"===n&&$>V?V=$:"avg"===n&&(U+=$,H++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}x[W+E]="avg"===n?U/H:V}}}return v.toTensor()},t.prototype.avgPool3d=function(e,t){return vv(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){vv([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=h-1-n.padInfo.front,g=p-1-n.padInfo.left,v=f-1-n.padInfo.top,x=cu(t.shape,"float32"),y=1/(o*s*l),b=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var k=0;k<n.inChannels;++k)for(var _=0;_<n.inDepth;++_)for(var C=0;C<n.inHeight;++C)for(var S=0;S<n.inWidth;++S){for(var E=_-m,N=C-v,R=S-g,T=0,I=0;I<h;I+=u){var D=(E+I)/r;if(!(D<0||D>=n.outDepth||Math.floor(D)!==D))for(var A=0;A<f;A+=c){var P=(N+A)/i;if(!(P<0||P>=n.outHeight||Math.floor(P)!==P))for(var M=0;M<p;M+=d){var O=(R+M)/a;O<0||O>=n.outWidth||Math.floor(O)!==O||(T+=b.get(w,D,P,O,k))}}}x.set(T*y,w,_,C,S,k)}return x.toTensor()},t.prototype.maxPool3d=function(e,t){return vv(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=cu(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),g=0;g<t.batchSize;++g)for(var v=0;v<t.inChannels;++v)for(var x=0;x<t.outDepth;++x){for(var y=x*r-h,b=y;b<0;)b+=o;for(var w=Math.min(t.inDepth,u+y),k=0;k<t.outHeight;++k){for(var _=k*i-f,C=_;C<0;)C+=s;for(var S=Math.min(t.inHeight,c+_),E=0;E<t.outWidth;++E){for(var N=E*a-p,R=N;R<0;)R+=l;for(var T=Math.min(t.inWidth,d+N),I=Number.NEGATIVE_INFINITY,D=-1,A=b;A<w;A+=o)for(var P=A-y,M=C;M<S;M+=s)for(var O=M-_,F=R;F<T;F+=l){var j=F-N,L=m.get(g,A,M,F,v);L>=I&&(I=L,D=P*c*d+O*c+j)}n.set(D,g,x,k,E,v)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){vv([t,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(t,r),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=d-1-r.padInfo.front,m=f-1-r.padInfo.left,g=h-1-r.padInfo.top,v=cu(t.shape,"float32"),x=this.bufferSync(i),y=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var w=0;w<r.inChannels;++w)for(var k=0;k<r.inDepth;++k)for(var _=0;_<r.inHeight;++_)for(var C=0;C<r.inWidth;++C){for(var S=k-p,E=_-g,N=C-m,R=0,T=0;T<d;T+=l){var I=(S+T)/a;if(!(I<0||I>=r.outDepth||Math.floor(I)!==I))for(var D=0;D<h;D+=u){var A=(E+D)/o;if(!(A<0||A>=r.outHeight||Math.floor(A)!==A))for(var P=0;P<f;P+=c){var M=(N+P)/s;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var O=d*h*f-1-x.get(b,I,A,M,w)===T*h*f+D*f+P?1:0;0!==O&&(R+=y.get(b,I,A,M,w)*O)}}}}v.set(R,b,k,_,C,w)}return v.toTensor()},t.prototype.cast=function(e,t){return wc(e,t,this)},t.prototype.reshape=function(e,t){return kc(e,t)},t.prototype.avgPool=function(e,t){return vv(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){vv(e,"resizeBilinear");for(var i=e.shape,a=i[0],o=i[1],s=i[2],l=i[3],u=this.readSync(e.dataId),c=new Float32Array(Ja([a,t,n,l])),d=[r&&t>1?o-1:o,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,p=d[0]/h[0],m=d[1]/h[1],g=0;g<a;g++)for(var v=0;v<t;v++)for(var x=p*v,y=Math.floor(x),b=x-y,w=Math.min(o-1,Math.ceil(x)),k=g*e.strides[0]+y*e.strides[1],_=g*e.strides[0]+w*e.strides[1],C=0;C<n;C++)for(var S=m*C,E=Math.floor(S),N=S-E,R=Math.min(s-1,Math.ceil(S)),T=k+E*e.strides[2],I=_+E*e.strides[2],D=k+R*e.strides[2],A=_+R*e.strides[2],P=0;P<l;P++){var M=u[T+P],O=u[I+P],F=M+(u[D+P]-M)*N,j=F+(O+(u[A+P]-O)*N-F)*b;c[f++]=j}return Pl(c,[a,t,n,l])},t.prototype.resizeBilinearBackprop=function(e,t,n){vv([e,t],"resizeBilinearBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=e.shape,u=l[1],c=l[2],d=new Float32Array(i*a*o*s),h=[n&&u>1?a-1:a,n&&c>1?o-1:o],f=[n&&u>1?u-1:u,n&&c>1?c-1:c],p=h[0]/f[0],m=h[1]/f[1],g=this.readSync(e.dataId),v=0,x=0;x<i;x++)for(var y=x*t.strides[0],b=0;b<u;b++)for(var w=b*p,k=Math.floor(w),_=Math.min(Math.ceil(w),a-1),C=y+k*t.strides[1],S=y+_*t.strides[1],E=w-k,N=1-E,R=0;R<c;R++)for(var T=R*m,I=Math.floor(T),D=Math.min(Math.ceil(T),o-1),A=T-I,P=1-A,M=C+I*t.strides[2],O=C+D*t.strides[2],F=S+I*t.strides[2],j=S+D*t.strides[2],L=N*P,B=N*A,z=E*P,W=E*A,V=0;V<s;V++){var U=g[v++];d[M+V]+=U*L,d[O+V]+=U*B,d[F+V]+=U*z,d[j+V]+=U*W}return Bl(d,[i,o,a,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){vv(e,"resizeNearestNeighbor");for(var i=e.shape,a=i[0],o=i[1],s=i[2],l=i[3],u=this.readSync(e.dataId),c=new Float32Array(a*t*n*l),d=[r&&t>1?o-1:o,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=d[0]/h[0],p=d[1]/h[1],m=0,g=0;g<a;g++)for(var v=g*e.strides[0],x=0;x<t;x++)for(var y=f*x,b=v+Math.min(o-1,r?Math.round(y):Math.floor(y))*e.strides[1],w=0;w<n;w++)for(var k=p*w,_=b+Math.min(s-1,r?Math.round(k):Math.floor(k))*e.strides[2],C=0;C<l;C++){var S=u[_+C];c[m++]=S}return Pl(c,[a,t,n,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){vv([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],s=r[3],l=e.shape,u=l[1],c=l[2],d=new Float32Array(i*a*o*s),h=this.readSync(e.dataId),f=[n&&u>1?a-1:a,n&&c>1?o-1:o],p=[n&&u>1?u-1:u,n&&c>1?c-1:c],m=f[0]/p[0],g=f[1]/p[1],v=1/m,x=1/g,y=2*Math.ceil(v)+2,b=2*Math.ceil(x)+2,w=0;w<i;w++)for(var k=w*t.strides[0],_=0;_<a;_++)for(var C=k+_*t.strides[1],S=Math.floor(_*v),E=Math.floor(S-y/2),N=0;N<o;N++)for(var R=C+N*t.strides[2],T=Math.floor(N*x),I=Math.floor(T-b/2),D=0;D<s;D++){for(var A=0,P=0;P<y;P++){var M=P+E;if(!(M<0||M>=u)){var O=k+M*e.strides[1],F=M*m;if(_===Math.min(a-1,n?Math.round(F):Math.floor(F)))for(var j=0;j<b;j++){var L=j+I;if(!(L<0||L>=c)){var B=O+L*e.strides[2],z=L*g;N===Math.min(o-1,n?Math.round(z):Math.floor(z))&&(A+=h[B+D])}}}}d[R+D]=A}return Bl(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){vv([e,t,n,i,a],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=this.readSync(n.dataId),u=i?this.readSync(i.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),d=new Float32Array(o.length),h=c.length,f=u.length,p=l.length,m=s.length,g=0,v=0,x=0,y=0,b=0;b<o.length;++b)d[b]=c[g++]+(o[b]-s[v++])*u[x++]/Math.sqrt(l[y++]+r),g>=h&&(g=0),v>=m&&(v=0),x>=f&&(x=0),y>=p&&(y=0);return Bl(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){vv(e,"localResponseNormalization4D");var a=e.shape[3],o=a-1,s=this.readSync(e.dataId),l=e.size,u=new Float32Array(l);function c(e){for(var n=e%a,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,o),l=0;r<=i;r++){var u=s[r];l+=u*u}return l}for(var d=0;d<l;d++){var h=c(d),f=s[d]*Math.pow(n+r*h,-i);u[d]=f}return Bl(u,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){vv(e,"LRNGrad");for(var s=e.shape[3],l=this.readSync(e.dataId),u=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),h=e.size,f=0;f<h;f++){for(var p=f%s,m=f-p+Math.max(0,p-r),g=f-p+Math.min(s,p+r+1),v=0,x=m;x<g;x++)v+=Math.pow(u[x],2);for(v=a*v+i,x=m;x<g;x++){var y=-2*a*o*u[x]*c[f]/v;f===x&&(y+=Math.pow(v,-o)),y*=l[f],d[x]+=y}}return Bl(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){vv(e,"multinomial");for(var i=t?e:tc(e),a=i.shape[0],o=i.shape[1],s=Wl([a,n],"int32"),l=this.readSync(s.dataId),u=this.readSync(i.dataId),c=0;c<a;++c){var d=c*o,h=new Float32Array(o-1);h[0]=u[d];for(var f=1;f<h.length;++f)h[f]=h[f-1]+u[d+f];for(var p=ou(r.toString()),m=c*n,g=0;g<n;++g){var v=p();l[m+g]=h.length;for(var x=0;x<h.length;x++)if(v<h[x]){l[m+g]=x;break}}}return s},t.prototype.oneHot=function(e,t,n,r){vv(e,"oneHot");var i=new Float32Array(e.size*t);i.fill(r);for(var a=this.readSync(e.dataId),o=0;o<e.size;++o)a[o]>=0&&a[o]<t&&(i[o*t+a[o]]=n);return jl(i,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return vv(e,"nonMaxSuppression"),Ic(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=cu(e.shape,"float32"),a=cu(e.shape,"float32"),o=Dl(e).as2D(n,r),s=Al(e).as2D(n,r),l=0;l<n;l++)for(var u=o.slice([l,0],[1,r]),c=s.slice([l,0],[1,r]),d=Il(u,c),h=this.readSync(this.fftImpl(d,t).dataId),f=0;f<r;f++){var p=Sc(h,f);i.values[l*r+f]=p.real,a.values[l*r+f]=p.imag}return Il(i.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(i=Il(Dl(i).div(Ol(r)),Al(i).div(Ol(r)))),i}var a=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return Il(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),i=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),o=Il(a.real,a.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),l=Il(s.real,s.imag).as1D();o=this.fftRadix2(o,i,n),l=this.fftRadix2(l,i,n);var u=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}(t,n),c=Il(u.real,u.imag).mul(l),d=o.add(c),h=o.sub(c),f=Dl(d).concat(Dl(h)),p=Al(d).concat(Al(h));return Il(f,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var a=0,o=0,s=0;s<t;s++){var l=Nc(i*s,t,n),u=Sc(e,s);a+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(a/=t,o/=t),Ec(r,a,o,i)}return r},t.prototype.depthToSpace=function(e,t,n){Xa("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Xa(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],i=e.shape[1],a=e.shape[2],o=e.shape[3],s=i*t,l=a*t,u=o/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*l*u),h=0,f=0;f<r;++f)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),g=p%t,v=0;v<l;++v)for(var x=Math.floor(v/t),y=(g*t+v%t)*u,b=0;b<u;++b){var w=b+y+o*(x+a*(m+i*f));d[h++]=c[w]}return Bl(d,[r,s,l,u])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=lc(e.shape,t.shape),a=cu(i,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=oc(e.shape,i),u=oc(t.shape,i),c=a.values;if(l.length+u.length===0)for(var d=0;d<c.length;++d)c[d]=r(o[d%o.length],s[d%s.length]);else{var h=this.bufferSync(e),f=this.bufferSync(t),p=function(n){var i=a.indexToLoc(n),d=i.slice(-e.rank);l.forEach((function(e){return d[e]=0}));var p=h.locToIndex(d),m=i.slice(-t.rank);u.forEach((function(e){return m[e]=0}));var g=f.locToIndex(m);c[n]=r(o[p],s[g])};for(d=0;d<c.length;++d)p(d)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=lc(e.shape,t.shape),i=cu(r,"float32"),a=cu(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),l=oc(e.shape,r),u=oc(t.shape,r),c=i.values,d=a.values;if(l.length+u.length===0)for(var h=0;h<c.length;h++){var f=h%o.length,p=h%s.length,m=n(o[2*f],o[2*f+1],s[2*p],s[2*p+1]);c[h]=m.real,d[h]=m.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),x=function(r){var a=i.indexToLoc(r),h=a.slice(-e.rank);l.forEach((function(e){return h[e]=0}));var f=g.locToIndex(h),p=a.slice(-t.rank);u.forEach((function(e){return p[e]=0}));var m=v.locToIndex(p),x=n(o[2*f],o[2*f+1],s[2*m],s[2*m+1]);c[r]=x.real,d[r]=x.imag};for(h=0;h<c.length;h++)x(h)}return this.complex(i.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return Fc(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,i,a){for(var o=e.shape,s=o[0],l=o[1],u=o[2],c=o[3],d=t.shape[0],h=r[0],f=r[1],p=cu([d,h,f,c],"float32"),m=this.readSync(t.dataId),g=this.readSync(n.dataId),v=this.readSync(e.dataId),x=e.strides,y=p.strides,b=0;b<d;b++){var w=4*b,k=m[w],_=m[w+1],C=m[w+2],S=m[w+3],E=g[b];if(!(E>=s))for(var N=h>1?(C-k)*(l-1)/(h-1):0,R=f>1?(S-_)*(u-1)/(f-1):0,T=0;T<h;T++){var I=h>1?k*(l-1)+T*N:.5*(k+C)*(l-1);if(I<0||I>l-1)for(var D=0;D<f;D++)for(var A=0;A<c;A++){var P=A+D*y[2]+T*y[1]+b*y[0];p.values[P]=a}else if("bilinear"===i){var M=Math.floor(I),O=Math.ceil(I),F=I-M;for(D=0;D<f;D++)if((G=f>1?_*(u-1)+D*R:.5*(_+S)*(u-1))<0||G>u-1)for(A=0;A<c;A++)P=A+D*y[2]+T*y[1]+b*y[0],p.values[P]=a;else{var j=Math.floor(G),L=Math.ceil(G),B=G-j;for(A=0;A<c;A++){var z=v[P=A+j*x[2]+M*x[1]+E*x[0]],W=v[P=A+L*x[2]+M*x[1]+E*x[0]],V=v[P=A+j*x[2]+O*x[1]+E*x[0]],U=z+(W-z)*B,H=V+(v[P=A+L*x[2]+O*x[1]+E*x[0]]-V)*B;P=A+D*y[2]+T*y[1]+b*y[0],p.values[P]=U+(H-U)*F}}}else for(D=0;D<f;++D){var G;if((G=f>1?_*(u-1)+D*R:.5*(_+S)*(u-1))<0||G>u-1)for(A=0;A<c;A++)P=A+D*y[2]+T*y[1]+b*y[0],p.values[P]=a;else{var q=Math.round(G),K=Math.round(I);for(A=0;A<c;A++){var X=A+q*x[2]+K*x[1]+E*x[0],Y=A+D*y[2]+T*y[1]+b*y[0];p.values[Y]=v[X]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var i=qu(0,e,n),a=i.sliceRank,o=i.numUpdates,s=i.sliceSize,l=i.strides,u=i.outputSize;return this.scatter(e,t,n,u,s,o,a,l,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Vu(e,t),a=i[0],o=i[1],s=i[2],l=i[3];if(0===o)return Pl([],a,e.dtype);for(var u=new zo([o,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),h=0;h<o;h++){for(var f=[],p=0,m=0;m<r;m++){var g=c[h*r+m];p+=g*l[m],f.push(g)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var v=0;v<s;v++)u.values[h*s+v]=d[p*s+v]}return u.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=qu(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,s=r.strides,l=r.outputSize,u=Ol(0);return this.scatter(e,t,n,l,o,a,i,s,u,!0)},t.prototype.fill=function(e,t,n){var r=uo(n=n||bo(t),Ja(e));return r.fill(t),os.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=uo(e.dtype,Ja(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return _c(e,t,n)},t.prototype.scatter=function(e,t,n,r,i,a,o,s,l,u){var c=[r/i,i],d=this.readSync(e.dataId),h=this.readSync(t.dataId);if(0===r)return Pl([],n,t.dtype);var f=new zo(c,t.dtype);f.values.fill(this.readSync(l.dataId)[0]);for(var p=0;p<a;p++){for(var m=[],g=0,v=0;v<o;v++){var x=d[p*o+v];m.push(x),g+=x*s[v]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var y=0;y<i;y++)u?f.values[g*i+y]+=h[p*i+y]:f.values[g*i+y]=0===t.rank?h[0]:h[p*i+y]}return f.toTensor().reshape(n)},t}(ic);os.registerBackend("cpu",(function(){return new yv}),1);for(var bv=0,wv=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t,a=i.boxes,o=i.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n;vv(a,"NonMaxSuppressionWithScore");var f=Dc(h.data.get(a.dataId).values,h.data.get(o.dataId).values,l,u,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n;vv(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var l=a[s];o[s]=l*l}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Af,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,a=r.b,o=n;vv([i,a],Af);var s=o.data.get(i.dataId).values,l=o.data.get(a.dataId).values,u=function(e,t,n,r,i,a){var o=lc(e,t),s=o.length,l=_o(o),u=lo(i,Ja(o)),c=e.length,d=t.length,h=_o(e),f=_o(t),p=oc(e,o),m=oc(t,o);if(p.length+m.length===0)for(var g=0;g<u.length;++g)u[g]=a(n[g%n.length],r[g%r.length]);else{var v=function(e){var t=Po(e,s,l),i=t.slice(-c);p.forEach((function(e){return i[e]=0}));var o=Ao(i,c,h),g=t.slice(-d);m.forEach((function(e){return g[e]=0}));var v=Ao(g,d,f);u[e]=a(n[o],r[v])};for(g=0;g<u.length;++g)v(g)}return[u,o]}(i.shape,a.shape,s,l,i.dtype,(function(e,t){var n=e-t;return n*n})),c=u[0],d=u[1];return{dataId:o.write(c,d,i.dtype),shape:d,dtype:i.dtype}}}];bv<wv.length;bv++)Wa(wv[bv]);for(var kv,_v=function(e){this.variableNames=["A"];var t=Gc(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Cv=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Gc(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Sv=0,Ev=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.pixels,a=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,l=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=l[0],c=l[1],d=[c,u],h=[c,u,a];(s||o)&&(null==kv&&(kv=document.createElement("canvas").getContext("2d")),kv.canvas.width=u,kv.canvas.height=c,kv.drawImage(i,0,0,u,c),i=kv.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=cs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);var p=Oa().getBool("WEBGL_PACK")?new Cv(h):new _v(h),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;pl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,a=i.boxes,o=i.scores,s=r,l=s.maxOutputSize,u=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n,f=Dc(h.readSync(a.dataId),h.readSync(o.dataId),l,u,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n,a=new tf(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Af,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,a=r.b,o=n,s=Oa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yd("return (a - b) * (a - b);",i.shape,a.shape):new vd("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];Sv<Ev.length;Sv++)Wa(Ev[Sv]);for(var Nv=0,Rv=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Af,gradFunc:function(e,t){var n=t[0],r=t[1],i=Ol(2);return{a:function(){return Xp(e,Xp(i,Zp(n,r)))},b:function(){return Xp(e,Xp(i,Zp(r,n)))}}}}];Nv<Rv.length;Nv++)Va(Rv[Nv]);var Tv=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Oa().get("IS_BROWSER")&&Oa().setPlatform("browser",new Tv);var Iv,Dv=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Oa().global.fetch?Oa().global.fetch(e,t):(null==Iv&&(Iv=n(522)),Iv(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Oa().get("IS_NODE")&&Oa().setPlatform("node",new Dv);var Av={float32:4,int32:4,uint16:2,uint8:1,bool:1},Pv=4;function Mv(e,t){for(var n={},r=0,i=function(t){var i=t.name,a=t.dtype,o=t.shape,s=Ja(o),l=void 0;if("quantization"in t){var u=t.quantization;if("uint8"!==u.dtype&&"uint16"!==u.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+u.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Av[u.dtype],d=e.slice(r,r+s*c),h="uint8"===u.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===a)l=Float32Array.from(h,(function(e){return e*u.scale+u.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=Int32Array.from(h,(function(e){return Math.round(e*u.scale+u.min)}))}r+=s*c}else if("string"===a){var f=Ja(t.shape);l=[];for(var p=0;p<f;p++){var m=new Uint32Array(e.slice(r,r+Pv))[0];r+=Pv;var g=new Uint8Array(e.slice(r,r+m));l.push(g),r+=m}}else{var v=Av[a];if(d=e.slice(r,r+s*v),"float32"===a)l=new Float32Array(d);else if("int32"===a)l=new Int32Array(d);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);l=new Uint8Array(d)}r+=s*v}n[i]=Pl(l,o,a)},a=0,o=t;a<o.length;a++)i(o[a]);return n}function Ov(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),i=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}var Fv="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function jv(e){return Fv?Buffer.byteLength(e):new Blob([e]).size}function Lv(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Bv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function zv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:jv(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:jv(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Wv=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&i.push(n)})),i},e}(),Vv="://",Uv=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Xa(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Vv)&&(t=t.slice(0,t.indexOf(Vv))),Xa(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Xa(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Hv(e){if(-1===e.indexOf(Vv))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Uv.getSchemes().join(","));return{scheme:e.split(Vv)[0],path:e.split(Vv)[1]}}function Gv(e,t,n){return void 0===n&&(n=!1),Aa(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,d;return Pa(this,(function(h){switch(h.label){case 0:return Xa(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Xa((r=Wv.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Xa(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),i=r[0],Xa((a=Wv.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Xa(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=a[0],s=Hv(e).scheme,l=Hv(e).path,u=s===Hv(e).scheme,[4,i.load()];case 1:return c=h.sent(),n&&u?[4,Uv.getManager(s).removeModel(l)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,o.save(c)];case 4:return d=h.sent(),!n||u?[3,6]:[4,Uv.getManager(s).removeModel(l)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var qv="models_store",Kv="model_info_store";function Xv(){if(!Oa().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Yv(e){var t=e.result;t.createObjectStore(qv,{keyPath:"modelPath"}),t.createObjectStore(Kv,{keyPath:"modelPath"})}var $v=function(){function e(e){if(this.indexedDB=Xv(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Yv(i)},i.onsuccess=function(){var a=i.result;if(null==t){var o=a.transaction(qv,"readonly"),s=o.objectStore(qv).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return a.close(),r(s.error)},o.oncomplete=function(){return a.close()}}else{var l,u=zv(t),c=a.transaction(Kv,"readwrite"),d=c.objectStore(Kv),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:u});h.onsuccess=function(){var i=(l=a.transaction(qv,"readwrite")).objectStore(qv).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:u});i.onsuccess=function(){return e({modelArtifactsInfo:u})},i.onerror=function(e){var t=(d=c.objectStore(Kv)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(i.error)},t.onerror=function(e){return a.close(),r(i.error)}}},h.onerror=function(e){return a.close(),r(h.error)},c.oncomplete=function(){null==l?a.close():l.oncomplete=function(){return a.close()}}}},i.onerror=function(e){return r(i.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Qv=function(e){return Oa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith($v.URL_SCHEME)?(t=e.slice($v.URL_SCHEME.length),new $v(t)):null;var t};Wv.registerSaveRouter(Qv),Wv.registerLoadRouter(Qv);var Jv=function(){function e(){this.indexedDB=Xv()}return e.prototype.listModels=function(){return Aa(this,void 0,void 0,(function(){var e=this;return Pa(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Yv(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(Kv,"readonly"),a=i.objectStore(Kv).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var i=r[n];e[i.modelPath]=i.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Aa(this,void 0,void 0,(function(){var t=this;return Pa(this,(function(n){var r;return e=(r=e).startsWith($v.URL_SCHEME)?r.slice($v.URL_SCHEME.length):r,[2,new Promise((function(n,r){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Yv(i)},i.onsuccess=function(){var t,a=i.result,o=a.transaction(Kv,"readwrite"),s=o.objectStore(Kv),l=s.get(e);l.onsuccess=function(){if(null==l.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var i=s.delete(e),o=function(){var i=(t=a.transaction(qv,"readwrite")).objectStore(qv).delete(e);i.onsuccess=function(){return n(l.result.modelArtifactsInfo)},i.onerror=function(e){return r(l.error)}};i.onsuccess=o,i.onerror=function(e){return o(),a.close(),r(l.error)}},l.onerror=function(e){return a.close(),r(l.error)},o.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},i.onerror=function(e){return r(i.error)}}))]}))}))},e}();if(Oa().getBool("IS_BROWSER"))try{Uv.registerManager($v.URL_SCHEME,new Jv)}catch(oM){}var Zv="/",ex="tensorflowjs_models",tx="info",nx="model_topology",rx="weight_specs",ix="weight_data",ax="model_metadata";function ox(e){return{info:[ex,e,tx].join(Zv),topology:[ex,e,nx].join(Zv),weightSpecs:[ex,e,rx].join(Zv),weightData:[ex,e,ix].join(Zv),modelMetadata:[ex,e,ax].join(Zv)}}function sx(e){var t=e.split(Zv);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Zv)}var lx=function(){function e(e){if(!Oa().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ox(this.modelPath)}return e.prototype.save=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r;return Pa(this,(function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=zv(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Fv)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Aa(this,void 0,void 0,(function(){var e,t,n,r,i,a,o;return Pa(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(i),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Fv){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(o),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),ux=function(e){return Oa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(lx.URL_SCHEME)?(t=e.slice(lx.URL_SCHEME.length),new lx(t)):null;var t};Wv.registerSaveRouter(ux),Wv.registerLoadRouter(ux);var cx=function(){function e(){Xa(Oa().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Xa("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Aa(this,void 0,void 0,(function(){var e,t,n,r,i,a;return Pa(this,(function(o){for(e={},t=ex+Zv,n=Zv+tx,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(a=sx(i),e[a]=JSON.parse(this.LS.getItem(i)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Aa(this,void 0,void 0,(function(){var t,n;return Pa(this,(function(r){var i;if(e=(i=e).startsWith(lx.URL_SCHEME)?i.slice(lx.URL_SCHEME.length):i,t=ox(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Oa().getBool("IS_BROWSER"))try{Uv.registerManager(lx.URL_SCHEME,new cx)}catch(oM){}function dx(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var hx=function(){function e(t){if(!Oa().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r,i,a,o;return Pa(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,dx((function(){return a.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,dx((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:zv(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),fx=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Aa(this,void 0,void 0,(function(){var e,t,n=this;return Pa(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,i){var a=new FileReader;a.onload=function(a){var o=JSON.parse(a.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var l=o.weightsManifest;if(null!=l){var u;try{u=n.checkManifestAndWeightFiles(l,t)}catch(e){return void i(e)}var c=[],d=[],h=[];l.forEach((function(e){e.paths.forEach((function(e){d.push(e),h.push(null)})),c.push.apply(c,e.weights)})),l.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,i=d.indexOf(e);h[i]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Lv(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(u[e])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Bv(e.name)})),i={},a=0,o=e;a<o.length;a++)o[a].paths.forEach((function(e){var a=Bv(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");i[e]=t[r.indexOf(a)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},e}();function px(e,t,n,r){!function(e){Xa(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Xa(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Xa(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Xa(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map((function(a){return a.then((function(a){var o=n+ ++i/e.length*(r-n);return t(o),a})),a})))}function mx(e,t){return Aa(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c;return Pa(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Oa().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),i=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=d.sent(),[3,4];case 2:return[4,px(r,t.onProgress,i,a)];case 3:o=d.sent(),d.label=4;case 4:return s=o.map((function(e){return e.arrayBuffer()})),l=.5,u=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,px(s,t.onProgress,l,u)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function gx(e){var t=this;return function(n,r,i){return void 0===r&&(r=""),Aa(t,void 0,void 0,(function(){var t,a,o,s,l,u,c,d,h,f;return Pa(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),a={},o=null!=i?i.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var l="quantization"in e?e.quantization.dtype:e.dtype,u=Av[l]*Ja(e.shape),c=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:u})};null!=i?i.forEach((function(t,n){t===e.name&&(c(),o[n]=!0)})):c(),s.push(e.name),r+=u}))})),!o.every((function(e){return e})))throw l=i.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return u=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],u.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=p.sent(),h={},f=0,u.forEach((function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=d[f+i].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),l=0,u=0;u<t;u++){var c=new Uint8Array(d[f+u]);s.set(c,l),l+=c.byteLength}a[e].forEach((function(e){var t=Mv(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),f+=t})),[2,h]}}))}))}}Wv.registerSaveRouter((function(e){return Oa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(hx.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new hx(e)}(e.slice(hx.URL_SCHEME.length)):null}));var vx=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Xa("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Oa().platform.fetch,Xa(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Xa(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r,i;return Pa(this,(function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:zv(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}}))}))},e.prototype.load=function(){return Aa(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,s,l,u,c,d;return Pa(this,(function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return t=h.sent(),[3,5];case 4:throw h.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,a=t.generatedBy,o=t.convertedBy,s=t.format,l=t.userDefinedMetadata,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:d=h.sent(),u=d[0],c=d[1],h.label=7;case 7:return[2,{modelTopology:r,weightSpecs:u,weightData:c,userDefinedMetadata:l,generatedBy:a,convertedBy:o,format:s}]}}))}))},e.prototype.loadWeights=function(e){return Aa(this,void 0,void 0,(function(){var t,n,r,i,a,o,s,l,u,c,d;return Pa(this,(function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],a=this.weightPathPrefix||r,o=[],s=0,l=e;s<l.length;s++)u=l[s],o.push.apply(o,u.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(a+e+i)}))})),[4,mx(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[o,Lv(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function xx(e){return null!=e.match(vx.URL_SCHEME_REGEX)}var yx=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return xx(e)})):xx(e))?bx(e,{onProgress:t}):null};function bx(e,t){return new vx(e,t)}Wv.registerSaveRouter(yx),Wv.registerLoadRouter(yx);var wx,kx=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),_x=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Cx=Object.freeze({browserFiles:function(e){return new fx(e)},browserHTTPRequest:function(e,t){return bx(e,t)},concatenateArrayBuffers:Lv,decodeWeights:Mv,encodeWeights:function(e,t){return Aa(this,void 0,void 0,(function(){var n,r,i,a,o,s=this;return Pa(this,(function(l){switch(l.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),a=function(a){var o=i[a],l=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+l.dtype);var u={name:o,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var c=new Promise((function(e){return Aa(s,void 0,void 0,(function(){var t,n,r,i,a,o,s;return Pa(this,(function(u){switch(u.label){case 0:return[4,l.bytes()];case 1:for(t=u.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+Pv*t.length,r=new Uint8Array(n),i=0,a=0;a<t.length;a++)o=t[a],s=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(s,i),i+=Pv,r.set(o,i),i+=o.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(l.data());null!=t&&(u.group=t),n.push(u)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:Ov(l.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new kx(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kx({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kx({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Wv.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:zv,getSaveHandlers:function(e){return Wv.getSaveHandlers(e)},http:bx,isHTTPScheme:xx,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Aa(this,void 0,void 0,(function(){return Pa(this,(function(i){return[2,gx((function(e){return mx(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return Wv.registerLoadRouter(e)},registerSaveRouter:function(e){return Wv.registerSaveRouter(e)},weightsLoaderFactory:gx,withSaveHandler:function(e){return new _x(e)},copyModel:function(e,t){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(n){return[2,Gv(e,t,!1)]}))}))},listModels:function(){return Aa(this,void 0,void 0,(function(){var e,t,n,r,i,a,o;return Pa(this,(function(s){switch(s.label){case 0:e=Uv.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],[4,Uv.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())t[i+Vv+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(n){return[2,Gv(e,t,!0)]}))}))},removeModel:function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){return t=Hv(e),[2,Uv.getManager(t.scheme).removeModel(t.path)]}))}))}}),Sx=Tl({confusionMatrix_:function(e,t,n){var r=vl(e,"labels","confusionMatrix"),i=vl(t,"predictions","confusionMatrix");Xa(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Xa(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Xa(1===i.rank,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),Xa(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),Xa(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=bu(r.asType("int32"),n),o=bu(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}}),Ex=(Object.freeze({confusionMatrix:Sx}),Tl({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(i&&i&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Ba("FromPixels",os.backendName))return os.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,l,u=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=u[0],d=u[1];if(o?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(a||i)&&(null==wx&&(wx=document.createElement("canvas").getContext("2d")),wx.canvas.width=c,wx.canvas.height=d,wx.drawImage(e,0,0,c,d),s=wx.getImageData(0,0,c,d).data),4===t)l=new Int32Array(s);else{var h=c*d;l=new Int32Array(h*t);for(var f=0;f<h;f++)for(var p=0;p<t;++p)l[f*t+p]=s[4*f+p]}return Ll(l,[d,c,t],"int32")}})),Nx=Object.freeze({toPixels:function(e,t){return Aa(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w,k,_,C;return Pa(this,(function(S){switch(S.label){case 0:if(n=vl(e,"img","toPixels"),e instanceof Ho||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=S.sent(),l=n.min(),u=n.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(c=S.sent(),d=c[0],h=c[1],f=d[0],p=h[0],l.dispose(),u.dispose(),"float32"===n.dtype){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*i*4),v=0;v<i*a;++v)x=void 0,y=void 0,b=void 0,w=void 0,1===o?(x=s[v]*m,y=s[v]*m,b=s[v]*m,w=255):3===o?(x=s[3*v]*m,y=s[3*v+1]*m,b=s[3*v+2]*m,w=255):4===o&&(x=s[4*v]*m,y=s[4*v+1]*m,b=s[4*v+2]*m,w=s[4*v+3]*m),g[0+(k=4*v)]=Math.round(x),g[k+1]=Math.round(y),g[k+2]=Math.round(b),g[k+3]=Math.round(w);return null!=t&&(t.width=a,t.height=i,_=t.getContext("2d"),C=new ImageData(g,a,i),_.putImageData(C,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:Ex}),Rx=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Tx=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Ix(e){Xa(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Xa("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Xa(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Tx.register(e)}Object.freeze({Serializable:Rx,SerializationMap:Tx,registerClass:Ix});function Dx(){return 32===os.backend.floatPrecision()?.001:.1}function Ax(e,t,n){var r=!0;if((po(e)||po(t))&&(r=!1),po(e)&&po(t)&&(r=!0),r){var i=e.constructor.name,a=t.constructor.name;if(i!==a)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var o=ml(e),s=ml(t);if(!Za(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var l=po(e)?e:Qa(e),u=po(t)?t:Qa(t);if(l.length!==u.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+u.length+".\nActual:   "+l+".\nExpected: "+u+".");for(var c=0;c<u.length;++c){var d=l[c],h=u[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+".\nActual:   "+l+".\nExpected: "+u+".")}}function Px(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=Dx()),Ax(e,t,(function(e,t){return Px(e,t,n)}))},testEpsilon:Dx,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return vo(e)||vo(e[0])||vo(t)||vo(t[0])?Ax(e,n,(function(e,t){return e==t})):Ax(e,t,(function(e,t){return Px(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=Dx()),!Px(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:ph,webgl_util:ul,forceHalfFloat:function(){Oa().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:If,setWebGLContext:ps,GPGPUContext:mh});var Mx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Da(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),i=r.value,a=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:a[e.name]}}));this.applyGradients(o)}else this.applyGradients(a);return fl(a),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Xa(wo(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Xa(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof $o})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],os.registeredVariables)t.push(os.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,a=t.length;Xa((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var o=os.gradients(e,t,null,!0),s=o.value,l=o.grads;Xa(l.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Xa(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var u={};return t.forEach((function(e,t){null!=l[t]&&(u[e.name]=l[t])})),null!=i&&i.forEach((function(e){return u[e.name]=null})),{value:s,grads:u}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&fl(this.iterations_)},t.prototype.saveIterations=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Ol(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(Rx);Object.defineProperty(Mx,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Ox=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=os.backend.epsilon()),i}return Da(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=os.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:hl((function(){return Gl(i).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:hl((function(){return Gl(i).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;hl((function(){var e=o.mul(t.rho).add(a.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(a),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var l=n.mul(-t.learningRate).add(i);i.assign(l)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(fl(this.accumulatedGrads.map((function(e){return e.variable}))),fl(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(Mx);Ix(Ox);var Fx=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Da(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=os.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:hl((function(){return Vl(i.shape,t.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable;hl((function(){var e=o.add(a.square());o.assign(e);var n=a.div(e.add(os.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i);i.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&fl(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Mx);Ix(Fx);var jx=function(e){function t(t,n,r,i){void 0===i&&(i=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],hl((function(){a.accBeta1=Ol(n).variable(),a.accBeta2=Ol(r).variable()})),null==i&&(a.epsilon=os.backend.epsilon()),a}return Da(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hl((function(){var r=Zp(1,t.accBeta1),i=Zp(1,t.accBeta2);n.forEach((function(n,a){var o=os.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:hl((function(){return Gl(o).variable(!1)}))}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:hl((function(){return Gl(o).variable(!1)}))});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[a].variable,u=t.accumulatedSecondMoment[a].variable,c=l.mul(t.beta1).add(s.mul(1-t.beta1)),d=u.mul(t.beta2).add(s.square().mul(1-t.beta2)),h=c.div(r),f=d.div(i);l.assign(c),u.assign(d);var p=h.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&fl(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&fl(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){var t,n=this;return Pa(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),hl((function(){n.accBeta1.assign($p(n.beta1,n.iterations_+1)),n.accBeta2.assign($p(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Mx);Ix(jx);var Lx=function(e){function t(t,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=a,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],hl((function(){o.iteration=Ol(0).variable(),o.accBeta1=Ol(n).variable()})),null==i&&(o.epsilon=os.backend.epsilon()),o}return Da(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hl((function(){var r=Zp(1,t.accBeta1),i=Lp(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,a){var o=os.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Gl(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Gl(o).variable(!1)});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[a].variable,u=t.accumulatedWeightedInfNorm[a].variable,c=l.mul(t.beta1).add(s.mul(1-t.beta1)),d=u.mul(t.beta2),h=s.abs(),f=d.maximum(h);l.assign(c),u.assign(f);var p=i.div(r).mul(c.div(f.add(t.epsilon))).add(o);o.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&fl(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&fl(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Mx);Ix(Lx);var Bx=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Da(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=os.registeredVariables[n];hl((function(){var e=t.c.mul(i).add(a);a.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return os.keep(e)}(Ol(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Mx);Ix(Bx);var zx=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Ol(i.momentum),i}return Da(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=os.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:hl((function(){return Gl(i).variable(!1)}))});var a=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&hl((function(){var e,n=t.m.mul(a).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),a.assign(n),i.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&fl(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){return Pa(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Bx);Ix(zx);var Wx=function(e){function t(t,n,r,i,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===a&&(a=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=a,null==i&&(o.epsilon=os.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return Da(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=os.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:hl((function(){return Gl(i).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:hl((function(){return Gl(i).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:hl((function(){return Gl(i).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;hl((function(){var e=o.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,l=n.mul(t.decay).add(a.mul(1-t.decay)),u=s.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(l.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(l),s.assign(u);var c=i.sub(u);i.assign(c)}else{var d=o.mul(t.decay).add(a.square().mul(1-t.decay));u=s.mul(t.momentum).add(a.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),o.assign(d),s.assign(u),c=i.sub(u),i.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&fl(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&fl(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&fl(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Aa(this,void 0,void 0,(function(){var e;return Pa(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Aa(this,void 0,void 0,(function(){var t;return Pa(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Mx);Ix(Wx);var Vx=function(){function e(){}return e.sgd=function(e){return new Bx(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new zx(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new Wx(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new jx(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Ox(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new Lx(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Fx(e,t)},e}();Vx.sgd,Vx.momentum,Vx.adadelta,Vx.adagrad,Vx.rmsprop,Vx.adamax,Vx.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;function Ux(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var i=n.x,a=n.y,o=t[r];e.moveTo(o.x,o.y),e.lineTo(i,a)})),n){var r=t[t.length-1],i=t[0];if(!r||!i)return;e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}Ho.prototype.squaredDifference=function(e){return Pf(this,e)},Vo=gv;var Hx=function(e,t){return Hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Hx(e,t)};function Gx(e,t){function n(){this.constructor=e}Hx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qx=function(){return qx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qx.apply(this,arguments)};function Kx(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(bt){a(bt)}}function s(e){try{l(r.throw(e))}catch(bt){a(bt)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function Xx(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(bt){a=[6,bt],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Yx(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var $x=function(){function e(e,t){if(!ay(e)||!ay(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Qx(e,t){return e instanceof Ho&&e.shape.length===t}function Jx(e){return Qx(e,3)}function Zx(e){return Qx(e,4)}function ey(e){return e%2===0}function ty(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function ny(e){return e&&e.width&&e.height}function ry(e){return e.reduce((function(e,t){return e.add(t)}),new sy(0,0)).div(new sy(e.length,e.length))}function iy(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function ay(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function oy(e){return ay(e)&&0<=e&&e<=1}var sy=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),ly=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(ay),a=[r.x,r.y,r.width,r.height].every(ay);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],l=o[1],u=o[2],c=o[3];e.assertIsValidBox({x:s,y:l,width:u,height:c},"Box.constructor",n),this._x=s,this._y=l,this._width=u,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(ay)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new sy(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new sy(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new sy(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new sy(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,i=t.width,a=t.height,o=Math.abs(i-a);return i<a&&(n-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new e({x:n,y:r,width:i,height:a})},e.prototype.rescale=function(t){var n=ny(t)?t.width:t,r=ny(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,l=Math.max(i,0),u=Math.max(a,0),c=o-l,d=s-u;return new e({x:l,y:u,width:Math.min(c,t-l),height:Math.min(d,n-u)}).floor()},e.prototype.shift=function(t,n){var r=this.width,i=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:i})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,i=n,a=r,o=this.left,s=this.top,l=this.right,u=this.bottom;return l>t&&(i=-l+t+n,l=t),u>e&&(a=-u+e+r,u=e),o<1&&(a=2-o,o=1),s<1&&(a=2-s,s=1),{dy:1,edy:a,dx:1,edx:i,y:s,ey:u,x:o,ex:l,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),uy=function(e){function t(t,n,r,i,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:r,bottom:i},a)||this}return Gx(t,e),t}(ly),cy=function(){function e(e,t,n,r,i){this._imageDims=new $x(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new ly(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new ly(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),dy=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Gx(t,e),t.prototype.forSize=function(n,r){var i=e.prototype.forSize.call(this,n,r);return new t(i.score,i.relativeBox,i.imageDims)},t}(cy);function hy(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function fy(e,t,n,r){void 0===r&&(r=!0);for(var i=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),a=[],o=function(){var t=i.pop();a.push(t);for(var o=i,s=[],l=0;l<o.length;l++){var u=o[l],c=e[t],d=e[u];s.push(hy(c,d,r))}i=i.filter((function(e,t){return s[t]<=n}))};i.length>0;)o();return a}function py(e,t){return hl((function(){var n=t[0],r=t[1],i=t[2],a=Vl(Yx(e.shape.slice(0,3),[1]),n),o=Vl(Yx(e.shape.slice(0,3),[1]),r),s=Vl(Yx(e.shape.slice(0,3),[1]),i),l=ql([a,o,s],3);return Zp(e,l)}))}function my(e){return 1/(1+Math.exp(-e))}var gy,vy=function(e){function t(t,n,r,i,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:r,height:i},a)||this}return Gx(t,e),t}(ly),xy=function(){function e(e,t,n){void 0===n&&(n=new sy(0,0));var r=t.width,i=t.height;this._imgDims=new $x(r,i),this._shift=n,this._positions=e.map((function(e){return e.mul(new sy(r,i)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new sy(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new sy(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new sy(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof dy?e.box.floor():new ly(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=r.useDlibAlignment,a=r.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],i=function(e){return r.sub(e).magnitude()},a=(i(t)+i(n))/2,o=Math.floor(a/.45),s=ry(e),l=Math.floor(Math.max(0,s.x-.5*o)),u=Math.floor(Math.max(0,s.y-.43*o));return new vy(l,u,Math.min(o,this.imageWidth+l),Math.min(o,this.imageHeight+u))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),i=n.reduce((function(e,t){return t<e?t:e}),1/0),a=t.reduce((function(e,t){return e<t?t:e}),0),o=n.reduce((function(e,t){return e<t?t:e}),0);return new uy(r,i,a,o)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],ry([e[3],e[4]])]},t}(xy),by=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(ry)},t}(xy),wy=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+ty(this.distance)+")":"")},e}(),ky=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Gx(t,e),t.assertIsValidLabeledBox=function(e,t){if(ly.assertIsValidBox(e,t),!ay(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(ly),_y=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a._score=r,a._classScore=i,a}Gx(t,e),t.assertIsValidPredictedBox=function(e,t){if(ky.assertIsValidLabeledBox(e,t),!oy(e.score)||!oy(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(ky);function Cy(e){return e.detection instanceof dy}function Sy(e,t){var n={detection:t};return Object.assign({},e,n)}function Ey(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function Ny(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function Ry(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=Ny();return qx({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},i)}function Ty(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function Iy(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function Dy(e){gy=e}function Ay(){Ty()&&Dy(Ey()),Iy()&&Dy(Ry())}var Py,My={getEnv:function(){if(!gy)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return gy},setEnv:Dy,initialize:Ay,createBrowserEnv:Ey,createFileSystem:Ny,createNodejsEnv:Ry,monkeyPatch:function(e){if(gy||Ay(),!gy)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?gy.Canvas:t,r=e.Image,i=void 0===r?gy.Image:r;gy.Canvas=n,gy.Image=i,gy.createCanvasElement=e.createCanvasElement||function(){return new n},gy.createImageElement=e.createImageElement||function(){return new i},gy.ImageData=e.ImageData||gy.ImageData,gy.Video=e.Video||gy.Video,gy.fetch=e.fetch||gy.fetch,gy.readFile=e.readFile||gy.readFile},isBrowser:Ty,isNodejs:Iy};function Oy(e){return My.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function Fy(e){var t=My.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=Oy(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}Ay(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(Py||(Py={}));var jy=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,i=e.fontSize,a=e.fontStyle,o=e.padding;this.anchorPosition=t||Py.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=a||"Georgia",this.padding=o||4},Ly=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new jy(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Py.BOTTOM_RIGHT||n===Py.TOP_RIGHT,i=n===Py.BOTTOM_LEFT||n===Py.BOTTOM_RIGHT,a=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-a:this.anchor.x,l=i?this.anchor.y-o:this.anchor.y;if(t){var u=t.width,c=t.height;return{x:Math.max(Math.min(s,u-a),0),y:Math.max(Math.min(l,c-o),0)}}return{x:s,y:l}},e.prototype.draw=function(e){var t=Oy(e),n=Fy(t),r=this.options,i=r.backgroundColor,a=r.fontColor,o=r.fontSize,s=r.fontStyle,l=r.padding;n.font=o+"px "+s;var u=this.measureWidth(n),c=this.measureHeight();n.fillStyle=i;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,u,c),n.fillStyle=a,this.text.forEach((function(e,t){var r=l+d.x,i=l+d.y+(t+1)*o;n.fillText(e,r,i)}))},e}(),By=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var a={anchorPosition:Py.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new jy(Object.assign({},a,i))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new ly(e),this.options=new By(t)}e.prototype.draw=function(e){var t=Fy(e),n=this.options,r=n.boxColor,i=n.lineWidth,a=this.box,o=a.x,s=a.y,l=a.width,u=a.height;t.strokeStyle=r,t.lineWidth=i,t.strokeRect(o,s,l,u);var c=this.options.label;c&&new Ly([c],{x:o-i/2,y:s},this.options.drawLabelOptions).draw(e)}}();function zy(e){var t=My.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Wy(e){var t=My.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new $x(e.naturalWidth,e.naturalHeight):e instanceof r?new $x(e.videoWidth,e.videoHeight):new $x(e.width,e.height)}function Vy(e){var t=e.width,n=e.height,r=(0,My.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Uy(e,t){var n=My.getEnv().ImageData;if(!(e instanceof n)&&!zy(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Wy(e),i=r.width,a=r.height,o=Vy({width:i,height:a});return e instanceof n?Fy(o).putImageData(e,0,0):Fy(o).drawImage(e,0,0,i,a),o}function Hy(e,t){return Kx(this,void 0,void 0,(function(){var n,r,i,a,o,s;return Xx(this,(function(l){switch(l.label){case 0:return n=t||My.getEnv().createCanvasElement(),r=e.shape.slice(Zx(e)?1:0),i=r[0],a=r[1],o=r[2],s=hl((function(){return e.as3D(i,a,o).toInt()})),[4,Nx.toPixels(s,n)];case 1:return l.sent(),s.dispose(),[2,n]}}))}))}function Gy(e){var t=My.getEnv(),n=t.Image,r=t.Canvas,i=t.Video;return e instanceof n||e instanceof r||e instanceof i}var qy=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(Jx(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(Zx(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var i=e instanceof My.getEnv().Canvas?e:Uy(e);n._canvases[t]=i,n._inputDimensions[t]=[i.height,i.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return iy(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,i=t/Math.max(r,n);return new $x(Math.round(n*i),Math.round(r*i))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,hl((function(){var r=iy(n.batchSize,0,1).map((function(r){var i=n.getInput(r);if(i instanceof Ho){var a=Zx(i)?i:i.expandDims();return a=function(e,t){return void 0===t&&(t=!1),hl((function(){var n=e.shape.slice(1),r=n[0],i=n[1];if(r===i)return e;var a=Math.abs(r-i),o=Math.round(a*(t?.5:1)),s=r>i?2:1,l=function(t){var n=e.shape.slice();return n[s]=t,Vl(n,0)},u=l(o),c=a-u.shape[s],d=[t&&c?l(c):null,e,u].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return ql(d,s)}))}(a,t),a.shape[1]===e&&a.shape[2]===e||(a=sv.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(i instanceof My.getEnv().Canvas)return Nx.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=My.getEnv(),i=r.Image,a=r.Canvas;if(!(e instanceof i||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=Wy(e),s=t/Math.max(o.height,o.width),l=s*o.width,u=s*o.height,c=Vy({width:t,height:t}),d=e instanceof a?e:Uy(e),h=Math.abs(l-u)/2,f=n&&l<u?h:0,p=n&&u<l?h:0;return Fy(c).drawImage(d,f,p,l,u),c}(i,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)})),i=Pu(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return i}))},e}();function Ky(e){return Kx(this,void 0,void 0,(function(){var t,n,r;return Xx(this,(function(i){switch(i.label){case 0:if(e instanceof qy)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(Oy)).forEach((function(e,r){if(!Gy(e)&&!Jx(e)&&!Zx(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(Zx(e)){var i=e.shape[0];if(1!==i)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return Gy(e)&&(t=e,new Promise((function(e,n){if(t instanceof My.getEnv().Canvas||zy(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),e(t))}function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),n(e))}t.addEventListener("load",r),t.addEventListener("error",i)})));var t})))];case 1:return i.sent(),[2,new qy(r,Array.isArray(e))]}}))}))}function Xy(e,t){return Kx(this,void 0,void 0,(function(){var n,r,i,a,o,s;return Xx(this,(function(l){switch(l.label){case 0:return n=My.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Ky(e)];case 1:if((i=l.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(a=i.getInput(0))instanceof n?(o=a,[3,4]):[3,2];case 2:return[4,Hy(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=Fy(r),[2,t.map((function(e){return e instanceof dy?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=Vy({width:r,height:i});return Fy(a).putImageData(s.getImageData(t,n,r,i),0,0),a}))]}}))}))}function Yy(e,t){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(n){if(!Jx(e)&&!Zx(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Zx(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,hl((function(){var n=e.shape.slice(Zx(e)?1:0),r=n[0],i=n[1],a=n[2],o=t.map((function(e){return e instanceof dy?e.forSize(i,r).box:e})).map((function(e){return e.clipAtImageBorders(i,r)})).map((function(t){var n=t.x,o=t.y,s=t.width,l=t.height;return Ym(e.as3D(r,i,a),[o,n,0],[l,s,a])}));return o}))]}))}))}function $y(e,t){return Kx(this,void 0,void 0,(function(){var n;return Xx(this,(function(r){switch(r.label){case 0:return[4,(0,My.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function Qy(e){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(t){switch(t.label){case 0:return[4,$y(e)];case 1:return[2,t.sent().json()]}}))}))}function Jy(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter((function(e){return e})),a=e.endsWith(".json")?i[i.length-1]:n,o=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:o=e.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+a:o+"/"+a}}function Zy(e,t){return Kx(this,void 0,void 0,(function(){var n,r,i,a;return Xx(this,(function(o){switch(o.label){case 0:return n=Jy(e,t),r=n.manifestUri,i=n.modelBaseUri,[4,Qy(r)];case 1:return a=o.sent(),[2,Cx.loadWeights(a,i)]}}))}))}function eb(e,t,n){void 0===n&&(n=!1);var r=n?Wy(t):t,i=r.width,a=r.height;return e.width=i,e.height=a,{width:i,height:a}}var tb=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof $o}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof $o)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,i=Pl(r.dataSync());r.dispose(),e.reassignParamFromPath(n,i)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Zy(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Kx(this,void 0,void 0,(function(){var t,n,r,i,a,o,s,l,u,c;return Xx(this,(function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=My.getEnv().readFile,n=Jy(e,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,a=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},o=Cx.weightsLoaderFactory(a),u=(l=JSON).parse,[4,t(r)];case 1:return s=u.apply(l,[d.sent().toString()]),[4,o(s,i)];case 2:return c=d.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Ho))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function nb(e,t,n){return hl((function(){var r=Rm(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Mp(r,t.bias)}))}function rb(e,t,n){return void 0===n&&(n=!1),hl((function(){var r=hg(n?Mp(wm(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):nb(e,t.conv0,[2,2])),i=nb(r,t.conv1,[1,1]),a=nb(hg(Mp(r,i)),t.conv2,[1,1]);return hg(Mp(r,Mp(i,a)))}))}function ib(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),hl((function(){var i=hg(n?Mp(wm(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):nb(e,t.conv0,r?[2,2]:[1,1])),a=nb(i,t.conv1,[1,1]),o=nb(hg(Mp(i,a)),t.conv2,[1,1]),s=nb(hg(Mp(i,Mp(a,o))),t.conv3,[1,1]);return hg(Mp(i,Mp(a,Mp(o,s))))}))}function ab(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),hl((function(){var i=Mp(wm(e,t.filters,[1,1],n),t.bias);return r?hg(i):i}))}function ob(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function sb(e,t){return function(n,r,i,a){var o=Bl(e(n*r*i*i),[i,i,n,r]),s=Fl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function lb(e,t){return function(n,r,i){var a=jl(e(n*r),[n,r]),o=Fl(e(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var ub=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function cb(e,t){return function(n,r,i){var a=Bl(e(9*n),[3,3,n,1]),o=Bl(e(n*r),[1,1,n,r]),s=Fl(e(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new ub(a,o,s)}}function db(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),i=e(t+"/bias",1);return new ub(n,r,i)}}function hb(e,t){return function(n,r,i){var a=e[n];if(!Qx(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:i||n}),a}}function fb(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function pb(e,t){var n=sb(e,t),r=cb(e,t);function i(e,t,i,a){return void 0===a&&(a=!1),{conv0:a?n(e,t,3,i+"/conv0"):r(e,t,i+"/conv0"),conv1:r(t,t,i+"/conv1"),conv2:r(t,t,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(e,t,n,a){void 0===a&&(a=!1);var o=i(e,t,n,a);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(t,t,n+"/conv3")}}}}function mb(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function gb(e,t){var n=hb(e,t),r=mb(n),i=db(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2"),conv3:i(e+"/conv3")}}}}var vb=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return hl((function(){var n=ib(py(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ol(255)),t.dense0,!0);return n=ib(n,t.dense1),n=ib(n,t.dense2),n=ib(n,t.dense3),n=Vm(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=gb(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ob(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,i=n.getRemainingWeights,a=pb(r,t).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),l=a(64,128,"dense2"),u=a(128,256,"dense3");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l,dense3:u}}}(e)},t}(tb);function xb(e,t){return hl((function(){return Mp(Dm(e,t.weights),t.bias)}))}function yb(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var bb=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Gx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return hl((function(){var r=e instanceof qy?t.faceFeatureExtractor.forwardInput(e):e;return xb(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],i=fb(e),a=i.extractWeights,o=i.getRemainingWeights,s=lb(a,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=yb(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=hb(e,t),r={fc:function(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}("fc")};return ob(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},t}(tb),wb=["neutral","happy","sad","angry","fearful","disgusted","surprised"],kb=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);wb.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return wb.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),_b=function(e){function t(t){return void 0===t&&(t=new vb),e.call(this,"FaceExpressionNet",t)||this}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this;return hl((function(){return tc(t.runNet(e))}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Kx(this,void 0,void 0,(function(){var t,n,r,i,a=this;return Xx(this,(function(o){switch(o.label){case 0:return[4,Ky(e)];case 1:return t=o.sent(),[4,this.forwardInput(t)];case 2:return n=o.sent(),[4,Promise.all(Fu(n).map((function(e){return Kx(a,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=o.sent(),n.dispose(),i=r.map((function(e){return new kb(e)})),[2,t.isBatchInput?i:i[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(bb);function Cb(e,t){var n={expressions:t};return Object.assign({},e,n)}function Sb(e){return Cy(e)&&e.landmarks instanceof xy&&e.unshiftedLandmarks instanceof xy&&e.alignedRect instanceof dy}function Eb(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),i=r.align(),a=e.detection.imageDims,o={landmarks:r,unshiftedLandmarks:t,alignedRect:new dy(e.detection.score,i.rescale(a.reverse()),a)};return Object.assign({},e,o)}var Nb=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,i=void 0===r||r,a=e.lineWidth,o=e.lineColor,s=e.pointSize,l=e.pointColor;this.drawLines=n,this.drawPoints=i,this.lineWidth=a||1,this.pointSize=s||2,this.lineColor=o||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"},Rb=function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new Nb(t)}return e.prototype.draw=function(e){var t=Fy(e),n=this.options,r=n.drawLines,i=n.drawPoints,a=n.lineWidth,o=n.lineColor,s=n.pointSize,l=n.pointColor;if(r&&this.faceLandmarks instanceof by&&(t.strokeStyle=o,t.lineWidth=a,Ux(t,this.faceLandmarks.getJawOutline()),Ux(t,this.faceLandmarks.getLeftEyeBrow()),Ux(t,this.faceLandmarks.getRightEyeBrow()),Ux(t,this.faceLandmarks.getNose()),Ux(t,this.faceLandmarks.getLeftEye(),!0),Ux(t,this.faceLandmarks.getRightEye(),!0),Ux(t,this.faceLandmarks.getMouth(),!0)),i){t.strokeStyle=l,t.fillStyle=l;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}},e}();function Tb(e,t){var n=[],r=fb(e),i=r.extractWeights,a=r.getRemainingWeights,o=function(e,t){var n=sb(e,t),r=cb(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,i){return{separable_conv0:r(e,t,i+"/separable_conv0"),separable_conv1:r(t,t,i+"/separable_conv1"),expansion_conv:n(e,t,1,i+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(i,n),s=o.extractConvParams,l=o.extractSeparableConvParams,u=o.extractReductionBlockParams,c=o.extractMainBlockParams,d={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:u(32,64,"entry_flow/reduction_block_0"),reduction_block_1:u(64,128,"entry_flow/reduction_block_1")},h={};iy(t,0,1).forEach((function(e){h["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var f={reduction_block:u(128,256,"exit_flow/reduction_block"),separable_conv:l(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:h,exit_flow:f}}}function Ib(e,t){var n=[],r=function(e,t){var n=hb(e,t),r=mb(n),i=db(n);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),separable_conv2:i(e+"/separable_conv2")}}}}(e,n),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,l={conv_in:i("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},u={};iy(t,0,1).forEach((function(e){u["main_block_"+e]=s("middle_flow/main_block_"+e)}));var c={reduction_block:o("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return ob(e,n),{params:{entry_flow:l,middle_flow:u,exit_flow:c},paramMappings:n}}function Db(e,t,n){return Mp(wm(e,t.filters,n,"same"),t.bias)}function Ab(e,t,n){void 0===n&&(n=!0);var r=n?hg(e):e;return r=nb(r,t.separable_conv0,[1,1]),r=nb(hg(r),t.separable_conv1,[1,1]),r=Wm(r,[3,3],[2,2],"same"),r=Mp(r,Db(e,t.expansion_conv,[2,2]))}var Pb,Mb=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return hl((function(){var r=py(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ol(256)),i=hg(Db(r,n.entry_flow.conv_in,[2,2]));return i=Ab(i,n.entry_flow.reduction_block_0,!1),i=Ab(i,n.entry_flow.reduction_block_1),iy(t._numMainBlocks,0,1).forEach((function(e){i=function(e,t){var n=nb(hg(e),t.separable_conv0,[1,1]);return n=nb(hg(n),t.separable_conv1,[1,1]),n=nb(hg(n),t.separable_conv2,[1,1]),Mp(n,e)}(i,n.middle_flow["main_block_"+e])})),i=Ab(i,n.exit_flow.reduction_block),i=hg(nb(i,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Ib(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return Tb(e,this._numMainBlocks)},t}(tb);!function(e){e.FEMALE="female",e.MALE="male"}(Pb||(Pb={}));var Ob=function(e){function t(t){void 0===t&&(t=new Mb(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Gx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return hl((function(){var r=e instanceof qy?t.faceFeatureExtractor.forwardInput(e):e,i=Vm(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:xb(i,n.fc.age).as1D(),gender:xb(i,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return hl((function(){var n=t.runNet(e),r=n.age,i=n.gender;return{age:r,gender:tc(i)}}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Kx(this,void 0,void 0,(function(){var t,n,r,i,a,o,s=this;return Xx(this,(function(l){switch(l.label){case 0:return[4,Ky(e)];case 1:return t=l.sent(),[4,this.forwardInput(t)];case 2:return n=l.sent(),r=Fu(n.age),i=Fu(n.gender),a=r.map((function(e,t){return{ageTensor:e,genderTensor:i[t]}})),[4,Promise.all(a.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Kx(s,void 0,void 0,(function(){var e,r,i,a,o;return Xx(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],a=(i=r>.5)?Pb.MALE:Pb.FEMALE,o=i?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:o}]}}))}))})))];case 3:return o=l.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,i=n.getRemainingWeights,a=lb(r,t),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=yb(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=hb(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ob(e,t),{params:i,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(tb),Fb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,i=t/Math.max(r,n);return{width:n*i,height:r*i}})),i=r.length;return hl((function(){var n=function(e,t){return Pu([Vl([68],e),Vl([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=r[e],i=n.width,a=n.height;return t(i,a)?Math.abs(i-a)/2:0},o=e.mul(Vl([i,136],t)).sub(Pu(Array.from(Array(i),(function(e,t){return n(function(e){return a(e,(function(e,t){return e<t}))}(t),function(e){return a(e,(function(e,t){return t<e}))}(t))})))).div(Pu(Array.from(Array(i),(function(e,t){return n(r[t].width,r[t].height)}))));return o}))},t.prototype.forwardInput=function(e){var t=this;return hl((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Kx(this,void 0,void 0,(function(){var t,n,r,i=this;return Xx(this,(function(a){switch(a.label){case 0:return[4,Ky(e)];case 1:return t=a.sent(),n=hl((function(){return Fu(i.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Kx(i,void 0,void 0,(function(){var r,i,a,o,s;return Xx(this,(function(l){switch(l.label){case 0:return a=(i=Array).from,[4,e.data()];case 1:return r=a.apply(i,[l.sent()]),o=r.filter((function(e,t){return ey(t)})),s=r.filter((function(e,t){return!ey(t)})),[2,new by(Array(68).fill(0).map((function(e,t){return new sy(o[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(bb),jb=function(e){function t(t){return void 0===t&&(t=new vb),e.call(this,"FaceLandmark68Net",t)||this}return Gx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Fb);var Lb=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return hl((function(){var n=rb(py(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ol(255)),t.dense0,!0);return n=rb(n,t.dense1),n=rb(n,t.dense2),n=Vm(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=gb(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ob(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,i=n.getRemainingWeights,a=pb(r,t).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),l=a(64,128,"dense2");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:l}}}(e)},t}(tb),Bb=function(e){function t(t){return void 0===t&&(t=new Lb),e.call(this,"FaceLandmark68TinyNet",t)||this}return Gx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Fb);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gx(t,e)}(jb);function zb(e,t,n,r,i){void 0===i&&(i="same");var a=t.conv,o=a.filters,s=a.bias,l=wm(e,o,n,i);return l=function(e,t){return Mp(Xp(e,t.weights),t.biases)}(l=Mp(l,s),t.scale),r?hg(l):l}function Wb(e,t){return zb(e,t,[1,1],!1)}function Vb(e,t){return zb(e,t,[2,2],!0,"valid")}function Ub(e,t){function n(n,r,i,a){var o=function(t,n,r){var i=e(t),a=i.length/(n*r*r);if(a%1!==0)throw new Error("depth has to be an integer: "+a+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r);return hl((function(){return mg(Bl(i,[n,a,r,r]),[2,3,1,0])}))}(n,r,i),s=Fl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}function r(r,i,a,o){var s=n(r,i,a,o+"/conv"),l=function(n,r){var i=Fl(e(n)),a=Fl(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:a}}(i,o+"/scale");return{conv:s,scale:l}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,i,a){return void 0===a&&(a=!1),{conv1:r((a?.5:1)*e,t,n,i+"/conv1"),conv2:r(e,t,n,i+"/conv2")}}}}function Hb(e,t){var n=hb(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),i=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:i}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function Gb(e){var t=[],n=Hb(e,t),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),l=i("conv32_3"),u=i("conv64_down"),c=i("conv64_1"),d=i("conv64_2"),h=i("conv64_3"),f=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),x=i("conv256_2"),y=i("conv256_down_out"),b=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Qx(b,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:l,conv64_down:u,conv64_1:c,conv64_2:d,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:x,conv256_down_out:y,fc:b};return ob(e,t),{params:w,paramMappings:t}}function qb(e,t){var n=function(e,t){return zb(e,t,[1,1],!0)}(e,t.conv1);return n=Wb(n,t.conv2),n=Mp(n,e),n=hg(n)}function Kb(e,t){var n=Vb(e,t.conv1);n=Wb(n,t.conv2);var r=Vm(e,2,2,"valid"),i=Wl(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=Yx(n.shape);o[1]=1;var s=Wl(o),l=Yx((n=ql([n,s],1)).shape);l[2]=1;var u=Wl(l);n=ql([n,u],2)}return r=a?ql([r,i],3):r,n=Mp(r,n),n=hg(n)}var Xb=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return hl((function(){var n=Vb(py(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Ol(256)),t.conv32_down);n=qb(n=Wm(n,3,2,"valid"),t.conv32_1),n=qb(n,t.conv32_2),n=qb(n,t.conv32_3),n=qb(n=Kb(n,t.conv64_down),t.conv64_1),n=qb(n,t.conv64_2),n=qb(n,t.conv64_3),n=qb(n=Kb(n,t.conv128_down),t.conv128_1),n=qb(n,t.conv128_2),n=qb(n=Kb(n,t.conv256_down),t.conv256_1);var r=(n=Kb(n=qb(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Dm(r,t.fc)}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Kx(this,void 0,void 0,(function(){var t,n,r,i=this;return Xx(this,(function(a){switch(a.label){case 0:return[4,Ky(e)];case 1:return t=a.sent(),n=hl((function(){return Fu(i.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Gb(e)},t.prototype.extractParams=function(e){return function(e){var t=fb(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=Ub(n,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,l=o(4704,32,7,"conv32_down"),u=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),_=hl((function(){return mg(jl(n(32768),[128,256]),[1,0])}));if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:l,conv32_1:u,conv32_2:c,conv32_3:d,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:x,conv256_down:y,conv256_1:b,conv256_2:w,conv256_down_out:k,fc:_},paramMappings:i}}(e)},t}(tb);function Yb(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var $b=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,i=t.maxNumScales,a=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=o,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function Qb(e,t){function n(n,r,i,a,o){var s=Bl(e(n*r*i*i),[i,i,n,r]),l=Fl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(o?"batch_norm_offset":"bias")}),{filters:s,bias:l}}function r(e,t,r,i){var a=n(e,t,r,i,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function i(n,i,a){var o=function(n,r){var i=Bl(e(9*n),[3,3,n,1]),a=Fl(e(n)),o=Fl(e(n)),s=Fl(e(n)),l=Fl(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:a,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:l}}(n,a+"/depthwise_conv");return{depthwise_conv:o,pointwise_conv:r(n,i,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function Jb(e){var t=[],n=function(e,t){var n=hb(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(e){var t="mobilenetv1/conv_"+e,i="MobilenetV1/Conv2d_"+e+"_depthwise",a=t+"/depthwise_conv",o=t+"/pointwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,o)}}function a(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function o(e){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Jx(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return ob(e,t),{params:o,paramMappings:t}}function Zb(e,t,n){return hl((function(){var r=wm(e,t.filters,n,"same");return r=Mp(r,t.batch_norm_offset),Vf(r,0,6)}))}var ew=.0010000000474974513;function tw(e,t){return hl((function(){var n=null,r=Zb(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var i=t+1,a=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(i);r=function(e,t,n){return hl((function(){var r=Sm(e,t.filters,n,"same");return r=Cp(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,ew),Vf(r,0,6)}))}(r,e.depthwise_conv,a),r=Zb(r,e.pointwise_conv,[1,1]),11===i&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function nw(e,t,n){var r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),h=(o-i)*(s-a),f=(c-l)*(d-u);if(h<=0||f<=0)return 0;var p=Math.max(i,l),m=Math.max(a,u),g=Math.min(o,c),v=Math.min(s,d),x=Math.max(g-p,0)*Math.max(v-m,0);return x/(h+f-x)}function rw(e,t){var n=function(e){var t=Fu(mg(e,[1,0])),n=[Zp(t[2],t[0]),Zp(t[3],t[1])];return{sizes:n,centers:[Mp(t[0],Lp(n[0],Ol(2))),Mp(t[1],Lp(n[1],Ol(2)))]}}(e),r=n.sizes,i=n.centers,a=Fu(mg(t,[1,0])),o=Lp(Xp(qf(Lp(a[2],Ol(5))),r[0]),Ol(2)),s=Mp(Xp(Lp(a[0],Ol(10)),r[0]),i[0]),l=Lp(Xp(qf(Lp(a[3],Ol(5))),r[1]),Ol(2)),u=Mp(Xp(Lp(a[1],Ol(10)),r[1]),i[1]);return mg(Pu([Zp(s,o),Zp(u,l),Mp(s,o),Mp(u,l)]),[1,0])}function iw(e,t){return hl((function(){var n=e.shape[0];return{boxPredictionEncoding:Iu(ab(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Iu(ab(e,t.class_predictor),[n,-1,3])}}))}var aw=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),ow=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Gx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return hl((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=tw(Zp(Xp(n,Ol(.007843137718737125)),Ol(1)),t.mobilenetv1),i=function(e,t,n){return hl((function(){var r=Zb(e,n.conv_0,[1,1]),i=Zb(r,n.conv_1,[2,2]),a=Zb(i,n.conv_2,[1,1]),o=Zb(a,n.conv_3,[2,2]),s=Zb(o,n.conv_4,[1,1]),l=Zb(s,n.conv_5,[2,2]),u=Zb(l,n.conv_6,[1,1]),c=Zb(u,n.conv_7,[2,2]),d=iw(t,n.box_predictor_0),h=iw(e,n.box_predictor_1),f=iw(i,n.box_predictor_2),p=iw(o,n.box_predictor_3),m=iw(l,n.box_predictor_4),g=iw(c,n.box_predictor_5);return{boxPredictions:ql([d.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:ql([d.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return hl((function(){var r=e.shape[0],i=rw(Iu(Mu(n.extra_dim,[r,1,1]),[-1,4]),Iu(e,[-1,4]));i=Iu(i,[r,i.shape[0]/r,4]);var a=np(qm(t,[0,0,1],[-1,-1,-1])),o=qm(a,[0,0,0],[-1,-1,1]);return o=Iu(o,[r,o.shape[1]]),{boxes:Fu(i),scores:Fu(o)}}))}(i.boxPredictions,i.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ky(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Kx(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w;return Xx(this,(function(k){switch(k.label){case 0:return n=new aw(t),r=n.maxResults,i=n.minConfidence,[4,Ky(e)];case 1:for(a=k.sent(),o=this.forwardInput(a),s=o.boxes,l=o.scores,u=s[0],c=l[0],d=1;d<s.length;d++)s[d].dispose(),l[d].dispose();return p=(f=Array).from,[4,c.data()];case 2:return h=p.apply(f,[k.sent()]),.5,m=function(e,t,n,r,i){var a=e.shape[0],o=Math.min(n,a),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>i})).sort((function(e,t){return t.score-e.score})),l=function(e){return e<=r?1:0},u=[];return s.forEach((function(t){if(!(u.length>=o)){for(var n=t.score,r=u.length-1;r>=0;--r){var a=nw(e,t.boxIndex,u[r]);if(0!==a&&(t.score*=l(a),t.score<=i))break}n===t.score&&u.push(t.boxIndex)}})),u}(u,h,r,.5,i),g=a.getReshapedInputDimensions(0),v=a.inputSize,x=v/g.width,y=v/g.height,b=u.arraySync(),w=m.map((function(e){var t=[Math.max(0,b[e][0]),Math.min(1,b[e][2])].map((function(e){return e*y})),n=t[0],r=t[1],i=[Math.max(0,b[e][1]),Math.min(1,b[e][3])].map((function(e){return e*x})),o=i[0],s=i[1];return new dy(h[e],new vy(o,n,s-o,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})})),u.dispose(),c.dispose(),[2,w]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Jb(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,i=n.getRemainingWeights,a=Qb(r,t),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,l=o(),u=s(),c={extra_dim:Ll(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:l,prediction_layer:u,output_layer:c},paramMappings:t}}(e)},t}(tb);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gx(t,e)}(ow);var sw,lw=[new sy(.738768,.874946),new sy(2.42204,2.65704),new sy(4.30971,7.04493),new sy(10.246,4.59428),new sy(12.6868,11.8741)],uw=[new sy(1.603231,2.094468),new sy(6.041143,7.080126),new sy(2.882459,3.518061),new sy(4.266906,5.178857),new sy(9.041765,10.66308)],cw=[117.001,114.697,97.404],dw=function(e){return"number"===typeof e};function hw(e){return hl((function(){var t=Xp(e,Ol(.10000000149011612));return Mp(hg(Zp(e,t)),t)}))}function fw(e,t){return hl((function(){var n=wu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=wm(n,t.conv.filters,[1,1],"valid"),n=Zp(n,t.bn.sub),n=Xp(n,t.bn.truediv),hw(n=Mp(n,t.conv.bias))}))}function pw(e,t){return hl((function(){var n=wu(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Rm(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),hw(n=Mp(n,t.bias))}))}function mw(e,t){var n=sb(e,t);var r=cb(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,a){var o=n(r,i,3,a+"/conv"),s=function(n,r){var i=Fl(e(n)),a=Fl(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:a}}(i,a+"/bn");return{conv:o,bn:s}},extractSeparableConvParams:r}}function gw(e,t){var n=hb(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),i=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:i}},extractSeparableConvParams:db(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(sw||(sw={}));var vw=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),xw=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!dw(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return dw(e.x)&&dw(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(dw)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Gx(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=fw(e,t.conv0);return n=fw(n=Wm(n,[2,2],[2,2],"same"),t.conv1),n=fw(n=Wm(n,[2,2],[2,2],"same"),t.conv2),n=fw(n=Wm(n,[2,2],[2,2],"same"),t.conv3),n=fw(n=Wm(n,[2,2],[2,2],"same"),t.conv4),n=fw(n=Wm(n,[2,2],[2,2],"same"),t.conv5),n=fw(n=Wm(n,[2,2],[1,1],"same"),t.conv6),ab(n=fw(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?hw(ab(e,t.conv0,"valid",!1)):pw(e,t.conv0);return n=pw(n=Wm(n,[2,2],[2,2],"same"),t.conv1),n=pw(n=Wm(n,[2,2],[2,2],"same"),t.conv2),n=pw(n=Wm(n,[2,2],[2,2],"same"),t.conv3),n=pw(n=Wm(n,[2,2],[2,2],"same"),t.conv4),n=pw(n=Wm(n,[2,2],[2,2],"same"),t.conv5),n=Wm(n,[2,2],[1,1],"same"),n=t.conv6?pw(n,t.conv6):n,ab(n=t.conv7?pw(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return hl((function(){var i=e.toBatchTensor(t,!1).toFloat();return i=(i=n.config.meanRgb?py(i,n.config.meanRgb):i).div(Ol(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)}))},t.prototype.forward=function(e,t){return Kx(this,void 0,void 0,(function(){var n;return Xx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ky(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Kx(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,d,h,f,p,m=this;return Xx(this,(function(g){switch(g.label){case 0:return n=new vw(t),r=n.inputSize,i=n.scoreThreshold,[4,Ky(e)];case 1:return a=g.sent(),[4,this.forwardInput(a,r)];case 2:return o=g.sent(),s=hl((function(){return Fu(o)[0].expandDims()})),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(s,a.getReshapedInputDimensions(0),i)];case 3:return u=g.sent(),o.dispose(),s.dispose(),c=u.map((function(e){return e.box})),d=u.map((function(e){return e.score})),h=u.map((function(e){return e.classScore})),f=u.map((function(e){return m.config.classes[e.label]})),p=fy(c.map((function(e){return e.rescale(r)})),d,this.config.iouThreshold,!0),[2,p.map((function(e){return new cy(d[e],h[e],f[e],c[e],l)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],i=gw(e,r),a=i.extractConvParams,o=i.extractConvWithBatchNormParams,s=i.extractSeparableConvParams;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:l>7?s("conv6"):void 0,conv7:l>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return ob(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var i,a=fb(e),o=a.extractWeights,s=a.getRemainingWeights,l=[],u=mw(o,l),c=u.extractConvParams,d=u.extractConvWithBatchNormParams,h=u.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8];i={conv0:t.isFirstLayerConv2d?c(f,p,3,"conv0"):h(f,p,"conv0"),conv1:h(p,m,"conv1"),conv2:h(m,g,"conv2"),conv3:h(g,v,"conv3"),conv4:h(v,x,"conv4"),conv5:h(x,y,"conv5"),conv6:b?h(y,b,"conv6"):void 0,conv7:w?h(b,w,"conv7"):void 0,conv8:c(w||b||y,5*n,1,"conv8")}}else f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8],i={conv0:d(f,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,g,"conv2"),conv3:d(g,v,"conv3"),conv4:d(v,x,"conv4"),conv5:d(x,y,"conv5"),conv6:d(y,b,"conv6"),conv7:d(b,w,"conv7"),conv8:c(w,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:i,paramMappings:l}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Kx(this,void 0,void 0,(function(){var r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w,k,_,C,S,E,N,R,T,I,D,A=this;return Xx(this,(function(P){switch(P.label){case 0:return r=t.width,i=t.height,a=Math.max(r,i),o=a/r,s=a/i,l=e.shape[1],u=this.config.anchors.length,c=hl((function(){var t=e.reshape([l,l,u,A.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,u,4]),t.slice([0,0,0,4],[l,l,u,1]),A.withClassScores?tc(t.slice([0,0,0,5],[l,l,u,A.config.classes.length]),3):Ol(0)]})),d=c[0],h=c[1],f=c[2],p=[],[4,h.array()];case 1:return m=P.sent(),[4,d.array()];case 2:g=P.sent(),v=0,P.label=3;case 3:if(!(v<l))return[3,12];x=0,P.label=4;case 4:if(!(x<l))return[3,11];y=0,P.label=5;case 5:return y<u?(b=my(m[v][x][y][0]),!n||b>n?(w=(x+my(g[v][x][y][0]))/l*o,k=(v+my(g[v][x][y][1]))/l*s,_=Math.exp(g[v][x][y][2])*this.config.anchors[y].x/l*o,C=Math.exp(g[v][x][y][3])*this.config.anchors[y].y/l*s,S=w-_/2,E=k-C/2,N={row:v,col:x,anchor:y},this.withClassScores?[4,this.extractPredictedClass(f,N)]:[3,7]):[3,9]):[3,10];case 6:return D=P.sent(),[3,8];case 7:D={classScore:1,label:0},P.label=8;case 8:T=(R=D).classScore,I=R.label,p.push(qx({box:new uy(S,E,S+_,E+C),score:b,classScore:b*T,label:I},N)),P.label=9;case 9:return y++,[3,5];case 10:return x++,[3,4];case 11:return v++,[3,3];case 12:return d.dispose(),h.dispose(),f.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Kx(this,void 0,void 0,(function(){var n,r,i,a;return Xx(this,(function(o){switch(o.label){case 0:return n=t.row,r=t.col,i=t.anchor,[4,e.array()];case 1:return a=o.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return a[n][r][i][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(tb),yw=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:uw,meanRgb:cw}:{anchors:lw,withClassScores:!0});return e.call(this,n)||this}return Gx(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new dy(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(xw);var bw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Gx(t,e),t}(vw),ww=function(){function e(){}return e.prototype.then=function(e){return Kx(this,void 0,void 0,(function(){var t;return Xx(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function kw(e,t){var n={descriptor:t};return Object.assign({},e,n)}function _w(e,t,n,r,i){return void 0===i&&(i=function(e){return e.alignedRect}),Kx(this,void 0,void 0,(function(){var a,o,s,l,u;return Xx(this,(function(c){switch(c.label){case 0:return a=e.map((function(e){return Sb(e)?i(e):e.detection})),(s=r)?[3,5]:t instanceof Ho?[4,Yy(t,a)]:[3,2];case 1:return l=c.sent(),[3,4];case 2:return[4,Xy(t,a)];case 3:l=c.sent(),c.label=4;case 4:s=l,c.label=5;case 5:return[4,n(o=s)];case 6:return u=c.sent(),o.forEach((function(e){return e instanceof Ho&&e.dispose()})),[2,u]}}))}))}function Cw(e,t,n,r,i){return Kx(this,void 0,void 0,(function(){var a=this;return Xx(this,(function(o){return[2,_w([e],t,(function(e){return Kx(a,void 0,void 0,(function(){return Xx(this,(function(t){return[2,n(e[0])]}))}))}),r,i)]}))}))}var Sw=2,Ew=12;function Nw(e){var t=fb(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=function(e,t){var n=sb(e,t),r=lb(e,t);function i(n,r){var i=Fl(e(n));return t.push({paramPath:r}),i}function a(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:i(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:i(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:i(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return qx(qx({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return qx(qx({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=i(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),l=i(256,"onet/prelu5_alpha"),u=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return qx(qx({},e),{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:l,fc2_1:u,fc2_2:c,fc2_3:d})}}}(n,i),o=a.extractPNetParams,s=a.extractRNetParams,l=a.extractONetParams,u=o(),c=s(),d=l();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:u,rnet:c,onet:d},paramMappings:i}}function Rw(e){var t=[],n=function(e,t){var n=hb(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function i(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function o(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return qx(qx({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=o("rnet"),t=i("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=i("rnet/fc2_1"),s=i("rnet/fc2_2");return qx(qx({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=o("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),s=i("onet/fc1"),l=a("onet/prelu5_alpha"),u=i("onet/fc2_1"),c=i("onet/fc2_2"),d=i("onet/fc2_3");return qx(qx({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:l,fc2_1:u,fc2_2:c,fc2_3:d})}}}(e,t),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),l=a();return ob(e,t),{params:{pnet:o,rnet:s,onet:l},paramMappings:t}}function Tw(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var Iw=function(e){function t(t,n,r,i){return e.call(this,{left:t,top:n,right:r,bottom:i},!0)||this}return Gx(t,e),t}(ly);function Dw(e){return hl((function(){return Xp(Zp(e,Ol(127.5)),Ol(.0078125))}))}function Aw(e,t){return hl((function(){return Mp(hg(e),Xp(t,Jf(hg(Jf(e)))))}))}function Pw(e,t,n){return void 0===n&&(n=!1),hl((function(){var r=ab(e,t.conv1,"valid");return r=Aw(r,t.prelu1_alpha),r=Aw(r=ab(r=Wm(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=Aw(r=ab(r=n?r:Wm(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function Mw(e,t,n,r,i){i.stage1=[];var a=t.map((function(t){return hl((function(){var n={scale:t},i=function(e,t){return hl((function(){var n=Tw(t,e.shape.slice(1)),r=n.height,i=n.width,a=Dw(sv.resizeBilinear(e,[r,i]));return mg(a,[0,2,1,3])}))}(e,t),a=Date.now(),o=function(e,t){return hl((function(){var n=Pw(e,t,!0),r=ab(n,t.conv4_1,"valid"),i=vu(rg(r,3),3);return{prob:tc(Zp(r,i),3),regions:ab(n,t.conv4_2,"valid")}}))}(i,r),s=o.prob,l=o.regions;return n.pnet=Date.now()-a,{scoresTensor:Fu(Fu(s,3)[1])[0],regionsTensor:Fu(l)[0],scale:t,statsForScale:n}}))})),o=a.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,a=e.scale,o=e.statsForScale,s=function(e,t,n,r){for(var i=[],a=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)a[o][s]>=r&&i.push(new sy(s,o));return i.map((function(e){var r=new uy(Math.round((e.y*Sw+1)/n),Math.round((e.x*Sw+1)/n),Math.round((e.y*Sw+Ew)/n),Math.round((e.x*Sw+Ew)/n)),i=a[e.y][e.x],o=t.arraySync();return{cell:r,score:i,region:new Iw(o[e.y][e.x][0],o[e.y][e.x][1],o[e.y][e.x][2],o[e.y][e.x][3])}}))}(t,r,a,n);if(t.dispose(),r.dispose(),!s.length)return i.stage1.push(o),[];var l=Date.now(),u=fy(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return o.nms=Date.now()-l,o.numBoxes=u.length,i.stage1.push(o),u.map((function(e){return s[e]}))})),s=o.reduce((function(e,t){return e.concat(t)}),[]),l=[],u=[];if(s.length>0){var c=Date.now(),d=fy(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);i.stage1_nms=Date.now()-c,u=d.map((function(e){return s[e].score})),l=d.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new uy(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:l,scores:u}}function Ow(e,t,n){var r=n.width,i=n.height;return Kx(this,void 0,void 0,(function(){var n,a,o,s=this;return Xx(this,(function(l){switch(l.label){case 0:return n=Fy(e),[4,Promise.all(t.map((function(t){return Kx(s,void 0,void 0,(function(){var r,i,a,o,s,l,u,c;return Xx(this,(function(d){return r=t.padAtBorders(e.height,e.width),i=r.y,a=r.ey,o=r.x,s=r.ex,l=o-1,u=i-1,c=n.getImageData(l,u,s-l,a-u),[2,My.isNodejs()?Uy(c):createImageBitmap(c)]}))}))})))];case 1:return a=l.sent(),o=[],a.forEach((function(e){var t=Fy(Vy({width:r,height:i}));t.drawImage(e,0,0,r,i);for(var n=t.getImageData(0,0,r,i).data,a=[],s=0;s<n.length;s+=4)a.push(n[s+2]),a.push(n[s+1]),a.push(n[s]);o.push(a)})),[2,o.map((function(e){return hl((function(){return Dw(mg(Bl(e,[1,r,i,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function Fw(e,t,n,r,i){return Kx(this,void 0,void 0,(function(){var a,o,s,l,u,c,d,h,f,p,m,g,v,x;return Xx(this,(function(y){switch(y.label){case 0:return a=Date.now(),[4,Ow(e,t,{width:24,height:24})];case 1:return o=y.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map((function(e){var t=function(e,t){return hl((function(){var n=Pw(e,t),r=Aw(xb(Iu(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),i=xb(r,t.fc2_1),a=vu(rg(i,1),1),o=tc(Zp(i,a),1),s=xb(r,t.fc2_2);return{scores:Fu(o,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),i.stage2_rnet=Date.now()-a,l=s.length>1?ql(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[y.sent()]),l.dispose(),h=u.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){return t[e]})),p=h.map((function(e){return u[e]})),m=[],g=[],f.length>0&&(a=Date.now(),v=fy(f,p,.7),i.stage2_nms=Date.now()-a,x=v.map((function(e){var t=s[h[e]].regions.arraySync();return new Iw(t[0][0],t[0][1],t[0][2],t[0][3])})),g=v.map((function(e){return p[e]})),m=v.map((function(e,t){return f[e].calibrate(x[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:m,scores:g}]}}))}))}function jw(e,t,n,r,i){return Kx(this,void 0,void 0,(function(){var a,o,s,l,u,c,d,h,f,p,m,g,v,x,y;return Xx(this,(function(b){switch(b.label){case 0:return a=Date.now(),[4,Ow(e,t,{width:48,height:48})];case 1:return o=b.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map((function(e){var t=function(e,t){return hl((function(){var n=Pw(e,t);n=Aw(n=ab(n=Wm(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=Aw(xb(Iu(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),i=xb(r,t.fc2_1),a=vu(rg(i,1),1),o=tc(Zp(i,a),1),s=xb(r,t.fc2_2),l=xb(r,t.fc2_3);return{scores:Fu(o,1)[1],regions:s,points:l}}))}(e,r);return e.dispose(),t})),i.stage3_onet=Date.now()-a,l=s.length>1?ql(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,l.data()];case 2:return u=d.apply(c,[b.sent()]),l.dispose(),h=u.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){var t=s[e].regions.arraySync();return new Iw(t[0][0],t[0][1],t[0][2],t[0][3])})),p=h.map((function(e,n){return t[e].calibrate(f[n])})),m=h.map((function(e){return u[e]})),g=[],v=[],x=[],p.length>0&&(a=Date.now(),y=fy(p,m,.7,!1),i.stage3_nms=Date.now()-a,g=y.map((function(e){return p[e]})),v=y.map((function(e){return m[e]})),x=y.map((function(e,t){return Array(5).fill(0).map((function(n,r){var i=s[e].points.arraySync();return new sy(i[0][r]*(g[t].width+1)+g[t].left,i[0][r+5]*(g[t].height+1)+g[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:g,scores:v,points:x}]}}))}))}var Lw=function(e){function t(){return e.call(this,"Mtcnn")||this}return Gx(t,e),t.prototype.load=function(t){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Kx(this,void 0,void 0,(function(){var n,r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w,k;return Xx(this,(function(_){switch(_.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},a=Date.now(),o=hl((function(){return e=vu(Nx.fromPixels(r)).toFloat(),hl((function(){return Pu(Fu(e,3).reverse(),3)}));var e})),s=function(e){return o.dispose(),i.total=Date.now()-a,e},l=o.shape.slice(1),u=l[0],c=l[1],d=new $b(t),h=d.minFaceSize,f=d.scaleFactor,p=d.maxNumScales,m=d.scoreThresholds,g=d.scaleSteps,v=(g||function(e,t,n){for(var r=n[0],i=n[1],a=Ew/e,o=[],s=Math.min(r,i)*a,l=0;s>=12;)o.push(a*Math.pow(t,l)),s*=t,l+=1;return o}(h,f,[u,c])).filter((function(e){var t=Tw(e,[u,c]);return Math.min(t.width,t.height)>Ew})).slice(0,p),i.scales=v,i.pyramid=v.map((function(e){return Tw(e,[u,c])})),x=Date.now(),[4,Mw(o,v,m[0],n.pnet,i)];case 1:return y=_.sent(),i.total_stage1=Date.now()-x,y.boxes.length?(i.stage2_numInputBoxes=y.boxes.length,x=Date.now(),[4,Fw(r,y.boxes,m[1],n.rnet,i)]):[2,s({results:[],stats:i})];case 2:return b=_.sent(),i.total_stage2=Date.now()-x,b.boxes.length?(i.stage3_numInputBoxes=b.boxes.length,x=Date.now(),[4,jw(r,b.boxes,m[2],n.onet,i)]):[2,s({results:[],stats:i})];case 3:return w=_.sent(),i.total_stage3=Date.now()-x,k=w.boxes.map((function(e,t){return Eb(Sy({},new dy(w.scores[t],new vy(e.left/c,e.top/u,e.width/c,e.height/u),{height:u,width:c})),new yy(w.points[t].map((function(t){return t.sub(new sy(e.left,e.top)).div(new sy(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:k,stats:i})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Kx(this,void 0,void 0,(function(){var n;return Xx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ky(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Kx(this,void 0,void 0,(function(){var n;return Xx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ky(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Rw(e)},t.prototype.extractParams=function(e){return Nw(e)},t}(tb),Bw=[new sy(1.603231,2.094468),new sy(6.041143,7.080126),new sy(2.882459,3.518061),new sy(4.266906,5.178857),new sy(9.041765,10.66308)],zw=[117.001,114.697,97.404],Ww=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:Bw,meanRgb:zw,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Gx(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Kx(this,void 0,void 0,(function(){return Xx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new dy(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(xw),Vw={ssdMobilenetv1:new ow,tinyFaceDetector:new Ww,tinyYolov2:new yw,mtcnn:new Lw,faceLandmark68Net:new jb,faceLandmark68TinyNet:new Bb,faceRecognitionNet:new Xb,faceExpressionNet:new _b,ageGenderNet:new Ob};function Uw(e,t){var n={age:t};return Object.assign({},e,n)}var Hw=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return Gx(t,e),t}(ww),Gw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n=this;return Xx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,_w(e=r.sent(),this.input,(function(e){return Kx(n,void 0,void 0,(function(){return Xx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return Vw.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return Cb(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new $w(this,this.input)},t}(Hw),qw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t;return Xx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Cw(e,this.input,(function(e){return Vw.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,Cb(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new Qw(this,this.input)},t}(Hw),Kw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.withAgeAndGender=function(){return new Jw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tk(this,this.input)},t}(Gw),Xw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.withAgeAndGender=function(){return new Zw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nk(this,this.input)},t}(qw),Yw=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return Gx(t,e),t}(ww),$w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n=this;return Xx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,_w(e=r.sent(),this.input,(function(e){return Kx(n,void 0,void 0,(function(){return Xx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return Vw.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],i=r.age;return Uw(Yb(e,r.gender,r.genderProbability),i)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Gw(this,this.input)},t}(Yw),Qw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n,r,i;return Xx(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,Cw(e,this.input,(function(e){return Vw.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=a.sent(),n=t.age,r=t.gender,i=t.genderProbability,[2,Uw(Yb(e,r,i),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new qw(this,this.input)},t}(Yw),Jw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.withFaceExpressions=function(){return new Kw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tk(this,this.input)},t}($w),Zw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.withFaceExpressions=function(){return new Xw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nk(this,this.input)},t}(Qw),ek=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Gx(t,e),t}(ww),tk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e;return Xx(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,_w(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return Vw.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return kw(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Kw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Jw(this,this.input)},t}(ek),nk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t;return Xx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Cw(e,this.input,(function(e){return Vw.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,kw(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new Xw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Zw(this,this.input)},t}(ek),rk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.useTinyLandmarkNet=r,i}return Gx(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Vw.faceLandmark68TinyNet:Vw.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(ww),ik=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n,r,i,a=this;return Xx(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Ho?[4,Yy(this.input,t)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,Xy(this.input,t)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return a.landmarkNet.detectLandmarks(e)})))];case 6:return i=o.sent(),n.forEach((function(e){return e instanceof Ho&&e.dispose()})),[2,e.map((function(e,t){return Eb(e,i[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Kw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Jw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new tk(this,this.input)},t}(rk),ak=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n,r,i;return Xx(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(t=e.detection,this.input instanceof Ho?[4,Yy(this.input,[t])]:[3,3]):[2];case 2:return r=a.sent(),[3,5];case 3:return[4,Xy(this.input,[t])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return i=a.sent(),n.forEach((function(e){return e instanceof Ho&&e.dispose()})),[2,Eb(e,i)]}}))}))},t.prototype.withFaceExpressions=function(){return new Xw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Zw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new nk(this,this.input)},t}(rk),ok=function(e){function t(t,n){void 0===n&&(n=new aw);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Gx(t,e),t}(ww),sk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t,n,r;return Xx(this,(function(i){switch(i.label){case 0:return t=(e=this).input,(n=e.options)instanceof $b?[4,Vw.mtcnn.forward(t,n)]:[3,2];case 1:return[2,i.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof bw?function(e){return Vw.tinyFaceDetector.locateFaces(e,n)}:n instanceof aw?function(e){return Vw.ssdMobilenetv1.locateFaces(e,n)}:n instanceof vw?function(e){return Vw.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Kx(e,void 0,void 0,(function(){var e;return Xx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return Sy({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new ik(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Gw(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new $w(this.runAndExtendWithFaceDetections(),this.input)},t}(ok);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Gx(t,e),t.prototype.run=function(){return Kx(this,void 0,void 0,(function(){var e,t;return Xx(this,(function(n){switch(n.label){case 0:return[4,new sk(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Kx(e,void 0,void 0,(function(){var e;return Xx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?Sy({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new ak(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new qw(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Qw(this.runAndExtendWithFaceDetection(),this.input)}}(ok);function lk(e,t){return void 0===t&&(t=new aw),new sk(e,t)}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof _y)return e;if(e instanceof Float32Array)return new _y(i(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new _y(i(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,i=n.label;return new wy(i,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new wy("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return _y.fromJSON(e)}));return new e(n,t.distanceThreshold)}}();function uk(e,t){var n=new $x(t.width,t.height),r=n.width,i=n.height;if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}));if(Array.isArray(e))return e.map((function(e){return uk(e,{width:r,height:i})}));if(Sb(e)){var a=e.detection.forSize(r,i),o=e.unshiftedLandmarks.forSize(a.box.width,a.box.height);return Eb(Sy(e,a),o)}return Cy(e)?Sy(e,e.detection.forSize(r,i)):e instanceof xy||e instanceof dy?e.forSize(r,i):e}const ck=function(e){let{onDistanceChange:t}=e;const[n,i]=r.useState(!1),[a,o]=r.useState(!1),[s,l]=r.useState({height:480,width:640}),u=r.useRef(),c=r.useRef();r.useEffect((()=>{(async()=>{const e="/models";Promise.all([Vw.tinyFaceDetector.loadFromUri(e),Vw.faceLandmark68Net.loadFromUri(e),Vw.faceRecognitionNet.loadFromUri(e),Vw.faceExpressionNet.loadFromUri(e)]).then((()=>{i(!0),d()}))})()}),[]);const d=()=>{o(!0),navigator.mediaDevices.getUserMedia({video:{width:300}}).then((e=>{let t=u.current;t.srcObject=e,t.onloadedmetadata=()=>{t.play(),l({height:t.videoHeight,width:t.videoWidth})}})).catch((e=>{console.error("error:",e)}))};return(0,Tn.jsx)("div",{children:a?n?(0,Tn.jsx)("div",{children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("video",{ref:u,onPlay:async()=>{const e={width:s.width,height:s.height};eb(c.current,e);const n=async()=>{try{if(c&&c.current){const n=uk(await lk(u.current,new bw).withFaceLandmarks().withFaceExpressions(),e);c.current.getContext("2d").clearRect(0,0,s.width,s.height);var r=0;n.length>0&&(r=function(e){const t=e[0].landmarks,n=t.getLeftEye(),r=t.getRightEye(),i=Math.sqrt(Math.pow(n[0]._x-r[3]._x,2)+Math.pow(n[0]._y-r[3]._y,2));return 3843/i+25}(n)),t(r)}}catch(i){console.log(i)}requestAnimationFrame(n)};requestAnimationFrame(n)},style:{borderRadius:"10px"}}),(0,Tn.jsx)("canvas",{ref:c,style:{position:"absolute"}})]})}):(0,Tn.jsx)("div",{children:"loading..."}):(0,Tn.jsx)(Tn.Fragment,{})})};function dk(){const e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}const hk=_i+"/api/user",fk={getHelpText:()=>ki.get(hk+"/help/view",{headers:dk()}),getContacts:()=>ki.get(hk+"/contactus/view",{headers:dk()}),getAboutText:()=>ki.get(hk+"/about/view",{headers:dk()}),getContactDetails:()=>ki.get(hk+"/contactus/view",{headers:dk()}),getUserDetails:e=>ki.get(hk+"/userdetails",{params:{username:e},headers:dk()}),addAccountDetails:(e,t,n,r,i)=>ki.post(hk+"/addAccountDetails",{username:e,name:t,birthday:n,contactNo:r,email:i},{headers:dk()}),addDistanceCalculations:(e,t,n)=>ki.post(hk+"/addDistance",{username:e,date:t,averageDistance:n},{headers:dk()}),addInteractionTimeCalculations:(e,t,n)=>ki.post(hk+"/addInteractionTime",{username:e,date:t,interactionTime:n},{headers:dk()}),getWeeklyDistances:e=>ki.get(hk+"/weekly/distances",{params:{username:e},headers:dk()}),getWeeklyInteractionTimes:e=>ki.get(hk+"/weekly/interactionTimes",{params:{username:e},headers:dk()}),getMonthlyDistances:e=>ki.get(hk+"/monthly/distances",{params:{username:e},headers:dk()}),getMonthlyInteractionTimes:e=>ki.get(hk+"/monthly/interactionTimes",{params:{username:e},headers:dk()}),getPreviousWeeklyDistances:e=>ki.get(hk+"/previous/weekly/distances",{params:{username:e},headers:dk()}),getPreviousWeeklyInteractionTimes:e=>ki.get(hk+"/previous/weekly/interactionTimes",{params:{username:e},headers:dk()}),getHealthTips:e=>ki.get(hk+"/tips",{params:{username:e},headers:dk()}),calculateCvsPercentage:(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,x,y,b,w,k)=>ki.post(hk+"/calculate-cvs",{age:e,gender:t,averageHours:n,eyeDisease:r,contactLenses:i,monitorFilters:a,eyeSurgeries:o,averageDistance:s,roomIllumination:l,screenBrightness:u,breaks:c,headache:d,burningEyeSensation:h,eyeRedness:f,blurredVision:p,dryEyes:m,neckAndShoulderPain:g,eyeStrain:v,tiredEyes:x,soreEyes:y,irritation:b,poorFocusing:w,doubleVision:k},{headers:dk()}),getInteractionTimeLimit:e=>ki.get(hk+"/interaction-time-limit",{params:{username:e},headers:dk()}),getDistanceRange:e=>ki.get(hk+"/distance-range",{params:{username:e},headers:dk()}),saveInteractionTimeLimit:(e,t)=>ki.post(hk+"/set-interaction-time-limit",{username:e,interactionTimeLimit:t},{headers:dk()}),saveDistanceRange:(e,t,n)=>ki.post(hk+"/set-distance-range",{username:e,minimumDistance:t,maximumDistance:n},{headers:dk()}),saveDefaultDistanceRange:e=>ki.post(hk+"/default/set-distance-range",{username:e},{headers:dk()}),saveDefaultInteractionTimeLimit:e=>ki.post(hk+"/default/set-interaction-time-limit",{username:e},{headers:dk()}),getSoundStatus:e=>ki.get(hk+"/sound-status",{params:{username:e},headers:dk()}),saveSoundStatus:(e,t)=>ki.post(hk+"/set-sound-status",{username:e,status:t},{headers:dk()})};function pk(e){return pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pk(e)}function mk(e){var t=function(e,t){if("object"!=pk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pk(t)?t:String(t)}function gk(e,t,n){return(t=mk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vk(e){return e+.5|0}const xk=(e,t,n)=>Math.max(Math.min(e,n),t);function yk(e){return xk(vk(2.55*e),0,255)}function bk(e){return xk(vk(255*e),0,255)}function wk(e){return xk(vk(e/2.55)/100,0,1)}function kk(e){return xk(vk(100*e),0,100)}const _k={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ck=[..."0123456789ABCDEF"],Sk=e=>Ck[15&e],Ek=e=>Ck[(240&e)>>4]+Ck[15&e],Nk=e=>(240&e)>>4===(15&e);function Rk(e){var t=(e=>Nk(e.r)&&Nk(e.g)&&Nk(e.b)&&Nk(e.a))(e)?Sk:Ek;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Tk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ik(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function Dk(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Ak(e,t,n){const r=Ik(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Pk(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),o=(i+a)/2;let s,l,u;return i!==a&&(u=i-a,l=o>.5?u/(2-i-a):u/(i+a),s=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,u,i),s=60*s+.5),[0|s,l||0,o]}function Mk(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(bk)}function Ok(e,t,n){return Mk(Ik,e,t,n)}function Fk(e){return(e%360+360)%360}function jk(e){const t=Tk.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?yk(+t[5]):bk(+t[5]));const i=Fk(+t[2]),a=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Mk(Ak,e,t,n)}(i,a,o):"hsv"===t[1]?function(e,t,n){return Mk(Dk,e,t,n)}(i,a,o):Ok(i,a,o),{r:n[0],g:n[1],b:n[2],a:r}}const Lk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let zk;function Wk(e){zk||(zk=function(){const e={},t=Object.keys(Bk),n=Object.keys(Lk);let r,i,a,o,s;for(r=0;r<t.length;r++){for(o=s=t[r],i=0;i<n.length;i++)a=n[i],s=s.replace(a,Lk[a]);a=parseInt(Bk[o],16),e[s]=[a>>16&255,a>>8&255,255&a]}return e}(),zk.transparent=[0,0,0,0]);const t=zk[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Vk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Uk=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Hk=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Gk(e,t,n){if(e){let r=Pk(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Ok(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function qk(e,t){return e?Object.assign(t||{},e):e}function Kk(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=bk(e[3]))):(t=qk(e,{r:0,g:0,b:0,a:1})).a=bk(t.a),t}function Xk(e){return"r"===e.charAt(0)?function(e){const t=Vk.exec(e);let n,r,i,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?yk(e):xk(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?yk(n):xk(n,0,255)),r=255&(t[4]?yk(r):xk(r,0,255)),i=255&(t[6]?yk(i):xk(i,0,255)),{r:n,g:r,b:i,a:a}}}(e):jk(e)}class Yk{constructor(e){if(e instanceof Yk)return e;const t=typeof e;let n;"object"===t?n=Kk(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*_k[e[1]],g:255&17*_k[e[2]],b:255&17*_k[e[3]],a:5===n?17*_k[e[4]]:255}:7!==n&&9!==n||(t={r:_k[e[1]]<<4|_k[e[2]],g:_k[e[3]]<<4|_k[e[4]],b:_k[e[5]]<<4|_k[e[6]],a:9===n?_k[e[7]]<<4|_k[e[8]]:255})),t}(e)||Wk(e)||Xk(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=qk(this._rgb);return e&&(e.a=wk(e.a)),e}set rgb(e){this._rgb=Kk(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(wk(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Rk(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Pk(e),n=t[0],r=kk(t[1]),i=kk(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(wk(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const a=t===i?.5:t,o=2*a-1,s=n.a-r.a,l=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=Hk(wk(e.r)),i=Hk(wk(e.g)),a=Hk(wk(e.b));return{r:bk(Uk(r+n*(Hk(wk(t.r))-r))),g:bk(Uk(i+n*(Hk(wk(t.g))-i))),b:bk(Uk(a+n*(Hk(wk(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Yk(this.rgb)}alpha(e){return this._rgb.a=bk(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=vk(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gk(this._rgb,2,e),this}darken(e){return Gk(this._rgb,2,-e),this}saturate(e){return Gk(this._rgb,1,e),this}desaturate(e){return Gk(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Pk(e);n[0]=Fk(n[0]+t),n=Ok(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function $k(){}const Qk=(()=>{let e=0;return()=>e++})();function Jk(e){return null===e||"undefined"===typeof e}function Zk(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function e_(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function t_(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function n_(e,t){return t_(e)?e:t}function r_(e,t){return"undefined"===typeof e?t:e}const i_=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function a_(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function o_(e,t,n,r){let i,a,o;if(Zk(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(e_(e))for(o=Object.keys(e),a=o.length,i=0;i<a;i++)t.call(n,e[o[i]],o[i])}function s_(e,t){let n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function l_(e){if(Zk(e))return e.map(l_);if(e_(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=l_(e[n[i]]);return t}return e}function u_(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function c_(e,t,n,r){if(!u_(e))return;const i=t[e],a=n[e];e_(i)&&e_(a)?d_(i,a,r):t[e]=l_(a)}function d_(e,t,n){const r=Zk(t)?t:[t],i=r.length;if(!e_(e))return e;const a=(n=n||{}).merger||c_;let o;for(let s=0;s<i;++s){if(o=r[s],!e_(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)a(t[r],e,o,n)}return e}function h_(e,t){return d_(e,t,{merger:f_})}function f_(e,t,n){if(!u_(e))return;const r=t[e],i=n[e];e_(r)&&e_(i)?h_(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=l_(i))}const p_={"":e=>e,x:e=>e.x,y:e=>e.y};function m_(e,t){const n=p_[t]||(p_[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function g_(e){return e.charAt(0).toUpperCase()+e.slice(1)}const v_=e=>"undefined"!==typeof e,x_=e=>"function"===typeof e,y_=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const b_=Math.PI,w_=2*b_,k_=w_+b_,__=Number.POSITIVE_INFINITY,C_=b_/180,S_=b_/2,E_=b_/4,N_=2*b_/3,R_=Math.log10,T_=Math.sign;function I_(e,t,n){return Math.abs(e-t)<n}function D_(e){const t=Math.round(e);e=I_(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(R_(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function A_(e){return!isNaN(parseFloat(e))&&isFinite(e)}function P_(e,t,n){let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function M_(e){return e*(b_/180)}function O_(e){return e*(180/b_)}function F_(e){if(!t_(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function j_(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*b_&&(a+=w_),{angle:a,distance:i}}function L_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function B_(e,t){return(e-t+k_)%w_-b_}function z_(e){return(e%w_+w_)%w_}function W_(e,t,n,r){const i=z_(e),a=z_(t),o=z_(n),s=z_(a-i),l=z_(o-i),u=z_(i-a),c=z_(i-o);return i===a||i===o||r&&a===o||s>l&&u<c}function V_(e,t,n){return Math.max(t,Math.min(n,e))}function U_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function H_(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,a=0;for(;i-a>1;)r=a+i>>1,n(r)?a=r:i=r;return{lo:a,hi:i}}const G_=(e,t,n,r)=>H_(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),q_=(e,t,n)=>H_(e,n,(r=>e[r][t]>=n));const K_=["push","pop","shift","splice","unshift"];function X_(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(K_.forEach((t=>{delete e[t]})),delete e._chartjs)}function Y_(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const $_="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Q_(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,r||(r=!0,$_.call(window,(()=>{r=!1,e.apply(t,n)})))}}const J_=e=>"start"===e?"left":"end"===e?"right":"center",Z_=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function eC(e,t,n){const r=t.length;let i=0,a=r;if(e._sorted){const{iScale:o,_parsed:s}=e,l=o.axis,{min:u,max:c,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(i=V_(Math.min(G_(s,l,u).lo,n?r:G_(t,l,o.getPixelForValue(u)).lo),0,r-1)),a=h?V_(Math.max(G_(s,o.axis,c,!0).hi+1,n?0:G_(t,l,o.getPixelForValue(c),!0).hi+1),i,r)-i:r-i}return{start:i,count:a}}function tC(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const nC=e=>0===e||1===e,rC=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*w_/n),iC=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*w_/n)+1,aC={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*S_),easeOutSine:e=>Math.sin(e*S_),easeInOutSine:e=>-.5*(Math.cos(b_*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>nC(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>nC(e)?e:rC(e,.075,.3),easeOutElastic:e=>nC(e)?e:iC(e,.075,.3),easeInOutElastic(e){const t=.1125;return nC(e)?e:e<.5?.5*rC(2*e,t,.45):.5+.5*iC(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-aC.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*aC.easeInBounce(2*e):.5*aC.easeOutBounce(2*e-1)+.5};function oC(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function sC(e){return oC(e)?e:new Yk(e)}function lC(e){return oC(e)?e:new Yk(e).saturate(.5).darken(.1).hexString()}const uC=["x","y","borderWidth","radius","tension"],cC=["color","borderColor","backgroundColor"];const dC=new Map;function hC(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=dC.get(n);return r||(r=new Intl.NumberFormat(e,t),dC.set(n,r)),r}(t,n).format(e)}const fC={values:e=>Zk(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=R_(Math.abs(a)),s=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),hC(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(R_(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?fC.numeric.call(this,e,t,n):""}};var pC={formatters:fC};const mC=Object.create(null),gC=Object.create(null);function vC(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function xC(e,t,n){return"string"===typeof t?d_(vC(e,t),n):d_(vC(e,""),t)}class yC{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>lC(t.backgroundColor),this.hoverBorderColor=(e,t)=>lC(t.borderColor),this.hoverColor=(e,t)=>lC(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return xC(this,e,t)}get(e){return vC(this,e)}describe(e,t){return xC(gC,e,t)}override(e,t){return xC(mC,e,t)}route(e,t,n,r){const i=vC(this,e),a=vC(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=a[r];return e_(e)?Object.assign({},t,e):r_(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var bC=new yC({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:cC},numbers:{type:"number",properties:uC}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function wC(e,t,n,r,i){let a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function kC(e,t,n,r){let i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const s=n.length;let l,u,c,d,h;for(l=0;l<s;l++)if(d=n[l],void 0===d||null===d||Zk(d)){if(Zk(d))for(u=0,c=d.length;u<c;u++)h=d[u],void 0===h||null===h||Zk(h)||(o=wC(e,i,a,o,h))}else o=wC(e,i,a,o,d);e.restore();const f=a.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[a[l]];a.splice(0,f)}return o}function _C(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function CC(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function SC(e,t,n,r){EC(e,t,n,r,null)}function EC(e,t,n,r,i){let a,o,s,l,u,c,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*C_;if(f&&"object"===typeof f&&(a=f.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,w_):e.arc(n,r,m,0,w_),e.closePath();break;case"triangle":c=i?i/2:m,e.moveTo(n+Math.sin(g)*c,r-Math.cos(g)*m),g+=N_,e.lineTo(n+Math.sin(g)*c,r-Math.cos(g)*m),g+=N_,e.lineTo(n+Math.sin(g)*c,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":u=.516*m,l=m-u,o=Math.cos(g+E_)*l,d=Math.cos(g+E_)*(i?i/2-u:l),s=Math.sin(g+E_)*l,h=Math.sin(g+E_)*(i?i/2-u:l),e.arc(n-d,r-s,u,g-b_,g-S_),e.arc(n+h,r-o,u,g-S_,g),e.arc(n+d,r+s,u,g,g+S_),e.arc(n-h,r+o,u,g+S_,g+b_),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,c=i?i/2:l,e.rect(n-c,r-l,2*c,2*l);break}g+=E_;case"rectRot":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+h,r-o),e.lineTo(n+d,r+s),e.lineTo(n-h,r+o),e.closePath();break;case"crossRot":g+=E_;case"cross":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o);break;case"star":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o),g+=E_,d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,s=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-s),e.lineTo(n+d,r+s),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,s=Math.sin(g)*m,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function NC(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function RC(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function TC(e){e.restore()}function IC(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function DC(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function AC(e,t,n,r,i){if(i.strikethrough||i.underline){const a=e.measureText(r),o=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,c),e.lineTo(s,c),e.stroke()}}function PC(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function MC(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Zk(t)?t:[t],s=a.strokeWidth>0&&""!==a.strokeColor;let l,u;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Jk(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<o.length;++l)u=o[l],a.backdrop&&PC(e,a.backdrop),s&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),Jk(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(u,n,r,a.maxWidth)),e.fillText(u,n,r,a.maxWidth),AC(e,n,r,u,a),r+=Number(i.lineHeight);e.restore()}function OC(e,t){const{x:n,y:r,w:i,h:a,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*b_,b_,!0),e.lineTo(n,r+a-o.bottomLeft),e.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,b_,S_,!0),e.lineTo(n+i-o.bottomRight,r+a),e.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,S_,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-S_,!0),e.lineTo(n+o.topLeft,r)}const FC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function LC(e,t){const n=(""+e).match(FC);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const BC=e=>+e||0;function zC(e,t){const n={},r=e_(t),i=r?Object.keys(t):t,a=e_(e)?r?n=>r_(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=BC(a(o));return n}function WC(e){return zC(e,{top:"y",right:"x",bottom:"y",left:"x"})}function VC(e){return zC(e,["topLeft","topRight","bottomLeft","bottomRight"])}function UC(e){const t=WC(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function HC(e,t){e=e||{},t=t||bC.font;let n=r_(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=r_(e.style,t.style);r&&!(""+r).match(jC)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:r_(e.family,t.family),lineHeight:LC(r_(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:r_(e.weight,t.weight),string:""};return i.string=function(e){return!e||Jk(e.size)||Jk(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function GC(e,t,n,r){let i,a,o,s=!0;for(i=0,a=e.length;i<a;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&Zk(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function qC(e,t){return Object.assign(Object.create(e),t)}function KC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=iS("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>KC([r,...e],t,i,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>JC(n,r,(()=>function(e,t,n,r){let i;for(const a of t)if(i=iS($C(a,e),n),"undefined"!==typeof i)return QC(e,i)?nS(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>aS(e).includes(t),ownKeys:e=>aS(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function XC(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:YC(e,r),setContext:t=>XC(e,t,n,r),override:i=>XC(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>JC(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=e;let s=r[t];x_(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:o,_stack:s}=n;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);let l=t(a,o||r);s.delete(e),QC(e,l)&&(l=nS(i._scopes,i,e,l));return l}(t,s,e,n));Zk(s)&&s.length&&(s=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:o,_descriptors:s}=n;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(e_(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=nS(r,i,e,l);t.push(XC(n,a,o&&o[e],s))}}return t}(t,s,e,o.isIndexable));QC(t,s)&&(s=XC(s,i,a&&a[t],o));return s}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function YC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:x_(n)?n:()=>n,isIndexable:x_(r)?r:()=>r}}const $C=(e,t)=>e?e+g_(t):t,QC=(e,t)=>e_(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function JC(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function ZC(e,t,n){return x_(e)?e(t,n):e}const eS=(e,t)=>!0===e?t:"string"===typeof e?m_(t,e):void 0;function tS(e,t,n,r,i){for(const a of t){const t=eS(n,a);if(t){e.add(t);const a=ZC(t._fallback,n,i);if("undefined"!==typeof a&&a!==n&&a!==r)return a}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function nS(e,t,n,r){const i=t._rootScopes,a=ZC(t._fallback,n,r),o=[...e,...i],s=new Set;s.add(r);let l=rS(s,o,n,a||n,r);return null!==l&&(("undefined"===typeof a||a===n||(l=rS(s,o,a,l,r),null!==l))&&KC(Array.from(s),[""],i,a,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(Zk(i)&&e_(n))return n;return i||{}}(t,n,r))))}function rS(e,t,n,r,i){for(;n;)n=tS(e,t,n,r,i);return n}function iS(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function aS(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function oS(e,t,n,r){const{iScale:i}=e,{key:a="r"}=this._parsing,o=new Array(r);let s,l,u,c;for(s=0,l=r;s<l;++s)u=s+n,c=t[u],o[s]={r:i.parse(m_(c,a),u)};return o}const sS=Number.EPSILON||1e-14,lS=(e,t)=>t<e.length&&!e[t].skip&&e[t],uS=e=>"x"===e?"y":"x";function cS(e,t,n,r){const i=e.skip?t:e,a=t,o=n.skip?t:n,s=L_(a,i),l=L_(o,a);let u=s/(s+l),c=l/(s+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=r*u,h=r*c;return{previous:{x:a.x-d*(o.x-i.x),y:a.y-d*(o.y-i.y)},next:{x:a.x+h*(o.x-i.x),y:a.y+h*(o.y-i.y)}}}function dS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=uS(t),r=e.length,i=Array(r).fill(0),a=Array(r);let o,s,l,u=lS(e,0);for(o=0;o<r;++o)if(s=l,l=u,u=lS(e,o+1),l){if(u){const e=u[t]-l[t];i[o]=0!==e?(u[n]-l[n])/e:0}a[o]=s?u?T_(i[o-1])!==T_(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,a,o,s,l,u=lS(e,0);for(let c=0;c<r-1;++c)l=u,u=lS(e,c+1),l&&u&&(I_(t[c],0,sS)?n[c]=n[c+1]=0:(i=n[c]/t[c],a=n[c+1]/t[c],s=Math.pow(i,2)+Math.pow(a,2),s<=9||(o=3/Math.sqrt(s),n[c]=i*o*t[c],n[c+1]=a*o*t[c])))}(e,i,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=uS(n),i=e.length;let a,o,s,l=lS(e,0);for(let u=0;u<i;++u){if(o=s,s=l,l=lS(e,u+1),!s)continue;const i=s[n],c=s[r];o&&(a=(i-o[n])/3,s["cp1".concat(n)]=i-a,s["cp1".concat(r)]=c-a*t[u]),l&&(a=(l[n]-i)/3,s["cp2".concat(n)]=i+a,s["cp2".concat(r)]=c+a*t[u])}}(e,a,t)}function hS(e,t,n){return Math.max(Math.min(e,n),t)}function fS(e,t,n,r,i){let a,o,s,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)dS(e,i);else{let n=r?e[e.length-1]:e[0];for(a=0,o=e.length;a<o;++a)s=e[a],l=cS(n,s,e[Math.min(a+1,o-(r?0:1))%o],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}t.capBezierPoints&&function(e,t){let n,r,i,a,o,s=NC(e[0],t);for(n=0,r=e.length;n<r;++n)o=a,a=s,s=n<r-1&&NC(e[n+1],t),a&&(i=e[n],o&&(i.cp1x=hS(i.cp1x,t.left,t.right),i.cp1y=hS(i.cp1y,t.top,t.bottom)),s&&(i.cp2x=hS(i.cp2x,t.left,t.right),i.cp2y=hS(i.cp2y,t.top,t.bottom)))}(e,n)}function pS(){return"undefined"!==typeof window&&"undefined"!==typeof document}function mS(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function gS(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const vS=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const xS=["top","right","bottom","left"];function yS(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=xS[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const bS=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function wS(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=vS(n),a="border-box"===i.boxSizing,o=yS(i,"padding"),s=yS(i,"border","width"),{x:l,y:u,box:c}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:a}=r;let o,s,l=!1;if(bS(i,a,e.target))o=i,s=a;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,s=r.clientY-e.top,l=!0}return{x:o,y:s,box:l}}(e,n),d=o.left+(c&&s.left),h=o.top+(c&&s.top);let{width:f,height:p}=t;return a&&(f-=o.width+s.width,p-=o.height+s.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((u-h)/p*n.height/r)}}const kS=e=>Math.round(10*e)/10;function _S(e,t,n,r){const i=vS(e),a=yS(i,"margin"),o=gS(i.maxWidth,e,"clientWidth")||__,s=gS(i.maxHeight,e,"clientHeight")||__,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const a=mS(e);if(a){const e=a.getBoundingClientRect(),o=vS(a),s=yS(o,"border","width"),l=yS(o,"padding");t=e.width-l.width-s.width,n=e.height-l.height-s.height,r=gS(o.maxWidth,a,"clientWidth"),i=gS(o.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||__,maxHeight:i||__}}(e,t,n);let{width:u,height:c}=l;if("content-box"===i.boxSizing){const e=yS(i,"border","width"),t=yS(i,"padding");u-=t.width+e.width,c-=t.height+e.height}u=Math.max(0,u-a.width),c=Math.max(0,r?u/r:c-a.height),u=kS(Math.min(u,o,l.maxWidth)),c=kS(Math.min(c,s,l.maxHeight)),u&&!c&&(c=kS(u/2));return(void 0!==t||void 0!==n)&&r&&l.height&&c>l.height&&(c=l.height,u=kS(Math.floor(c*r))),{width:u,height:c}}function CS(e,t,n){const r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==a)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const SS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};pS()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(bt){}return e}();function ES(e,t){const n=function(e,t){return vS(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function NS(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function RS(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function TS(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},o=NS(e,i,n),s=NS(i,a,n),l=NS(a,t,n),u=NS(o,s,n),c=NS(s,l,n);return NS(u,c,n)}function IS(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function DS(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function AS(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function PS(e){return"angle"===e?{between:W_,compare:B_,normalize:z_}:{between:U_,compare:(e,t)=>e-t,normalize:e=>e}}function MS(e){let{start:t,end:n,count:r,loop:i,style:a}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:a}}function OS(e,t,n){if(!n)return[e];const{property:r,start:i,end:a}=n,o=t.length,{compare:s,between:l,normalize:u}=PS(r),{start:c,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:a}=n,{between:o,normalize:s}=PS(r),l=t.length;let u,c,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,u=0,c=l;u<c&&o(s(t[d%l][r]),i,a);++u)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,x=!1,y=null;const b=()=>x||l(i,v,m)&&0!==s(i,v),w=()=>!x||0===s(a,m)||l(a,v,m);for(let k=c,_=c;k<=d;++k)g=t[k%o],g.skip||(m=u(g[r]),m!==v&&(x=l(m,i,a),null===y&&b()&&(y=0===s(m,i)?k:_),null!==y&&w()&&(p.push(MS({start:y,end:k,loop:h,count:o,style:f})),y=null),_=k,v=m));return null!==y&&p.push(MS({start:y,end:d,loop:h,count:o,style:f})),p}function FS(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const a=OS(r[i],e.points,t);a.length&&n.push(...a)}return n}function jS(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),a=LS(e.options),{_datasetIndex:o,options:{spanGaps:s}}=e,l=n.length,u=[];let c=a,d=t[0].start,h=d;function f(e,t,r,i){const a=s?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(u.push({start:e%l,end:t%l,loop:r,style:i}),c=i,d=t%l)}}for(const p of t){d=s?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const a=n[h%l];e=LS(r.setContext(qC(i,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),BS(e,c)&&f(d,h-1,p.loop,c),t=a,c=e}d<h-1&&f(d,h-1,p.loop,c)}return u}(e,t,n,r):t}function LS(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function BS(e,t){if(!t)return!1;const n=[],r=function(e,t){return oC(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class zS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],a=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)})))}_refresh(){this._request||(this._running=!0,this._request=$_.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a,o=i.length-1,s=!1;for(;o>=0;--o)a=i[o],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),s=!0):(i[o]=i[i.length-1],i.pop());s&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var WS=new zS;const VS="transparent",US={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=sC(e||VS),i=r.valid&&sC(t||VS);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class HS{constructor(e,t,n,r){const i=t[n];r=GC([e.to,r,i,e.from]);const a=GC([e.from,i,r]);this._active=!0,this._fn=e.fn||US[e.type||typeof a],this._easing=aC[e.easing]||aC.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=GC([e.to,t,r,e.from]),this._from=GC([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,o=this._to;let s;if(this._active=i!==o&&(a||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(s=t/n%2,s=a&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(i,o,s))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class GS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!e_(e))return;const t=Object.keys(bC.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!e_(i))return;const a={};for(const e of t)a[e]=i[e];(Zk(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,a)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let s;for(s=a.length-1;s>=0;--s){const l=a[s];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const u=t[l];let c=i[l];const d=n.get(l);if(c){if(d&&c.active()){c.update(d,u,o);continue}c.cancel()}d&&d.duration?(i[l]=c=new HS(d,e,l,u),r.push(c)):e[l]=u}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(WS.add(this._chart,n),!0):void 0}}function qS(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function KS(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function XS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,a="single"===r.mode;let o,s,l,u;if(null!==t){for(o=0,s=i.length;o<s;++o){if(l=+i[o],l===n){if(r.all)continue;break}u=e.values[l],t_(u)&&(a||0===t||T_(t)===T_(u))&&(t+=u)}return t}}function YS(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function $S(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function QS(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function JS(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:s}=r,l=a.axis,u=o.axis,c=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,o,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[u]:a}=e;h=(e._stacks||(e._stacks={}))[u]=$S(i,c,n),h[s]=a,h._top=QS(h,o,!0,r.type),h._bottom=QS(h,o,!1,r.type);(h._visualValues||(h._visualValues={}))[s]=a}}function ZS(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function eE(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const tE=e=>"reset"===e||"none"===e,nE=(e,t)=>t?e:Object.assign({},e);class rE{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=YS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&eE(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=r_(n.xAxisID,ZS(e,"x")),a=t.yAxisID=r_(n.yAxisID,ZS(e,"y")),o=t.rAxisID=r_(n.rAxisID,ZS(e,"r")),s=t.indexAxis,l=t.iAxisID=r(s,i,a,o),u=t.vAxisID=r(s,a,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&X_(this._data,this),e._stacked&&eE(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(e_(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r],n[r]={x:a,y:e[a]};return n}(t);else if(n!==t){if(n){X_(n,this);const e=this._cachedMeta;eE(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),K_.forEach((t=>{const n="_onData"+g_(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const o=r.apply(this,i);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...i)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=YS(t.vScale,t),t.stack!==n.stack&&(r=!0,eE(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&JS(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,o=i.axis;let s,l,u,c=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,u=r;else{u=Zk(r[e])?this.parseArrayData(n,r,e,t):e_(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||d&&l[o]<d[o];for(s=0;s<t;++s)n._parsed[s+e]=l=u[s],c&&(i()&&(c=!1),d=l);n._sorted=c}a&&JS(this,u)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:a}=e,o=i.axis,s=a.axis,l=i.getLabels(),u=i===a,c=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,c[d]={[o]:u||i.parse(l[f],f),[s]:a.parse(t[f],f)};return c}parseArrayData(e,t,n,r){const{xScale:i,yScale:a}=e,o=new Array(r);let s,l,u,c;for(s=0,l=r;s<l;++s)u=s+n,c=t[u],o[s]={x:i.parse(c[0],u),y:a.parse(c[1],u)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:s="y"}=this._parsing,l=new Array(r);let u,c,d,h;for(u=0,c=r;u<c;++u)d=u+n,h=t[d],l[u]={x:i.parse(m_(h,o),d),y:a.parse(m_(h,s),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,a=t[e.axis];return XS({keys:KS(r,!0),values:t._stacks[e.axis]._visualValues},a,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let a=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,a=XS(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,o=this._getOtherScale(e),s=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:KS(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:c}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let d,h;function f(){h=r[d];const t=h[o.axis];return!t_(h[e.axis])||u>t||c<t}for(d=0;d<a&&(f()||(this.updateRangeFromParsed(l,e,h,s),!i));++d);if(i)for(d=a-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,s);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r][e.axis],t_(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return e_(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(r_(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=qS(e,n),i=qS(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,a=[],o=this._drawStart||0,s=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,o,s),u=o;u<o+s;++u){const t=r[u];t.hidden||(t.active&&l?a.push(t):t.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return qC(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return qC(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,a=e+"-"+t,o=i[a],s=this.enableOptionSharing&&v_(n);if(o)return nE(o,s);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),c=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),u),h=Object.keys(bC.elements[e]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,r,t)),c);return f.$shared&&(f.$shared=s,i[a]=Object.freeze(nE(f,s))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,a="animation-".concat(t),o=i[a];if(o)return o;let s;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),i);s=r.createResolver(a,this.getContext(e,n,t))}const l=new GS(r,s&&s.animations);return s&&s._cacheable&&(i[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||tE(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}updateElement(e,t,n,r){tE(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!tE(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,s,l]of this._syncList)this[o](s,l);this._syncList=[];const r=n.length,i=t.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,a=e+t;let o;const s=e=>{for(e.length+=t,o=e.length-1;o>=a;o--)e[o]=e[o-t]};for(s(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&eE(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iE(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Y_(r.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let r,i,a,o,s=t._length;const l=()=>{32767!==a&&-32768!==a&&(v_(o)&&(s=Math.min(s,Math.abs(a-o)||s)),o=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),l();return s}function aE(e,t,n,r){return Zk(e)?function(e,t,n,r){const i=n.parse(e[0],r),a=n.parse(e[1],r),o=Math.min(i,a),s=Math.max(i,a);let l=o,u=s;Math.abs(o)>Math.abs(s)&&(l=s,u=o),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:i,end:a,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function oE(e,t,n,r){const i=e.iScale,a=e.vScale,o=i.getLabels(),s=i===a,l=[];let u,c,d,h;for(u=n,c=n+r;u<c;++u)h=t[u],d={},d[i.axis]=s||i.parse(o[u],u),l.push(aE(h,d,a,u));return l}function sE(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function lE(e,t,n,r){let i=t.borderSkipped;const a={};if(!i)return void(e.borderSkipped=a);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:s,reverse:l,top:u,bottom:c}=function(e){let t,n,r,i,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:t,top:i,bottom:a}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=c:(a[uE(c,o,s,l)]=!0,i=u)),a[uE(i,o,s,l)]=!0,e.borderSkipped=a}function uE(e,t,n,r){var i,a,o;return r?(o=n,e=cE(e=(i=e)===(a=t)?o:i===o?a:i,n,t)):e=cE(e,t,n),e}function cE(e,t,n){return"start"===e?t:"end"===e?n:e}function dE(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}gk(rE,"defaults",{}),gk(rE,"datasetElementType",null),gk(rE,"dataElementType",null);class hE extends rE{parsePrimitiveData(e,t,n,r){return oE(e,t,n,r)}parseArrayData(e,t,n,r){return oE(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:a}=e,{xAxisKey:o="x",yAxisKey:s="y"}=this._parsing,l="x"===i.axis?o:s,u="x"===a.axis?o:s,c=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=t[d],f={},f[i.axis]=i.parse(m_(p,l),d),c.push(aE(m_(p,u),f,a,d));return c}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),a=i._custom,o=sE(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:a,_cachedMeta:{vScale:o}}=this,s=o.getBasePixel(),l=o.isHorizontal(),u=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||Jk(t[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,u),p=(t._stacks||{})[o.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||sE(t._custom)||a===p._top||a===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(m.options=c||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;lE(m,g,p,a),dE(m,g,u.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,a=[],o=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(Jk(r)||isNaN(r))return!0};for(const s of r)if((void 0===t||!o(s))&&((!1===i||-1===a.indexOf(s.stack)||void 0===i&&void 0===s.stack)&&a.push(s.stack),s.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,a;for(i=0,a=t.data.length;i<a;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||iE(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:a}}=this,o=i||0,s=this.getParsed(e),l=s._custom,u=sE(l);let c,d,h=s[t.axis],f=0,p=n?this.applyStack(t,s,n):h;p!==h&&(f=p-h,p=h),u&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&T_(h)!==T_(l.barEnd)&&(f=0),f+=h);const m=Jk(i)||u?f:i;let g=t.getPixelForValue(m);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,d=c-g,Math.abs(d)<a){d=function(e,t,n){return 0!==e?T_(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,o)*a,h===o&&(g-=d/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),c=g+d,n&&!u&&(s._stacks[t.axis]._visualValues[r]=t.getValueForPixel(c)-t.getValueForPixel(g))}if(g===t.getPixelForValue(o)){const e=T_(d)*t.getLineWidthForValue(o)/2;g+=e,d-=e}return{size:d,base:g,head:c,center:c+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,a=r_(r.maxBarThickness,1/0);let o,s;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,a=i[e];let o=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===o&&(o=a-(null===s?t.end-t.start:s-a)),null===s&&(s=a+a-o);const u=a-(a-Math.min(o,s))/2*l;return{chunk:Math.abs(s-o)/2*l/r,ratio:n.barPercentage,start:u}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let a,o;return Jk(i)?(a=t.min*n.categoryPercentage,o=n.barPercentage):(a=i*r,o=1),{chunk:a/r,ratio:o,start:t.pixels[e]-a/2}}(e,t,r,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);o=l.start+l.chunk*u+l.chunk/2,s=Math.min(a,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),s=Math.min(a,t.min*t.ratio);return{base:o-s/2,head:o+s/2,center:o,size:s}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}gk(hE,"id","bar"),gk(hE,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),gk(hE,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class fE extends rE{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=r_(e[2],this.resolveDataElementOptions(a+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=r_(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+s+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(t,r),u=a.axis,c=o.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!i&&this.getParsed(d),h={},f=h[u]=i?a.getPixelForDecimal(.5):a.getPixelForValue(n[u]),p=h[c]=i?o.getBasePixel():o.getPixelForValue(n[c]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=s||this.resolveDataElementOptions(d,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=r_(n&&n._custom,i),r}}gk(fE,"id","bubble"),gk(fE,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),gk(fE,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class pE extends rE{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,a,o=e=>+n[e];if(e_(n[e])){const{key:e="value"}=this._parsing;o=t=>+m_(n[t],e)}for(i=e,a=e+t;i<a;++i)r._parsed[i]=o(i)}}_getRotation(){return M_(this.options.rotation-90)}_getCircumference(){return M_(this.options.circumference)}_getRotationExtents(){let e=w_,t=-w_;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),s=Math.min((l=this.options.cutout,u=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/u),1);var l,u;const c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,a=0,o=0;if(t<w_){const s=e,l=s+t,u=Math.cos(s),c=Math.sin(s),d=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>W_(e,s,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>W_(e,s,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,u,d),g=f(S_,c,h),v=p(b_,u,d),x=p(b_+S_,c,h);r=(m-v)/2,i=(g-x)/2,a=-(m+v)/2,o=-(g+x)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}(h,d,s),v=(n.width-a)/f,x=(n.height-a)/p,y=Math.max(Math.min(v,x)/2,0),b=i_(this.options.radius,y),w=(b-Math.max(b*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,r.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/w_)}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,o=a.chartArea,s=a.options.animation,l=(o.left+o.right)/2,u=(o.top+o.bottom)/2,c=i&&s.animateScale,d=c?0:this.innerRadius,h=c?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],a={x:l+this.offsetX,y:u+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};p&&(a.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?w_*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=hC(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,a,o,s;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,o=a.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)s=o.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(t=Math.max(t,s.borderWidth||0,s.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(r_(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}gk(pE,"id","doughnut"),gk(pE,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),gk(pE,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),gk(pE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const a=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class mE extends rE{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,a=this.chart._animationsDisabled;let{start:o,count:s}=eC(t,r,a);this._drawStart=o,this._drawCount=s,tC(t)&&(o=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,o,s,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:c}=this._getSharedOptions(t,r),d=a.axis,h=o.axis,{spanGaps:f,segment:p}=this.options,m=A_(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,x=e.length;let y=t>0&&this.getParsed(t-1);for(let b=0;b<x;++b){const n=e[b],f=g?n:{};if(b<t||b>=v){f.skip=!0;continue}const x=this.getParsed(b),w=Jk(x[h]),k=f[d]=a.getPixelForValue(x[d],b),_=f[h]=i||w?o.getBasePixel():o.getPixelForValue(s?this.applyStack(o,x,s):x[h],b);f.skip=isNaN(k)||isNaN(_)||w,f.stop=b>0&&Math.abs(x[d]-y[d])>m,p&&(f.parsed=x,f.raw=l.data[b]),c&&(f.options=u||this.resolveDataElementOptions(b,n.active?"active":r)),g||this.updateElement(n,b,f,r),y=x}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}gk(mE,"id","line"),gk(mE,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),gk(mE,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class gE extends rE{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=hC(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return oS.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,o=a.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,u=s.yCenter,c=s.getIndexAngle(0)-.5*b_;let d,h=c;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,p=h+this._computeAngle(d,r,f),m=a.getDataVisibility(d)?s.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(o.animateScale&&(m=0),o.animateRotate&&(n=p=c));const g={x:l,y:u,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?M_(this.resolveDataElementOptions(e,t).angle||n):0}}gk(gE,"id","polarArea"),gk(gE,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),gk(gE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map(((t,i)=>{const a=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class vE extends pE{}gk(vE,"id","pie"),gk(vE,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xE extends rE{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return oS.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,a="reset"===r;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":r),s=i.getPointPositionForValue(o,this.getParsed(o).r),l=a?i.xCenter:s.x,u=a?i.yCenter:s.y,c={x:l,y:u,angle:s.angle,skip:isNaN(l)||isNaN(u),options:n};this.updateElement(t,o,c,r)}}}gk(xE,"id","radar"),gk(xE,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),gk(xE,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class yE extends rE{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+s+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:a}=eC(t,n,r);if(this._drawStart=i,this._drawCount=a,tC(t)&&(i=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:a}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:o,_stacked:s,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),c=this.getSharedOptions(u),d=this.includeOptions(r,c),h=a.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,g=A_(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let x=t>0&&this.getParsed(t-1);for(let y=t;y<t+n;++y){const t=e[y],n=this.getParsed(y),u=v?t:{},p=Jk(n[f]),b=u[h]=a.getPixelForValue(n[h],y),w=u[f]=i||p?o.getBasePixel():o.getPixelForValue(s?this.applyStack(o,n,s):n[f],y);u.skip=isNaN(b)||isNaN(w)||p,u.stop=y>0&&Math.abs(n[h]-x[h])>g,m&&(u.parsed=n,u.raw=l.data[y]),d&&(u.options=c||this.resolveDataElementOptions(y,t.active?"active":r)),v||this.updateElement(t,y,u,r),x=n}this.updateSharedOptions(c,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,a)/2}}gk(yE,"id","scatter"),gk(yE,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),gk(yE,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var bE=Object.freeze({__proto__:null,BarController:hE,BubbleController:fE,DoughnutController:pE,LineController:mE,PieController:vE,PolarAreaController:gE,RadarController:xE,ScatterController:yE});function wE(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class kE{static override(e){Object.assign(kE.prototype,e)}constructor(e){gk(this,"options",void 0),this.options=e||{}}init(){}formats(){return wE()}parse(){return wE()}format(){return wE()}add(){return wE()}diff(){return wE()}startOf(){return wE()}endOf(){return wE()}}var _E=kE;function CE(e,t,n,r){const{controller:i,data:a,_sorted:o}=e,s=i._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&a.length){const e=s._reversePixels?q_:G_;if(!r)return e(a,t,n);if(i._sharedOptions){const r=a[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(a,t,n-i),o=e(a,t,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:a.length-1}}function SE(e,t,n,r,i){const a=e.getSortedVisibleDatasetMetas(),o=n[t];for(let s=0,l=a.length;s<l;++s){const{index:e,data:n}=a[s],{lo:l,hi:u}=CE(a[s],t,o,i);for(let t=l;t<=u;++t){const i=n[t];i.skip||r(i,e,t)}}}function EE(e,t,n,r,i){const a=[];if(!i&&!e.isPointInArea(t))return a;return SE(e,n,t,(function(n,o,s){(i||NC(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:o,index:s})}),!0),a}function NE(e,t,n,r,i,a){let o=[];const s=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return SE(e,n,t,(function(n,u,c){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!a||e.isPointInArea(h))&&!d)return;const f=s(t,h);f<l?(o=[{element:n,datasetIndex:u,index:c}],l=f):f===l&&o.push({element:n,datasetIndex:u,index:c})})),o}function RE(e,t,n,r,i,a){return a||e.isPointInArea(t)?"r"!==n||r?NE(e,t,n,r,i,a):function(e,t,n,r){let i=[];return SE(e,n,t,(function(e,n,a){const{startAngle:o,endAngle:s}=e.getProps(["startAngle","endAngle"],r),{angle:l}=j_(e,{x:t.x,y:t.y});W_(l,o,s)&&i.push({element:e,datasetIndex:n,index:a})})),i}(e,t,n,i):[]}function TE(e,t,n,r,i){const a=[],o="x"===n?"inXRange":"inYRange";let s=!1;return SE(e,n,t,((e,r,l)=>{e[o](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),s=s||e.inRange(t.x,t.y,i))})),r&&!s?[]:a}var IE={evaluateInteractionItems:SE,modes:{index(e,t,n,r){const i=wS(t,e),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?EE(e,i,a,r,o):RE(e,i,a,!1,r,o),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=wS(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;let s=n.intersect?EE(e,i,a,r,o):RE(e,i,a,!1,r,o);if(s.length>0){const t=s[0].datasetIndex,n=e.getDatasetMeta(t).data;s=[];for(let e=0;e<n.length;++e)s.push({element:n[e],datasetIndex:t,index:e})}return s},point:(e,t,n,r)=>EE(e,wS(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=wS(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;return RE(e,i,a,n.intersect,r,o)},x:(e,t,n,r)=>TE(e,wS(t,e),"x",n.intersect,r),y:(e,t,n,r)=>TE(e,wS(t,e),"y",n.intersect,r)}};const DE=["left","top","right","bottom"];function AE(e,t){return e.filter((e=>e.pos===t))}function PE(e,t){return e.filter((e=>-1===DE.indexOf(e.pos)&&e.box.axis===t))}function ME(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function OE(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!DE.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let a,o,s;for(a=0,o=e.length;a<o;++a){s=e[a];const{fullSize:o}=s.box,l=n[s.stack],u=l&&s.stackWeight/l.weight;s.horizontal?(s.width=u?u*r:o&&t.availableWidth,s.height=i):(s.width=r,s.height=u?u*i:o&&t.availableHeight)}return n}function FE(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function jE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function LE(e,t,n,r){const{pos:i,box:a}=n,o=e.maxPadding;if(!e_(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[i]+=n.size}a.getPadding&&jE(o,a.getPadding());const s=Math.max(0,t.outerWidth-FE(o,e,"left","right")),l=Math.max(0,t.outerHeight-FE(o,e,"top","bottom")),u=s!==e.w,c=l!==e.h;return e.w=s,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function BE(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function zE(e,t,n,r){const i=[];let a,o,s,l,u,c;for(a=0,o=e.length,u=0;a<o;++a){s=e[a],l=s.box,l.update(s.width||t.w,s.height||t.h,BE(s.horizontal,t));const{same:o,other:d}=LE(t,n,s,r);u|=o&&i.length,c=c||d,l.fullSize||i.push(s)}return u&&zE(i,t,n,r)||c}function WE(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function VE(e,t,n,r){const i=n.padding;let{x:a,y:o}=t;for(const s of e){const e=s.box,l=r[s.stack]||{count:1,placed:0,weight:1},u=s.stackWeight/l.weight||1;if(s.horizontal){const r=t.w*u,a=l.size||e.height;v_(l.start)&&(o=l.start),e.fullSize?WE(e,i.left,o,n.outerWidth-i.right-i.left,a):WE(e,t.left+l.placed,o,r,a),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*u,o=l.size||e.width;v_(l.start)&&(a=l.start),e.fullSize?WE(e,a,i.top,o,n.outerHeight-i.bottom-i.top):WE(e,a,t.top+l.placed,o,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=o}var UE={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=UC(e.options.layout.padding),a=Math.max(t-i.width,0),o=Math.max(n-i.height,0),s=function(e){const t=function(e){const t=[];let n,r,i,a,o,s;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:a,options:{stack:o,stackWeight:s=1}}=i),t.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:s});return t}(e),n=ME(t.filter((e=>e.box.fullSize)),!0),r=ME(AE(t,"left"),!0),i=ME(AE(t,"right")),a=ME(AE(t,"top"),!0),o=ME(AE(t,"bottom")),s=PE(t,"x"),l=PE(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(o).concat(s),chartArea:AE(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(o).concat(s)}}(e.boxes),l=s.vertical,u=s.horizontal;o_(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const c=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/c,hBoxMaxHeight:o/2}),h=Object.assign({},i);jE(h,UC(r));const f=Object.assign({maxPadding:h,w:a,h:o,x:i.left,y:i.top},i),p=OE(l.concat(u),d);zE(s.fullSize,f,d,p),zE(l,f,d,p),zE(u,f,d,p)&&zE(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),VE(s.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,VE(s.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},o_(s.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class HE{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class GE extends HE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const qE="$chartjs",KE={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},XE=e=>null===e||""===e;const YE=!!SS&&{passive:!0};function $E(e,t,n){e.canvas.removeEventListener(t,n,YE)}function QE(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function JE(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||QE(n.addedNodes,r),t=t&&!QE(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function ZE(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||QE(n.removedNodes,r),t=t&&!QE(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const eN=new Map;let tN=0;function nN(){const e=window.devicePixelRatio;e!==tN&&(tN=e,eN.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function rN(e,t,n){const r=e.canvas,i=r&&mS(r);if(!i)return;const a=Q_(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)}));return o.observe(i),function(e,t){eN.size||window.addEventListener("resize",nN),eN.set(e,t)}(e,a),o}function iN(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){eN.delete(e),eN.size||window.removeEventListener("resize",nN)}(e)}function aN(e,t,n){const r=e.canvas,i=Q_((t=>{null!==e.ctx&&n(function(e,t){const n=KE[e.type]||e.type,{x:r,y:i}=wS(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e.addEventListener(t,n,YE)}(r,t,i),i}class oN extends HE{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[qE]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",XE(i)){const t=ES(e,"width");void 0!==t&&(e.width=t)}if(XE(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ES(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[qE])return!1;const n=t[qE].initial;["height","width"].forEach((e=>{const r=n[e];Jk(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[qE],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:JE,detach:ZE,resize:rN}[t]||aN;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:iN,detach:iN,resize:iN}[t]||$E)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return _S(e,t,n,r)}isAttached(e){const t=mS(e);return!(!t||!t.isConnected)}}class sN{constructor(){gk(this,"x",void 0),gk(this,"y",void 0),gk(this,"active",!1),gk(this,"options",void 0),gk(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return A_(this.x)&&A_(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function lN(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=a.length,s=a[0],l=a[o-1],u=[];if(o>i)return function(e,t,n,r){let i,a=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),a++,o=n[a*r])}(t,u,a,o/i),u;const c=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let o=0,s=a.length-1;o<s;o++){const e=a[o];if(e>i)return e}return Math.max(i,1)}(a,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-s)/(o-1)):null;for(uN(t,u,c,Jk(r)?0:s-r,s),e=0,n=o-1;e<n;e++)uN(t,u,c,a[e],a[e+1]);return uN(t,u,c,l,Jk(r)?t.length:l+r),u}return uN(t,u,c),u}function uN(e,t,n,r,i){const a=r_(r,0),o=Math.min(r_(i,e.length),e.length);let s,l,u,c=0;for(n=Math.ceil(n),i&&(s=i-r,n=s/Math.floor(s/n)),u=a;u<0;)c++,u=Math.round(a+c*n);for(l=Math.max(a,0);l<o;l++)l===u&&(t.push(e[l]),c++,u=Math.round(a+c*n))}gk(sN,"defaults",{}),gk(sN,"defaultRoutes",void 0);const cN=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,dN=(e,t)=>Math.min(t||e,e);function hN(e,t){const n=[],r=e.length/t,i=e.length;let a=0;for(;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function fN(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),a=e._startPixel,o=e._endPixel,s=1e-6;let l,u=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(u-a,o-u):0===t?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(i-1))/2,u+=i<t?l:-l,u<a-s||u>o+s)))return u}function pN(e){return e.drawTicks?e.tickLength:0}function mN(e,t){if(!e.display)return 0;const n=HC(e.font,t),r=UC(e.padding);return(Zk(e.text)?e.text.length:1)*n.lineHeight+r.height}function gN(e,t,n){let r=J_(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class vN extends sN{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=n_(e,Number.POSITIVE_INFINITY),t=n_(t,Number.NEGATIVE_INFINITY),n=n_(n,Number.POSITIVE_INFINITY),r=n_(r,Number.NEGATIVE_INFINITY),{min:n_(e,n),max:n_(t,r),minDefined:t_(e),maxDefined:t_(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();if(i&&a)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let s=0,l=o.length;s<l;++s)t=o[s].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:n_(n,n_(r,n)),max:n_(r,n_(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){a_(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,a=i_(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(a)),max:o(i,a)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=o<this.ticks.length;this._convertTicksToLabels(s?hN(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=lN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){a_(this.options.afterUpdate,[this])}beforeSetDimensions(){a_(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){a_(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),a_(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){a_(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=a_(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){a_(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){a_(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=dN(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let a,o,s,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),c=u.widest.width,d=u.highest.height,h=V_(this.chart.width-c,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),c+6>a&&(a=h/(n-(e.offset?.5:1)),o=this.maxHeight-pN(e.grid)-t.padding-mN(e.title,this.chart.options.font),s=Math.sqrt(c*c+d*d),l=O_(Math.min(Math.asin(V_((u.highest.height+6)/a,-1,1)),Math.asin(V_(o/s,-1,1))-Math.asin(V_(d/s,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){a_(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){a_(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const a=mN(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=pN(i)+a):(e.height=this.maxHeight,e.width=pN(i)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:a}=this._getLabelSizes(),s=2*n.padding,l=M_(this.labelRotation),u=Math.cos(l),c=Math.sin(l);if(o){const t=n.mirror?0:c*i.width+u*a.height;e.height=Math.min(this.maxHeight,e.height+t+s)}else{const t=n.mirror?0:u*i.width+c*a.height;e.width=Math.min(this.maxWidth,e.width+t+s)}this._calculatePadding(t,r,c,u)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:a},position:o}=this.options,s=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;s?l?(c=r*e.width,d=n*t.height):(c=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?c=e.width:"inner"!==i&&(c=e.width/2,d=t.width/2),this.paddingLeft=Math.max((c-o+a)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-u+a)*this.width/(this.width-u),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){a_(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Jk(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=hN(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,a=[],o=[],s=Math.floor(t/dN(t,n));let l,u,c,d,h,f,p,m,g,v,x,y=0,b=0;for(l=0;l<t;l+=s){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},m=h.lineHeight,g=v=0,Jk(d)||Zk(d)){if(Zk(d))for(u=0,c=d.length;u<c;++u)x=d[u],Jk(x)||Zk(x)||(g=wC(r,p.data,p.gc,g,x),v+=m)}else g=wC(r,p.data,p.gc,g,d),v=m;a.push(g),o.push(v),y=Math.max(g,y),b=Math.max(v,b)}!function(e,t){o_(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=a.indexOf(y),k=o.indexOf(b),_=e=>({width:a[e]||0,height:o[e]||0});return{first:_(0),last:_(t-1),widest:_(w),highest:_(k),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return V_(this._alignToPixels?_C(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return qC(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return qC(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=M_(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:a,border:o}=r,s=i.offset,l=this.isHorizontal(),u=this.ticks.length+(s?1:0),c=pN(i),d=[],h=o.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return _C(n,e,f)};let g,v,x,y,b,w,k,_,C,S,E,N;if("top"===a)g=m(this.bottom),w=this.bottom-c,_=g-p,S=m(e.top)+p,N=e.bottom;else if("bottom"===a)g=m(this.top),S=e.top,N=m(e.bottom)-p,w=g+p,_=this.top+c;else if("left"===a)g=m(this.right),b=this.right-c,k=g-p,C=m(e.left)+p,E=e.right;else if("right"===a)g=m(this.left),C=e.left,E=m(e.right)-p,b=g+p,k=this.left+c;else if("x"===t){if("center"===a)g=m((e.top+e.bottom)/2+.5);else if(e_(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}S=e.top,N=e.bottom,w=g+p,_=w+c}else if("y"===t){if("center"===a)g=m((e.left+e.right)/2);else if(e_(a)){const e=Object.keys(a)[0],t=a[e];g=m(this.chart.scales[e].getPixelForValue(t))}b=g-p,k=b-c,C=e.left,E=e.right}const R=r_(r.ticks.maxTicksLimit,u),T=Math.max(1,Math.ceil(u/R));for(v=0;v<u;v+=T){const e=this.getContext(v),t=i.setContext(e),r=o.setContext(e),a=t.lineWidth,u=t.color,c=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;x=fN(this,v,s),void 0!==x&&(y=_C(n,x,a),l?b=k=C=E=y:w=_=S=N=y,d.push({tx1:b,ty1:w,tx2:k,ty2:_,x1:C,y1:S,x2:E,y2:N,width:a,color:u,borderDash:c,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=u,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),o=this.ticks,{align:s,crossAlign:l,padding:u,mirror:c}=i,d=pN(n.grid),h=d+u,f=c?-u:h,p=-M_(this.labelRotation),m=[];let g,v,x,y,b,w,k,_,C,S,E,N,R="middle";if("top"===r)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,b=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(e_(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-h;else if(e_(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===s?R="top":"end"===s&&(R="bottom"));const T=this._getLabelSizes();for(g=0,v=o.length;g<v;++g){x=o[g],y=x.label;const e=i.setContext(this.getContext(g));_=this.getPixelForTick(g)+i.labelOffset,C=this._resolveTickFontOptions(g),S=C.lineHeight,E=Zk(y)?y.length:1;const t=E/2,n=e.color,s=e.textStrokeColor,u=e.textStrokeWidth;let d,h=k;if(a?(b=_,"inner"===k&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===l||0!==p?-E*S+S/2:"center"===l?-T.highest.height/2-t*S+S:-T.highest.height+S/2:"near"===l||0!==p?S/2:"center"===l?T.highest.height/2-t*S:T.highest.height-E*S,c&&(N*=-1),0===p||e.showLabelBackdrop||(b+=S/2*Math.sin(p))):(w=_,N=(1-E)*S/2),e.showLabelBackdrop){const t=UC(e.backdropPadding),n=T.heights[g],r=T.widths[g];let i=N-t.top,a=0-t.left;switch(R){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":g===v-1?a-=r:g>0&&(a-=r/2)}d={left:a,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:y,font:C,textOffset:N,options:{rotation:p,color:n,strokeColor:s,strokeWidth:u,textAlign:h,textBaseline:R,translation:[b,w],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-M_(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=e+i,o=this._getLabelSizes().widest.width;let s,l;return"left"===t?r?(l=this.right+i,"near"===n?s="left":"center"===n?(s="center",l+=o/2):(s="right",l+=o)):(l=this.right-a,"near"===n?s="right":"center"===n?(s="center",l-=o/2):(s="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?s="right":"center"===n?(s="center",l-=o/2):(s="left",l-=o)):(l=this.left+a,"near"===n?s="left":"center"===n?(s="center",l+=o/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,a=r.length;i<a;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const o=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,u,c,d;this.isHorizontal()?(l=_C(e,this.left,a)-a/2,u=_C(e,this.right,o)+o/2,c=d=s):(c=_C(e,this.top,a)-a/2,d=_C(e,this.bottom,o)+o/2,l=u=s),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,c),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&RC(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;MC(t,i.label,0,i.textOffset,n,e)}n&&TC(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=HC(n.font),a=UC(n.padding),o=n.align;let s=i.lineHeight/2;"bottom"===t||"center"===t||e_(t)?(s+=a.bottom,Zk(n.text)&&(s+=i.lineHeight*(n.text.length-1))):s+=a.top;const{titleX:l,titleY:u,maxWidth:c,rotation:d}=function(e,t,n,r){const{top:i,left:a,bottom:o,right:s,chart:l}=e,{chartArea:u,scales:c}=l;let d,h,f,p=0;const m=o-i,g=s-a;if(e.isHorizontal()){if(h=Z_(r,a,s),e_(n)){const e=Object.keys(n)[0],r=n[e];f=c[e].getPixelForValue(r)+m-t}else f="center"===n?(u.bottom+u.top)/2+m-t:cN(e,n,t);d=s-a}else{if(e_(n)){const e=Object.keys(n)[0],r=n[e];h=c[e].getPixelForValue(r)-g+t}else h="center"===n?(u.left+u.right)/2-g+t:cN(e,n,t);f=Z_(r,o,i),p="left"===n?-S_:S_}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,s,t,o);MC(e,n.text,0,0,i,{color:n.color,maxWidth:c,rotation:d,textAlign:gN(o,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=r_(e.grid&&e.grid.z,-1),r=r_(e.border&&e.border.z,0);return this._isVisible()&&this.draw===vN.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=t.length;i<a;++i){const a=t[i];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return HC(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xN{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=d_(Object.create(null),[n?bC.get(n):{},bC.get(t),e.defaults]);bC.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),l=o.join(".");bC.route(a,i,l,s)}))}(t,e.defaultRoutes);e.descriptors&&bC.describe(t,e.descriptors)}(e,a,n),this.override&&bC.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in bC[r]&&(delete bC[r][n],this.override&&delete mC[n])}}class yN{constructor(){this.controllers=new xN(rE,"datasets",!0),this.elements=new xN(sN,"elements"),this.plugins=new xN(Object,"plugins"),this.scales=new xN(vN,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):o_(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=g_(e);a_(n["before"+r],[],n),t[e](n),a_(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var bN=new yN;class wN{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===a_(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){Jk(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=r_(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(bN.plugins.items);for(let a=0;a<r.length;a++)n.push(bN.getPlugin(r[a]));const i=e.plugins||[];for(let a=0;a<i.length;a++){const e=i[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:a}=t;const o=[],s=e.getContext();for(const l of i){const t=l.id,i=kN(n[t],r);null!==i&&o.push({plugin:l,options:_N(e.config,{plugin:l,local:a[t]},i,s)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function kN(e,t){return t||!1!==e?!0===e?{}:e:null}function _N(e,t,n,r){let{plugin:i,local:a}=t;const o=e.pluginScopeKeys(i),s=e.getOptionScopes(n,o);return a&&i.defaults&&s.push(i.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function CN(e,t){const n=bC.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function SN(e){if("x"===e||"y"===e||"r"===e)return e}function EN(e){if(SN(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const a of n){const t=a.axis||("top"===(i=a.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&SN(e[0].toLowerCase());if(t)return t}var i;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function NN(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function RN(e,t){const n=mC[e.type]||{scales:{}},r=t.scales||{},i=CN(e.type,t),a=Object.create(null);return Object.keys(r).forEach((t=>{const o=r[t];if(!e_(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const s=EN(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return NN(e,"x",n[0])||NN(e,"y",n[0])}return{}}(t,e),bC.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(s,i),u=n.scales||{};a[t]=h_(Object.create(null),[{axis:s},o,u[s],u[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,o=n.indexAxis||CN(i,t),s=(mC[i]||{}).scales||{};Object.keys(s).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;a[i]=a[i]||Object.create(null),h_(a[i],[{axis:t},r[i],s[e]])}))})),Object.keys(a).forEach((e=>{const t=a[e];h_(t,[bC.scales[t.type],bC.scale])})),a}function TN(e){const t=e.options||(e.options={});t.plugins=r_(t.plugins,{}),t.scales=RN(e,t)}function IN(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const DN=new Map,AN=new Set;function PN(e,t){let n=DN.get(e);return n||(n=t(),DN.set(e,n),AN.add(n)),n}const MN=(e,t,n)=>{const r=m_(t,n);void 0!==r&&e.add(r)};class ON{constructor(e){this._config=function(e){return(e=e||{}).data=IN(e.data),TN(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=IN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),TN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return PN(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return PN("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return PN("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return PN("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;const s=new Set;t.forEach((t=>{e&&(s.add(e),t.forEach((t=>MN(s,e,t)))),t.forEach((e=>MN(s,r,e))),t.forEach((e=>MN(s,mC[i]||{},e))),t.forEach((e=>MN(s,bC,e))),t.forEach((e=>MN(s,gC,e)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),AN.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,mC[t]||{},bC.datasets[t]||{},{type:t},bC,gC]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:a,subPrefixes:o}=FN(this._resolverCache,e,r);let s=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=YC(e);for(const i of t){const t=n(i),a=r(i),o=(a||t)&&e[i];if(t&&(x_(o)||jN(o))||a&&Zk(o))return!0}return!1}(a,t)){i.$shared=!1;s=XC(a,n=x_(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=s[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=FN(this._resolverCache,e,n);return e_(t)?XC(i,t,void 0,r):i}}function FN(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let a=r.get(i);if(!a){a={resolver:KC(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,a)}return a}const jN=e=>e_(e)&&Object.getOwnPropertyNames(e).some((t=>x_(e[t])));const LN=["top","bottom","left","right","chartArea"];function BN(e,t){return"top"===e||"bottom"===e||-1===LN.indexOf(e)&&"x"===t}function zN(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function WN(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),a_(n&&n.onComplete,[e],t)}function VN(e){const t=e.chart,n=t.options.animation;a_(n&&n.onProgress,[e],t)}function UN(e){return pS()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const HN={},GN=e=>{const t=UN(e);return Object.values(HN).filter((e=>e.canvas===t)).pop()};function qN(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const a=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=a)}}}function KN(e,t,n){return e.options.clip?e[n]:t[n]}class XN{static register(){bN.add(...arguments),YN()}static unregister(){bN.remove(...arguments),YN()}constructor(e,t){const n=this.config=new ON(t),r=UN(e),i=GN(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!pS()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?GE:oN}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,a.aspectRatio),s=o&&o.canvas,l=s&&s.height,u=s&&s.width;this.id=Qk(),this.ctx=o,this.canvas=s,this.width=u,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new wN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),a.resizeDelay||0),this._dataChanges=[],HN[this.id]=this,o&&s?(WS.listen(this,"complete",WN),WS.listen(this,"progress",VN),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return Jk(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return bN}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():CS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return CC(this.canvas,this.ctx),this}stop(){return WS.stop(this),this}resize(e,t){WS.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,CS(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),a_(n.onResize,[this,a],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){o_(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=EN(e,n),i="r"===r,a="x"===r;return{options:n,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}})))),o_(i,(t=>{const i=t.options,a=i.id,o=EN(a,i),s=r_(i.type,t.dtype);void 0!==i.position&&BN(i.position,o)===BN(t.dposition)||(i.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===s)l=n[a];else{l=new(bN.getScale(s))({id:a,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),o_(r,((e,t)=>{e||delete n[t]})),o_(n,(e=>{UE.configure(this,e,e.options),UE.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(zN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=a,i.indexAxis=r.indexAxis||CN(a,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=bN.getController(a),{datasetElementType:r,dataElementType:o}=bC.datasets[a];Object.assign(t,{dataElementType:bN.getElement(o),datasetElementType:r&&bN.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){o_(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||o_(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zN("z","_idx"));const{_active:o,_lastEvent:s}=this;s?this._eventHandler(s,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){o_(this.scales,(e=>{UE.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);y_(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){qN(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!y_(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;UE.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],o_(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,x_(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(WS.has(this)?this.attached&&!WS.running(this)&&WS.start(this):(this.draw(),WN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:KN(n,t,"left"),right:KN(n,t,"right"),top:KN(r,t,"top"),bottom:KN(r,t,"bottom")}:t}(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(r&&RC(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&TC(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return NC(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=IE.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=qC(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);v_(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),WS.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),CC(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete HN[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};o_(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){o_(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},o_(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,a,o,s;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,s=e.length;o<s;++o){a=e[o];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!s_(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),a=i(t,e),o=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,a=t,o=this._getActiveElements(e,r,n,a),s=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,s);n&&(this._lastEvent=null,a_(i.onHover,[e,o,this],this),s&&a_(i.onClick,[e,o,this],this));const u=!s_(o,r);return(u||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,u}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function YN(){return o_(XN.instances,(e=>e._plugins.invalidate()))}function $N(e,t,n,r){const i=zC(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,o=Math.min(a,r*t/2),s=e=>{const t=(n-Math.min(a,e))*r/2;return V_(e,0,Math.min(a,t))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:V_(i.innerStart,0,o),innerEnd:V_(i.innerEnd,0,o)}}function QN(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function JN(e,t,n,r,i,a){const{x:o,y:s,startAngle:l,pixelMargin:u,innerRadius:c}=t,d=Math.max(t.outerRadius+r+n-u,0),h=c>0?c+r+n+u:0;let f=0;const p=i-l;if(r){const e=((c>0?c-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*d-n/b_)/d)/2,g=l+m+f,v=i-m-f,{outerStart:x,outerEnd:y,innerStart:b,innerEnd:w}=$N(t,h,d,v-g),k=d-x,_=d-y,C=g+x/k,S=v-y/_,E=h+b,N=h+w,R=g+b/E,T=v-w/N;if(e.beginPath(),a){const t=(C+S)/2;if(e.arc(o,s,d,C,t),e.arc(o,s,d,t,S),y>0){const t=QN(_,S,o,s);e.arc(t.x,t.y,y,S,v+S_)}const n=QN(N,v,o,s);if(e.lineTo(n.x,n.y),w>0){const t=QN(N,T,o,s);e.arc(t.x,t.y,w,v+S_,T+Math.PI)}const r=(v-w/h+(g+b/h))/2;if(e.arc(o,s,h,v-w/h,r,!0),e.arc(o,s,h,r,g+b/h,!0),b>0){const t=QN(E,R,o,s);e.arc(t.x,t.y,b,R+Math.PI,g-S_)}const i=QN(k,g,o,s);if(e.lineTo(i.x,i.y),x>0){const t=QN(k,C,o,s);e.arc(t.x,t.y,x,g-S_,C)}}else{e.moveTo(o,s);const t=Math.cos(C)*d+o,n=Math.sin(C)*d+s;e.lineTo(t,n);const r=Math.cos(S)*d+o,i=Math.sin(S)*d+s;e.lineTo(r,i)}e.closePath()}function ZN(e,t,n,r,i){const{fullCircles:a,startAngle:o,circumference:s,options:l}=t,{borderWidth:u,borderJoinStyle:c,borderDash:d,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!u)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*u,e.lineJoin=c||"round"):(e.lineWidth=u,e.lineJoin=c||"bevel");let p=t.endAngle;if(a){JN(e,t,n,r,p,i);for(let t=0;t<a;++t)e.stroke();isNaN(s)||(p=o+(s%w_||w_))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:a,y:o,outerRadius:s,innerRadius:l}=t;let u=i/s;e.beginPath(),e.arc(a,o,s,r-u,n+u),l>i?(u=i/l,e.arc(a,o,l,n+u,r-u,!0)):e.arc(a,o,i,n+S_,r-S_),e.closePath(),e.clip()}(e,t,p),a||(JN(e,t,n,r,p,i),e.stroke())}gk(XN,"defaults",bC),gk(XN,"instances",HN),gk(XN,"overrides",mC),gk(XN,"registry",bN),gk(XN,"version","4.4.1"),gk(XN,"getChart",GN);class eR extends sN{constructor(e){super(),gk(this,"circumference",void 0),gk(this,"endAngle",void 0),gk(this,"fullCircles",void 0),gk(this,"innerRadius",void 0),gk(this,"outerRadius",void 0),gk(this,"pixelMargin",void 0),gk(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:a}=j_(r,{x:e,y:t}),{startAngle:o,endAngle:s,innerRadius:l,outerRadius:u,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=r_(c,s-o)>=w_||W_(i,o,s),f=U_(a,l+d,u+d);return h&&f}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:s,spacing:l}=this.options,u=(r+i)/2,c=(a+o+l+s)/2;return{x:t+Math.cos(u)*c,y:n+Math.sin(u)*c}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>w_?Math.floor(n/w_):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const s=r*(1-Math.sin(Math.min(b_,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:a,startAngle:o,circumference:s}=t;let l=t.endAngle;if(a){JN(e,t,n,r,l,i);for(let t=0;t<a;++t)e.fill();isNaN(s)||(l=o+(s%w_||w_))}JN(e,t,n,r,l,i),e.fill()}(e,this,s,i,a),ZN(e,this,s,i,a),e.restore()}}function tR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=r_(n.borderCapStyle,t.borderCapStyle),e.setLineDash(r_(n.borderDash,t.borderDash)),e.lineDashOffset=r_(n.borderDashOffset,t.borderDashOffset),e.lineJoin=r_(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=r_(n.borderWidth,t.borderWidth),e.strokeStyle=r_(n.borderColor,t.borderColor)}function nR(e,t,n){e.lineTo(n.x,n.y)}function rR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:a=r-1}=n,{start:o,end:s}=t,l=Math.max(i,o),u=Math.min(a,s),c=i<o&&a<o||i>s&&a>s;return{count:r,start:l,loop:t.loop,ilen:u<l&&!c?r+u-l:u-l}}function iR(e,t,n,r){const{points:i,options:a}=t,{count:o,start:s,loop:l,ilen:u}=rR(i,n,r),c=function(e){return e.stepped?IC:e.tension||"monotone"===e.cubicInterpolationMode?DC:nR}(a);let d,h,f,{move:p=!0,reverse:m}=r||{};for(d=0;d<=u;++d)h=i[(s+(m?u-d:d))%o],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):c(e,f,h,m,a.stepped),f=h);return l&&(h=i[(s+(m?u:0))%o],c(e,f,h,m,a.stepped)),!!l}function aR(e,t,n,r){const i=t.points,{count:a,start:o,ilen:s}=rR(i,n,r),{move:l=!0,reverse:u}=r||{};let c,d,h,f,p,m,g=0,v=0;const x=e=>(o+(u?s-e:e))%a,y=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=i[x(0)],e.moveTo(d.x,d.y)),c=0;c<=s;++c){if(d=i[x(c)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(y(),e.lineTo(t,n),h=r,v=0,f=p=n),m=n}y()}function oR(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?aR:iR}gk(eR,"id","arc"),gk(eR,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),gk(eR,"defaultRoutes",{backgroundColor:"backgroundColor"}),gk(eR,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const sR="function"===typeof Path2D;function lR(e,t,n,r){sR&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),tR(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:a}=t,o=oR(t);for(const s of i)tR(e,a,s.style),e.beginPath(),o(e,t,s,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class uR extends sN{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;fS(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const a=!!e._loop,{start:o,end:s}=function(e,t,n,r){let i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return a%=t,{start:i,end:a}}(n,i,a,r);return jS(e,!0===r?[{start:o,end:s,loop:a}]:function(e,t,n,r){const i=e.length,a=[];let o,s=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%i,end:(o-1)%i,loop:r}),t=s=n.stop?o:null):(s=o,l.skip&&(t=o)),l=n}return null!==s&&a.push({start:t%i,end:s%i,loop:r}),a}(n,o,s<o?s+i:s,!!e._fullLoop&&0===o&&s===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,a=FS(this,{property:t,start:r,end:r});if(!a.length)return;const o=[],s=function(e){return e.stepped?RS:e.tension||"monotone"===e.cubicInterpolationMode?TS:NS}(n);let l,u;for(l=0,u=a.length;l<u;++l){const{start:u,end:c}=a[l],d=i[u],h=i[c];if(d===h){o.push(d);continue}const f=s(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return oR(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=oR(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)a&=i(e,this,o,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),lR(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function cR(e,t,n,r){const i=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<i.radius+i.hitRadius}gk(uR,"id","line"),gk(uR,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),gk(uR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),gk(uR,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class dR extends sN{constructor(e){super(),gk(this,"parsed",void 0),gk(this,"skip",void 0),gk(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:a}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return cR(this,e,"x",t)}inYRange(e,t){return cR(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!NC(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,SC(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function hR(e,t){const{x:n,y:r,base:i,width:a,height:o}=e.getProps(["x","y","base","width","height"],t);let s,l,u,c,d;return e.horizontal?(d=o/2,s=Math.min(n,i),l=Math.max(n,i),u=r-d,c=r+d):(d=a/2,s=n-d,l=n+d,u=Math.min(r,i),c=Math.max(r,i)),{left:s,top:u,right:l,bottom:c}}function fR(e,t,n,r){return e?0:V_(t,n,r)}function pR(e){const t=hR(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,a=WC(r);return{t:fR(i.top,a.top,0,n),r:fR(i.right,a.right,0,t),b:fR(i.bottom,a.bottom,0,n),l:fR(i.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,a=VC(i),o=Math.min(t,n),s=e.borderSkipped,l=r||e_(i);return{topLeft:fR(!l||s.top||s.left,a.topLeft,0,o),topRight:fR(!l||s.top||s.right,a.topRight,0,o),bottomLeft:fR(!l||s.bottom||s.left,a.bottomLeft,0,o),bottomRight:fR(!l||s.bottom||s.right,a.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function mR(e,t,n,r){const i=null===t,a=null===n,o=e&&!(i&&a)&&hR(e,r);return o&&(i||U_(t,o.left,o.right))&&(a||U_(n,o.top,o.bottom))}function gR(e,t){e.rect(t.x,t.y,t.w,t.h)}function vR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+o,radius:e.radius}}gk(dR,"id","point"),gk(dR,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),gk(dR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class xR extends sN{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:a}=pR(this),o=(s=a.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?OC:gR;var s;e.save(),a.w===i.w&&a.h===i.h||(e.beginPath(),o(e,vR(a,t,i)),e.clip(),o(e,vR(i,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,vR(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return mR(this,e,t,n)}inXRange(e,t){return mR(this,e,null,t)}inYRange(e,t){return mR(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}gk(xR,"id","bar"),gk(xR,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),gk(xR,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var yR=Object.freeze({__proto__:null,ArcElement:eR,BarElement:xR,LineElement:uR,PointElement:dR});const bR=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],wR=bR.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function kR(e){return bR[e%bR.length]}function _R(e){return wR[e%wR.length]}function CR(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof pE?t=function(e,t){return e.backgroundColor=e.data.map((()=>kR(t++))),t}(n,t):i instanceof gE?t=function(e,t){return e.backgroundColor=e.data.map((()=>_R(t++))),t}(n,t):i&&(t=function(e,t){return e.borderColor=kR(t),e.backgroundColor=_R(t),++t}(n,t))}}function SR(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var ER={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:a}=i;if(!n.forceOverride&&(SR(r)||(o=i)&&(o.borderColor||o.backgroundColor)||a&&SR(a)))return;var o;const s=CR(e);r.forEach(s)}};function NR(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function RR(e){e.data.datasets.forEach((e=>{NR(e)}))}var TR={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void RR(e);const r=e.width;e.data.datasets.forEach(((t,i)=>{const{_data:a,indexAxis:o}=t,s=e.getDatasetMeta(i),l=a||t.data;if("y"===GC([o,e.options.indexAxis]))return;if(!s.controller.supportsDecimation)return;const u=e.scales[s.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(e.options.parsing)return;let{start:c,count:d}=function(e,t){const n=t.length;let r,i=0;const{iScale:a}=e,{min:o,max:s,minDefined:l,maxDefined:u}=a.getUserBounds();return l&&(i=V_(G_(t,a.axis,o).lo,0,n-1)),r=u?V_(G_(t,a.axis,s).hi+1,i,n)-i:n-i,{start:i,count:r}}(s,l);if(d<=(n.threshold||4*r))return void NR(t);let h;switch(Jk(a)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,r,i){const a=i.samples||r;if(a>=n)return e.slice(t,t+n);const o=[],s=(n-2)/(a-2);let l=0;const u=t+n-1;let c,d,h,f,p,m=t;for(o[l++]=e[m],c=0;c<a-2;c++){let r,i=0,a=0;const u=Math.floor((c+1)*s)+1+t,g=Math.min(Math.floor((c+2)*s)+1,n)+t,v=g-u;for(r=u;r<g;r++)i+=e[r].x,a+=e[r].y;i/=v,a/=v;const x=Math.floor(c*s)+1+t,y=Math.min(Math.floor((c+1)*s)+1,n)+t,{x:b,y:w}=e[m];for(h=f=-1,r=x;r<y;r++)f=.5*Math.abs((b-i)*(e[r].y-w)-(b-e[r].x)*(a-w)),f>h&&(h=f,d=e[r],p=r);o[l++]=d,m=p}return o[l++]=e[u],o}(l,c,d,r,n);break;case"min-max":h=function(e,t,n,r){let i,a,o,s,l,u,c,d,h,f,p=0,m=0;const g=[],v=t+n-1,x=e[t].x,y=e[v].x-x;for(i=t;i<t+n;++i){a=e[i],o=(a.x-x)/y*r,s=a.y;const t=0|o;if(t===l)s<h?(h=s,u=i):s>f&&(f=s,c=i),p=(m*p+a.x)/++m;else{const n=i-1;if(!Jk(u)&&!Jk(c)){const t=Math.min(u,c),r=Math.max(u,c);t!==d&&t!==n&&g.push({...e[t],x:p}),r!==d&&r!==n&&g.push({...e[r],x:p})}i>0&&n!==d&&g.push(e[n]),g.push(a),l=t,m=0,h=f=s,u=c=d=i}}return g}(l,c,d,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=h}))},destroy(e){RR(e)}};function IR(e,t,n,r){if(r)return;let i=t[e],a=n[e];return"angle"===e&&(i=z_(i),a=z_(a)),{property:e,start:i,end:a}}function DR(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function AR(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function PR(e,t){let n=[],r=!1;return Zk(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,a=[];return t.segments.forEach((e=>{let{start:t,end:o}=e;o=DR(t,o,i);const s=i[t],l=i[o];null!==r?(a.push({x:s.x,y:r}),a.push({x:l.x,y:r})):null!==n&&(a.push({x:n,y:s.y}),a.push({x:n,y:l.y}))})),a}(e,t),n.length?new uR({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function MR(e){return e&&!1!==e.fill}function OR(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!t_(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function FR(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=r_(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(e_(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return t_(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function jR(e,t,n){const r=[];for(let i=0;i<n.length;i++){const a=n[i],{first:o,last:s,point:l}=LR(a,t,"x");if(!(!l||o&&s))if(o)r.unshift(l);else if(e.push(l),!s)break}e.push(...r)}function LR(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],a=e.segments,o=e.points;let s=!1,l=!1;for(let u=0;u<a.length;u++){const e=a[u],t=o[e.start][n],r=o[e.end][n];if(U_(i,t,r)){s=i===t,l=i===r;break}}return{first:s,last:l,point:r}}class BR{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:a}=this;return t=t||{start:0,end:w_},e.arc(r,i,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function zR(e){const{chart:t,fill:n,line:r}=e;if(t_(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],a=r.segments,o=r.points,s=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);s.push(PR({x:null,y:t.bottom},r));for(let l=0;l<a.length;l++){const e=a[l];for(let t=e.start;t<=e.end;t++)jR(i,o[t],s)}return new uR({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,a=r.reverse?t.max:t.min,o=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:e_(e)?e.value:t.getBaseValue(),r}(n,t,a),s=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,a);return new BR({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)s.push(t.getPointPositionForValue(l,o));return s}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:e_(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(t_(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof BR?i:PR(i,r)}function WR(e,t,n){const r=zR(t),{line:i,scale:a,axis:o}=t,s=i.options,l=s.fill,u=s.backgroundColor,{above:c=u,below:d=u}=l||{};r&&i.points.length&&(RC(e,n),function(e,t){const{line:n,target:r,above:i,below:a,area:o,scale:s}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&a!==i&&(VR(e,r,o.top),UR(e,{line:n,target:r,color:i,scale:s,property:l}),e.restore(),e.save(),VR(e,r,o.bottom));UR(e,{line:n,target:r,color:a,scale:s,property:l}),e.restore()}(e,{line:i,target:r,above:c,below:d,area:n,scale:a,axis:o}),TC(e))}function VR(e,t,n){const{segments:r,points:i}=t;let a=!0,o=!1;e.beginPath();for(const s of r){const{start:r,end:l}=s,u=i[r],c=i[DR(r,l,i)];a?(e.moveTo(u.x,u.y),a=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,s,{move:o}),o?e.closePath():e.lineTo(c.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function UR(e,t){const{line:n,target:r,property:i,color:a,scale:o}=t,s=function(e,t,n){const r=e.segments,i=e.points,a=t.points,o=[];for(const s of r){let{start:e,end:r}=s;r=DR(e,r,i);const l=IR(n,i[e],i[r],s.loop);if(!t.segments){o.push({source:s,target:l,start:i[e],end:i[r]});continue}const u=FS(t,l);for(const t of u){const e=IR(n,a[t.start],a[t.end],t.loop),r=OS(s,i,e);for(const i of r)o.push({source:i,target:t,start:{[n]:AR(l,e,"start",Math.max)},end:{[n]:AR(l,e,"end",Math.min)}})}}return o}(n,r,i);for(const{source:l,target:u,start:c,end:d}of s){const{style:{backgroundColor:t=a}={}}=l,s=!0!==r;e.save(),e.fillStyle=t,HR(e,o,s&&IR(i,c,d)),e.beginPath();const h=!!n.pathSegment(e,l);let f;if(s){h?e.closePath():GR(e,r,d,i);const t=!!r.pathSegment(e,u,{move:h,reverse:!0});f=h&&t,f||GR(e,r,c,i)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function HR(e,t,n){const{top:r,bottom:i}=t.chart.chartArea,{property:a,start:o,end:s}=n||{};"x"===a&&(e.beginPath(),e.rect(o,r,s-o,i-r),e.clip())}function GR(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var qR={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let a,o,s,l;for(o=0;o<r;++o)a=e.getDatasetMeta(o),s=a.dataset,l=null,s&&s.options&&s instanceof uR&&(l={visible:e.isDatasetVisible(o),index:o,fill:FR(s,o,r),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:s}),a.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],l&&!1!==l.fill&&(l.fill=OR(i,o,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let o=i.length-1;o>=0;--o){const t=i[o].$filler;t&&(t.line.updateControlPoints(a,t.axis),r&&t.fill&&WR(e.ctx,t,a))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;MR(t)&&WR(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;MR(r)&&"beforeDatasetDraw"===n.drawTime&&WR(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const KR=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class XR extends sN{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=a_(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=HC(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:s}=KR(n,i);let l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(a,i,o,s)+10):(u=this.maxHeight,l=this._fitCols(a,r,o,s)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+o;let c=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-u;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>a)&&(c+=u,l[l.length-(f>0?0:1)]=0,h+=u,d++),s[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+o})),c}_fitCols(e,t,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=a-e;let c=o,d=0,h=0,f=0,p=0;return this.legendItems.forEach(((e,a)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const a=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=YR(t,n));return r}(i,r,t.lineHeight);return{itemWidth:a,itemHeight:o}}(n,t,i,e,r);a>0&&h+g+2*o>u&&(c+=d+o,l.push({width:d,height:h}),f+=d+o,p++,d=h=0),s[a]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+o})),c+=d,l.push({width:d,height:h}),c}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,a=IS(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=Z_(n,this.left+r,this.right-this.lineWidths[i]);for(const s of t)i!==s.row&&(i=s.row,o=Z_(n,this.left+r,this.right-this.lineWidths[i])),s.top+=this.top+e+r,s.left=a.leftForLtr(a.x(o),s.width),o+=s.width+r}else{let i=0,o=Z_(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const s of t)s.col!==i&&(i=s.col,o=Z_(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),s.top=o,s.left+=this.left+r,s.left=a.leftForLtr(a.x(s.left),s.width),o+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;RC(e,this),this._draw(),TC(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,o=bC.color,s=IS(e.rtl,this.left,this.width),l=HC(a.font),{padding:u}=a,c=l.size,d=c/2;let h;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=KR(a,c),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:Z_(i,this.left+u,this.right-n[0]),y:this.top+u+v,line:0}:{x:this.left+u,y:Z_(i,this.top+v+u,this.bottom-t[0].height),line:0},DS(this.ctx,e.textDirection);const x=m+u;this.legendItems.forEach(((y,b)=>{r.strokeStyle=y.fontColor,r.fillStyle=y.fontColor;const w=r.measureText(y.text).width,k=s.textAlign(y.textAlign||(y.textAlign=a.textAlign)),_=f+d+w;let C=h.x,S=h.y;s.setWidth(this.width),g?b>0&&C+_+u>this.right&&(S=h.y+=x,h.line++,C=h.x=Z_(i,this.left+u,this.right-n[h.line])):b>0&&S+x>this.bottom&&(C=h.x=C+t[h.line].width+u,h.line++,S=h.y=Z_(i,this.top+v+u,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=r_(n.lineWidth,1);if(r.fillStyle=r_(n.fillStyle,o),r.lineCap=r_(n.lineCap,"butt"),r.lineDashOffset=r_(n.lineDashOffset,0),r.lineJoin=r_(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=r_(n.strokeStyle,o),r.setLineDash(r_(n.lineDash,[])),a.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=s.xPlus(e,f/2);EC(r,o,l,t+d,a.pointStyleWidth&&f)}else{const a=t+Math.max((c-p)/2,0),o=s.leftForLtr(e,f),l=VC(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?OC(r,{x:o,y:a,w:f,h:p,radius:l}):r.rect(o,a,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(s.x(C),S,y),C=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(k,C+f+d,g?C+_:this.right,e.rtl),function(e,t,n){MC(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(C),S,y),g)h.x+=_+u;else if("string"!==typeof y.text){const e=l.lineHeight;h.y+=YR(y,e)+u}else h.y+=x})),AS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=HC(t.font),r=UC(t.padding);if(!t.display)return;const i=IS(e.rtl,this.left,this.width),a=this.ctx,o=t.position,s=n.size/2,l=r.top+s;let u,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+l,c=Z_(e.align,c,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);u=l+Z_(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Z_(o,c,c+d);a.textAlign=i.textAlign(J_(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,MC(a,t.text,h,u,n)}_computeTitleHeight(){const e=this.options.title,t=HC(e.font),n=UC(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(U_(e,this.left,this.right)&&U_(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],U_(e,r.left,r.left+r.width)&&U_(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&a_(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&a_(t.onHover,[e,n,this],this)}else n&&a_(t.onClick,[e,n,this],this)}}function YR(e,t){return t*(e.text?e.text.length:0)}var $R={id:"legend",_element:XR,start(e,t,n){const r=e.legend=new XR({ctx:e.ctx,options:n,chart:e});UE.configure(e,r,n),UE.addBox(e,r)},stop(e){UE.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;UE.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:o,borderRadius:s}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),u=UC(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(s||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class QR extends sN{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=Zk(n.text)?n.text.length:1;this._padding=UC(n.padding);const i=r*HC(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:a}=this,o=a.align;let s,l,u,c=0;return this.isHorizontal()?(l=Z_(o,n,i),u=t+e,s=i-n):("left"===a.position?(l=n+e,u=Z_(o,r,t),c=-.5*b_):(l=i-e,u=Z_(o,t,r),c=.5*b_),s=r-t),{titleX:l,titleY:u,maxWidth:s,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=HC(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:o,rotation:s}=this._drawArgs(r);MC(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:s,textAlign:J_(t.align),textBaseline:"middle",translation:[i,a]})}}var JR={id:"title",_element:QR,start(e,t,n){!function(e,t){const n=new QR({ctx:e.ctx,options:t,chart:e});UE.configure(e,n,t),UE.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;UE.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;UE.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ZR=new WeakMap;var eT={id:"subtitle",start(e,t,n){const r=new QR({ctx:e.ctx,options:n,chart:e});UE.configure(e,r,n),UE.addBox(e,r),ZR.set(e,r)},stop(e){UE.removeBox(e,ZR.get(e)),ZR.delete(e)},beforeUpdate(e,t,n){const r=ZR.get(e);UE.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tT={average(e){if(!e.length)return!1;let t,n,r=0,i=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,i+=e.y,++a}}return{x:r/a,y:i/a}},nearest(e,t){if(!e.length)return!1;let n,r,i,a=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=L_(t,r.getCenterPoint());e<s&&(s=e,i=r)}}if(i){const e=i.tooltipPosition();a=e.x,o=e.y}return{x:a,y:o}}};function nT(e,t){return t&&(Zk(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function rT(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function iT(e,t){const{element:n,datasetIndex:r,index:i}=t,a=e.getDatasetMeta(r).controller,{label:o,value:s}=a.getLabelAndValue(i);return{chart:e,label:o,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:s,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function aT(e,t){const n=e.chart.ctx,{body:r,footer:i,title:a}=e,{boxWidth:o,boxHeight:s}=t,l=HC(t.bodyFont),u=HC(t.titleFont),c=HC(t.footerFont),d=a.length,h=i.length,f=r.length,p=UC(t.padding);let m=p.height,g=0,v=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*c.lineHeight+(h-1)*t.footerSpacing);let x=0;const y=function(e){g=Math.max(g,n.measureText(e).width+x)};return n.save(),n.font=u.string,o_(e.title,y),n.font=l.string,o_(e.beforeBody.concat(e.afterBody),y),x=t.displayColors?o+2+t.boxPadding:0,o_(r,(e=>{o_(e.before,y),o_(e.lines,y),o_(e.after,y)})),x=0,n.font=c.string,o_(e.footer,y),n.restore(),g+=p.width,{width:g,height:m}}function oT(e,t,n,r){const{x:i,width:a}=n,{width:o,chartArea:{left:s,right:l}}=e;let u="center";return"center"===r?u=i<=(s+l)/2?"left":"right":i<=a/2?u="left":i>=o-a/2&&(u="right"),function(e,t,n,r){const{x:i,width:a}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+a+o>t.width||"right"===e&&i-a-o<0||void 0}(u,e,t,n)&&(u="center"),u}function sT(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||oT(e,t,n,r),yAlign:r}}function lT(e,t,n,r){const{caretSize:i,caretPadding:a,cornerRadius:o}=e,{xAlign:s,yAlign:l}=n,u=i+a,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:f}=VC(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,u);return"center"===l?"left"===s?p+=u:"right"===s&&(p-=u):"left"===s?p-=Math.max(c,h)+i:"right"===s&&(p+=Math.max(d,f)+i),{x:V_(p,0,r.width-t.width),y:V_(m,0,r.height-t.height)}}function uT(e,t,n){const r=UC(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function cT(e){return nT([],rT(e))}function dT(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const hT={beforeTitle:$k,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:$k,beforeBody:$k,beforeLabel:$k,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Jk(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:$k,afterBody:$k,beforeFooter:$k,footer:$k,afterFooter:$k};function fT(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?hT[t].call(n,r):i}class pT extends sN{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new GS(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,qC(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=fT(n,"beforeTitle",this,e),i=fT(n,"title",this,e),a=fT(n,"afterTitle",this,e);let o=[];return o=nT(o,rT(r)),o=nT(o,rT(i)),o=nT(o,rT(a)),o}getBeforeBody(e,t){return cT(fT(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return o_(e,(e=>{const t={before:[],lines:[],after:[]},i=dT(n,e);nT(t.before,rT(fT(i,"beforeLabel",this,e))),nT(t.lines,fT(i,"label",this,e)),nT(t.after,rT(fT(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return cT(fT(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=fT(n,"beforeFooter",this,e),i=fT(n,"footer",this,e),a=fT(n,"afterFooter",this,e);let o=[];return o=nT(o,rT(r)),o=nT(o,rT(i)),o=nT(o,rT(a)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],a=[];let o,s,l=[];for(o=0,s=t.length;o<s;++o)l.push(iT(this.chart,t[o]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),o_(l,(t=>{const n=dT(e.callbacks,t);r.push(fT(n,"labelColor",this,t)),i.push(fT(n,"labelPointStyle",this,t)),a.push(fT(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(r.length){const e=tT[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=aT(this,n),o=Object.assign({},e,t),s=sT(this.chart,n,o),l=lT(n,o,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:s,topRight:l,bottomLeft:u,bottomRight:c}=VC(o),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,v,x,y,b;return"center"===i?(y=h+p/2,"left"===r?(m=d,g=m-a,x=y+a,b=y-a):(m=d+f,g=m+a,x=y-a,b=y+a),v=m):(g="left"===r?d+Math.max(s,u)+a:"right"===r?d+f-Math.max(l,c)-a:this.caretX,"top"===i?(x=h,y=x-a,m=g-a,v=g+a):(x=h+p,y=x+a,m=g+a,v=g-a),b=x),{x1:m,x2:g,x3:v,y1:x,y2:y,y3:b}}drawTitle(e,t,n){const r=this.title,i=r.length;let a,o,s;if(i){const l=IS(n.rtl,this.x,this.width);for(e.x=uT(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=HC(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,s=0;s<i;++s)t.fillText(r[s],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,s+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:s,boxWidth:l}=i,u=HC(i.bodyFont),c=uT(this,"left",i),d=r.x(c),h=s<u.lineHeight?(u.lineHeight-s)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,u=f+s/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,SC(e,t,n,u),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,SC(e,t,n,u)}else{e.lineWidth=e_(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),o=VC(a.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,OC(e,{x:t,y:f,w:l,h:s,radius:o}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),OC(e,{x:n,y:f+1,w:l-2,h:s-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,s),e.strokeRect(t,f,l,s),e.fillStyle=a.backgroundColor,e.fillRect(n,f+1,l-2,s-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:s,boxWidth:l,boxPadding:u}=n,c=HC(n.bodyFont);let d=c.lineHeight,h=0;const f=IS(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},m=f.textAlign(a);let g,v,x,y,b,w,k;for(t.textAlign=a,t.textBaseline="middle",t.font=c.string,e.x=uT(this,m,n),t.fillStyle=n.bodyColor,o_(this.beforeBody,p),h=o&&"right"!==m?"center"===a?l/2+u:l+2+u:0,y=0,w=r.length;y<w;++y){for(g=r[y],v=this.labelTextColors[y],t.fillStyle=v,o_(g.before,p),x=g.lines,o&&x.length&&(this._drawColorBox(t,e,y,f,n),d=Math.max(c.lineHeight,s)),b=0,k=x.length;b<k;++b)p(x[b]),d=c.lineHeight;o_(g.after,p)}h=0,d=c.lineHeight,o_(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let a,o;if(i){const s=IS(n.rtl,this.x,this.width);for(e.x=uT(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",a=HC(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,o=0;o<i;++o)t.fillText(r[o],s.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:a}=this,{x:o,y:s}=e,{width:l,height:u}=n,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:f}=VC(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+c,s),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+l-d,s),t.quadraticCurveTo(o+l,s,o+l,s+d),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,s+u-f),t.quadraticCurveTo(o+l,s+u,o+l-f,s+u),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+h,s+u),t.quadraticCurveTo(o,s+u,o,s+u-h),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,s+c),t.quadraticCurveTo(o,s,o+c,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=tT[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=aT(this,e),o=Object.assign({},n,this._size),s=sT(t,e,o),l=lT(e,o,s,t);r._to===l.x&&i._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=UC(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),DS(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),AS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!s_(n,r),a=this._positionChanged(r,t);(i||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),o=this._positionChanged(a,e),s=t||!s_(a,i)||o;return s&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,a=tT[i.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}gk(pT,"positioners",tT);var mT={id:"tooltip",_element:pT,positioners:tT,afterInit(e,t,n){n&&(e.tooltip=new pT({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gT=Object.freeze({__proto__:null,Colors:ER,Decimation:TR,Filler:qR,Legend:$R,SubTitle:eT,Title:JR,Tooltip:mT});function vT(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function xT(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class yT extends vN{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Jk(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:V_(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:vT(n,e,r_(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return xT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function bT(e,t){const n=[],{bounds:r,step:i,min:a,max:o,precision:s,count:l,maxTicks:u,maxDigits:c,includeBounds:d}=e,h=i||1,f=u-1,{min:p,max:m}=t,g=!Jk(a),v=!Jk(o),x=!Jk(l),y=(m-p)/(c+1);let b,w,k,_,C=D_((m-p)/f/h)*h;if(C<1e-14&&!g&&!v)return[{value:p},{value:m}];_=Math.ceil(m/C)-Math.floor(p/C),_>f&&(C=D_(_*C/f/h)*h),Jk(s)||(b=Math.pow(10,s),C=Math.ceil(C*b)/b),"ticks"===r?(w=Math.floor(p/C)*C,k=Math.ceil(m/C)*C):(w=p,k=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-a)/i,C/1e3)?(_=Math.round(Math.min((o-a)/C,u)),C=(o-a)/_,w=a,k=o):x?(w=g?a:w,k=v?o:k,_=l-1,C=(k-w)/_):(_=(k-w)/C,_=I_(_,Math.round(_),C/1e3)?Math.round(_):Math.ceil(_));const S=Math.max(F_(C),F_(w));b=Math.pow(10,Jk(s)?S:s),w=Math.round(w*b)/b,k=Math.round(k*b)/b;let E=0;for(g&&(d&&w!==a?(n.push({value:a}),w<a&&E++,I_(Math.round((w+E*C)*b)/b,a,wT(a,y,e))&&E++):w<a&&E++);E<_;++E){const e=Math.round((w+E*C)*b)/b;if(v&&e>o)break;n.push({value:e})}return v&&d&&k!==o?n.length&&I_(n[n.length-1].value,o,wT(o,y,e))?n[n.length-1].value=o:n.push({value:o}):v&&k!==o||n.push({value:k}),n}function wT(e,t,n){let{horizontal:r,minRotation:i}=n;const a=M_(i),o=(r?Math.sin(a):Math.cos(a))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}gk(yT,"id","category"),gk(yT,"defaults",{ticks:{callback:xT}});class kT extends vN{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Jk(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=T_(r),t=T_(i);e<0&&t<0?o(0):e>0&&t>0&&a(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||a(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=bT({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&P_(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return hC(e,this.chart.options.locale,this.options.ticks.format)}}class _T extends kT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=t_(e)?e:0,this.max=t_(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=M_(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}gk(_T,"id","linear"),gk(_T,"defaults",{ticks:{callback:pC.formatters.numeric}});const CT=e=>Math.floor(R_(e)),ST=(e,t)=>Math.pow(10,CT(e)+t);function ET(e){return 1===e/Math.pow(10,CT(e))}function NT(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function RT(e,t){let{min:n,max:r}=t;n=n_(e.min,n);const i=[],a=CT(n);let o=function(e,t){let n=CT(t-e);for(;NT(e,t,n)>10;)n++;for(;NT(e,t,n)<10;)n--;return Math.min(n,CT(e))}(n,r),s=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),u=a>o?Math.pow(10,a):0,c=Math.round((n-u)*s)/s,d=Math.floor((n-u)/l/10)*l*10;let h=Math.floor((c-d)/Math.pow(10,o)),f=n_(e.min,Math.round((u+d+h*Math.pow(10,o))*s)/s);for(;f<r;)i.push({value:f,major:ET(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),f=Math.round((u+d+h*Math.pow(10,o))*s)/s;const p=n_(e.max,f);return i.push({value:p,major:ET(p),significand:h}),i}class TT extends vN{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=kT.prototype.parse.apply(this,[e,t]);if(0!==n)return t_(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=t_(e)?Math.max(0,e):null,this.max=t_(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!t_(this._userMin)&&(this.min=e===ST(this.min,0)?ST(this.min,-1):ST(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,a=e=>r=t?r:e;n===r&&(n<=0?(i(1),a(10)):(i(ST(n,-1)),a(ST(r,1)))),n<=0&&i(ST(r,-1)),r<=0&&a(ST(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=RT({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&P_(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":hC(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=R_(e),this._valueRange=R_(this.max)-R_(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(R_(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function IT(e){const t=e.ticks;if(t.display&&e.display){const e=UC(t.backdropPadding);return r_(t.font&&t.font.size,bC.font.size)+e.height}return 0}function DT(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function AT(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],a=e._pointLabels.length,o=e.options.pointLabels,s=o.centerPointLabels?b_/a:0;for(let d=0;d<a;d++){const a=o.setContext(e.getPointLabelContext(d));i[d]=a.padding;const h=e.getPointPosition(d,e.drawingArea+i[d],s),f=HC(a.font),p=(l=e.ctx,u=f,c=Zk(c=e._pointLabels[d])?c:[c],{w:kC(l,u.string,c),h:c.length*u.lineHeight});r[d]=p;const m=z_(e.getIndexAngle(d)+s),g=Math.round(O_(m));PT(n,t,m,DT(g,h.x,p.w,0,180),DT(g,h.y,p.h,90,270))}var l,u,c;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,a=e.options,{centerPointLabels:o,display:s}=a.pointLabels,l={extra:IT(a)/2,additionalAngle:o?b_/i:0};let u;for(let c=0;c<i;c++){l.padding=n[c],l.size=t[c];const i=MT(e,c,l);r.push(i),"auto"===s&&(i.visible=OT(i,u),i.visible&&(u=i))}return r}(e,r,i)}function PT(e,t,n,r,i){const a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let s=0,l=0;r.start<t.l?(s=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+s)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function MT(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:a,padding:o,size:s}=n,l=e.getPointPosition(t,r+i+o,a),u=Math.round(O_(z_(l.angle+S_))),c=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,s.h,u),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(u),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,s.w,d);return{visible:!0,x:l.x,y:c,textAlign:d,left:h,top:c,right:h+s.w,bottom:c+s.h}}function OT(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:a}=e;return!(NC({x:n,y:r},t)||NC({x:n,y:a},t)||NC({x:i,y:r},t)||NC({x:i,y:a},t))}function FT(e,t,n){const{left:r,top:i,right:a,bottom:o}=n,{backdropColor:s}=t;if(!Jk(s)){const n=VC(t.borderRadius),l=UC(t.backdropPadding);e.fillStyle=s;const u=r-l.left,c=i-l.top,d=a-r+l.width,h=o-i+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),OC(e,{x:u,y:c,w:d,h:h,radius:n}),e.fill()):e.fillRect(u,c,d,h)}}function jT(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,w_);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),i.lineTo(n.x,n.y)}}gk(TT,"id","logarithmic"),gk(TT,"defaults",{ticks:{callback:pC.formatters.logarithmic,major:{enabled:!0}}});class LT extends kT{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=UC(IT(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=t_(e)&&!isNaN(e)?e:0,this.max=t_(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/IT(this.options))}generateTickLabels(e){kT.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=a_(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?AT(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return z_(e*(w_/(this._pointLabels.length||1))+M_(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Jk(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Jk(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return qC(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-S_+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),jT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,a=this._pointLabels.length;let o,s,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const a=r.setContext(e.getPointLabelContext(i));FT(n,a,t);const o=HC(a.font),{x:s,y:l,textAlign:u}=t;MC(n,e._pointLabels[i],s,l+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){s=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const a=e.ctx,o=t.circular,{color:s,lineWidth:l}=t;!o&&!r||!s||!l||n<0||(a.save(),a.strokeStyle=s,a.lineWidth=l,a.setLineDash(i.dash),a.lineDashOffset=i.dashOffset,a.beginPath(),jT(e,n,o,r),a.closePath(),a.stroke(),a.restore())}(this,o,s,a,l)}})),n.display){for(e.save(),o=a-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:a}=r;a&&i&&(e.lineWidth=a,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,o)=>{if(0===o&&!t.reverse)return;const s=n.setContext(this.getContext(o)),l=HC(s.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),s.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=s.backdropColor;const t=UC(s.backdropPadding);e.fillRect(-a/2-t.left,-i-l.size/2-t.top,a+t.width,l.size+t.height)}MC(e,r.label,0,-i,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})})),e.restore()}drawTitle(){}}gk(LT,"id","radialLinear"),gk(LT,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pC.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),gk(LT,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),gk(LT,"descriptors",{angleLines:{_fallback:"grid"}});const BT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zT=Object.keys(BT);function WT(e,t){return e-t}function VT(e,t){if(Jk(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let o=t;return"function"===typeof r&&(o=r(o)),t_(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!A_(a)&&!0!==a?n.startOf(o,i):n.startOf(o,"isoWeek",a)),+o)}function UT(e,t,n,r){const i=zT.length;for(let a=zT.indexOf(e);a<i-1;++a){const e=BT[zT[a]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return zT[a]}return zT[i-1]}function HT(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=H_(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function GT(e,t,n){const r=[],i={},a=t.length;let o,s;for(o=0;o<a;++o)s=t[o],i[s]=o,r.push({value:s,major:!1});return 0!==a&&n?function(e,t,n,r){const i=e._adapter,a=+i.startOf(t[0].value,r),o=t[t.length-1].value;let s,l;for(s=a;s<=o;s=+i.add(s,1,r))l=n[s],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class qT extends vN{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new _E(e.adapters.date);r.init(t),h_(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:VT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function s(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),o||isNaN(e.max)||(i=Math.max(i,e.max))}a&&o||(s(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||s(this.getMinMax(!1))),r=t_(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=t_(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?UT(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let a=zT.length-1;a>=zT.indexOf(n);a--){const n=zT[a];if(BT[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return zT[n?zT.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=zT.indexOf(e)+1,n=zT.length;t<n;++t)if(BT[zT[t]].common)return zT[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),GT(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;r=V_(r,0,a),i=V_(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||UT(i.minUnit,t,n,this._getLabelCapacity(t)),o=r_(r.ticks.stepSize,1),s="week"===a&&i.isoWeekday,l=A_(s)||!0===s,u={};let c,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",s)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+a);const f="data"===r.ticks.source&&this.getDataTimestamps();for(c=h,d=0;c<n;c=+e.add(c,o,a),d++)HT(u,c,f);return c!==n&&"ticks"!==r.bounds&&1!==d||HT(u,c,f),Object.keys(u).sort(WT).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,a=i.ticks.callback;if(a)return a_(a,[e,t,n],this);const o=i.time.displayFormats,s=this._unit,l=this._majorUnit,u=s&&o[s],c=l&&o[l],d=n[t],h=l&&c&&d&&d.major;return this._adapter.format(e,r||(h?c:u))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=M_(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,GT(this,[e],this._majorUnit),r),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(VT(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Y_(e.sort(WT))}}function KT(e,t,n){let r,i,a,o,s=0,l=e.length-1;n?(t>=e[s].pos&&t<=e[l].pos&&({lo:s,hi:l}=G_(e,"pos",t)),({pos:r,time:a}=e[s]),({pos:i,time:o}=e[l])):(t>=e[s].time&&t<=e[l].time&&({lo:s,hi:l}=G_(e,"time",t)),({time:r,pos:a}=e[s]),({time:i,pos:o}=e[l]));const u=i-r;return u?a+(o-a)*(t-r)/u:a}gk(qT,"id","time"),gk(qT,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class XT extends qT{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=KT(t,this.min),this._tableRange=KT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let a,o,s,l,u;for(a=0,o=e.length;a<o;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,o=r.length;a<o;++a)u=r[a+1],s=r[a-1],l=r[a],Math.round((u+s)/2)!==l&&i.push({time:l,pos:a/(o-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(KT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return KT(this._table,n*this._tableRange+this._minPos,!0)}}gk(XT,"id","timeseries"),gk(XT,"defaults",qT.defaults);const YT=[bE,yR,gT,Object.freeze({__proto__:null,CategoryScale:yT,LinearScale:_T,LogarithmicScale:TT,RadialLinearScale:LT,TimeScale:qT,TimeSeriesScale:XT})];XN.register(...YT);const $T="label";function QT(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function JT(e,t){e.labels=t}function ZT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$T;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):{...t}}))}function eI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$T;const n={labels:[],datasets:[]};return JT(n,e.labels),ZT(n,e.datasets,t),n}function tI(e,t){const{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:s,data:l,options:u,plugins:c=[],fallbackContent:d,updateMode:h,...f}=e,p=(0,r.useRef)(null),m=(0,r.useRef)(),g=()=>{p.current&&(m.current=new XN(p.current,{type:s,data:eI(l,o),options:u&&{...u},plugins:c}),QT(t,m.current))},v=()=>{QT(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)((()=>{!a&&m.current&&u&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,u)}),[a,u]),(0,r.useEffect)((()=>{!a&&m.current&&JT(m.current.config.data,l.labels)}),[a,l.labels]),(0,r.useEffect)((()=>{!a&&m.current&&l.datasets&&ZT(m.current.config.data,l.datasets,o)}),[a,l.datasets]),(0,r.useEffect)((()=>{m.current&&(a?(v(),setTimeout(g)):m.current.update(h))}),[a,u,l.labels,l.datasets,h]),(0,r.useEffect)((()=>{m.current&&(v(),setTimeout(g))}),[s]),(0,r.useEffect)((()=>(g(),()=>v())),[]),r.createElement("canvas",Object.assign({ref:p,role:"img",height:n,width:i},f),d)}const nI=(0,r.forwardRef)(tI);function rI(e,t){return XN.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(nI,Object.assign({},t,{ref:n,type:e}))))}const iI=rI("line",mE),aI=rI("bar",hE);function oI(e){return(0,Tn.jsx)("div",{children:(0,Tn.jsx)(aI,{data:{labels:e.chartLabels,datasets:[{label:e.yLabel,data:e.chartData}]},options:{plugins:{title:{display:!0,text:e.title,font:{family:"'Open Sans', sans-serif",weight:"bold",size:20},color:"black"}}}})})}const sI="http://commondatastorage.googleapis.com/codeskulptor-assets/week7-button.m4a";function lI(){const[e,t]=(0,r.useState)([""]),[n,i]=(0,r.useState)([""]),[a,o]=(0,r.useState)(0),[s,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(0),[d,h]=(0,r.useState)("No"),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)("Safe"),[_,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(["Mon","Tue","Wed","Thur","Fri","Sat","Sun"]),[N,R]=(0,r.useState)([]),[T,I]=(0,r.useState)([]),[D,A]=(0,r.useState)([]),[P,M]=(0,r.useState)([]),[O,F]=(0,r.useState)([]),j=ee();(0,r.useEffect)((()=>{(async()=>{try{const e=await Si.getCurrentUser(),n=new Date;n.setHours(0,0,0,0),t(e.username),i(n.toLocaleDateString())}catch(e){console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())}})()}),[j]),(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())j("/login");else{const e=Si.getCurrentUser().username;fk.getInteractionTimeLimit(e).then((e=>{A(e.data.interactionTimeLimit.interactionTimeLimit)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())})),fk.getDistanceRange(e).then((e=>{M(e.data.distanceRange.minimumDistance),F(e.data.distanceRange.maximumDistance)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())})),fk.getSoundStatus(e).then((e=>{C(e.data.soundStatus.status)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())}))}}),[j]),(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())j("/login");else{const e=Si.getCurrentUser().username;fk.getWeeklyDistances(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.distances))t.push(r),n.push(i);R(n),E(t)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())})),fk.getWeeklyInteractionTimes(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.interactionTimes))t.push(r),n.push(i);I(n),E(t)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),j("/login"),window.location.reload())}))}}),[j]),(0,r.useEffect)((()=>{let e;return s?e=setInterval((()=>{c((e=>e+1))}),1e3):(clearInterval(e),c(0)),()=>clearInterval(e)}),[s]),(0,r.useEffect)((()=>{s?0==a.toFixed(2)?h("No"):h("Yes"):h("Not detected!")}),[s,a]),(0,r.useEffect)((()=>{try{let t,r;if("Yes"===d)t=setInterval((()=>{p((e=>e+1))}),1e3);else if("No"===d)r=setInterval((()=>{if(0!==f){const t=m.reduce(((e,t)=>e+t),0)/m.length;fk.addDistanceCalculations(e,n,t),fk.addInteractionTimeCalculations(e,n,f)}clearInterval(t),p(0)}),5e3);else{if(0!==f){const t=m.reduce(((e,t)=>e+t),0)/m.length;fk.addDistanceCalculations(e,n,t),fk.addInteractionTimeCalculations(e,n,f)}clearInterval(t),p(0)}return()=>{clearInterval(t),clearInterval(r)}}catch(t){console.log(t)}}),[d,f,n,e]);const L=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))};return(0,r.useEffect)((()=>{try{b(!(!v||"ON"!==_))}catch(e){console.log(e)}}),[v,_]),(0,r.useEffect)((()=>{try{if(y){new Audio(sI).play().catch((e=>{console.error("Failed to play sound:",e)})),b(!1)}}catch(e){console.log(e)}}),[y]),(0,r.useEffect)((()=>{f>D?(k("Take a break!"),x(!0)):a.toFixed(2)>O&&"Yes"===d?(k("Move closer!"),x(!0)):a.toFixed(2)<P&&"Yes"===d?(k("Move further!"),x(!0)):(k("Safe"),x(!1))}),[f,a,D,P,O,d]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("div",{className:"min-h-full mb-12",children:[(0,Tn.jsx)("header",{className:"bg-white shadow pb-2",children:(0,Tn.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,Tn.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 mb-4",children:"Dashboard"})})}),(0,Tn.jsxs)("main",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 mx-auto px-16 mt-12 px-24",children:[(0,Tn.jsx)("div",{className:"sm:col-span-2 py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsxs)("span",{className:"text-lg",children:[(0,Tn.jsx)("b",{children:"Date:"})," ",(0,Tn.jsx)("i",{children:n})]})}),(0,Tn.jsx)("div",{className:"sm:col-span-2 py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsxs)("span",{className:"text-lg",children:[(0,Tn.jsx)("b",{children:"Time Elapsed:"})," ",(0,Tn.jsx)("i",{children:L(u)})]})}),(0,Tn.jsx)("div",{className:"sm:col-span-2 py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsxs)("span",{className:"text-lg",children:[(0,Tn.jsx)("b",{children:"User:"})," ",(0,Tn.jsx)("i",{children:e})]})}),(0,Tn.jsx)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsxs)("span",{className:"text-lg",children:[(0,Tn.jsx)("b",{children:"Distance to the screen:"})," ",a.toFixed(2)," cm"]})}),(0,Tn.jsx)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsxs)("span",{className:"text-lg",children:[(0,Tn.jsx)("b",{children:"Interaction Time:"})," ",L(f)]})}),(0,Tn.jsx)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)("button",{onClick:()=>{l((e=>!e)),o(0)},className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-lg font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:s?"Stop Camera":"Start Camera"})}),(0,Tn.jsxs)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-gray-200 bg-opacity-30 rounded-md h-60 flex items-center justify-center flex-col",children:[(0,Tn.jsx)("p",{className:"text-lg",children:"Eyes Interacting?"}),(0,Tn.jsx)("p",{className:"text-3xl",children:(0,Tn.jsx)("b",{children:d})})]}),v?(0,Tn.jsxs)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-red-600 rounded-md h-60 flex items-center justify-center flex-col",children:[(0,Tn.jsx)("p",{className:"text-lg",children:"Status"}),(0,Tn.jsx)("p",{className:"text-3xl",children:(0,Tn.jsx)("b",{children:w})})]}):(0,Tn.jsxs)("div",{className:"sm:col-span-2 max-w-7xl py-6 px-8 bg-green-600 rounded-md h-60 flex items-center justify-center flex-col",children:[(0,Tn.jsx)("p",{className:"text-lg",children:"Status"}),(0,Tn.jsx)("p",{className:"text-3xl",children:(0,Tn.jsx)("b",{children:w})})]}),(0,Tn.jsx)("div",{className:"sm:col-span-2 max-w-7xl py-6 lg:px-8 bg-gray-400 rounded-md flex items-center justify-center h-60",children:s?(0,Tn.jsx)(ck,{onDistanceChange:e=>{g((t=>e>0?[...t,e]:t)),o(e)}}):(0,Tn.jsx)("img",{src:"images/cameracard.png",alt:"Camera",className:"max-w-full max-h-full"})}),(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6 lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Weekly Distance Report (Average)",chartLabels:S,yLabel:"Average Distance (cm)",chartData:N})}),(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6 lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Weekly Interaction Time Report",chartLabels:S,yLabel:"Interaction Time (sec)",chartData:T})})]})]}),(0,Tn.jsx)(Ta,{})]})}var uI=n(206);function cI(){const[e,t]=(0,r.useState)([""]),[n,i]=(0,r.useState)([""]),[a,o]=(0,r.useState)([""]),[s,l]=(0,r.useState)([""]),[u,c]=(0,r.useState)([""]),[d,h]=(0,r.useState)([""]),[f,p]=(0,r.useState)([""]),[m,g]=(0,r.useState)([""]),[v,x]=(0,r.useState)([""]),[y,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[_,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),[N,R]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),D=ee(),A=()=>{R(!1)};(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())D("/login");else{const e=Si.getCurrentUser().username;fk.getUserDetails(e).then((e=>{console.log(e),t(e.data.name),i(e.data.username),o(e.data.email),c(e.data.birthday),l(e.data.contactNo)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),D("/login"),window.location.reload())}))}}),[D]);const P=async t=>{t.preventDefault(),b(!0);try{const t=Si.getCurrentUser().username;await fk.addAccountDetails(t,e,v,s,a).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(n){console.error("Error updating birthday:",n),alert("Failed to update birthday. Please try again.")}};return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("div",{className:"mx-auto mx-auto px-24 mt-8 mb-8",style:{minHeight:"75vh"},children:[(0,Tn.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,Tn.jsx)("h3",{className:"font-semibold leading-7 text-gray-900 text-3xl",children:"Profile"}),(0,Tn.jsx)("p",{className:"mt-1 max-w-2xl text-xl leading-6 text-gray-500",children:"Personal Information."})]}),(0,Tn.jsx)("div",{className:"mt-6 border-t border-gray-100",children:(0,Tn.jsxs)("dl",{className:"divide-y divide-gray-100",children:[(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Full Name"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:w?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{k(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async e=>{e.preventDefault(),b(!0);try{const e=Si.getCurrentUser().username;await fk.addAccountDetails(e,d,u,s,a).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(t){console.error("Error updating name:",t),alert("Failed to update name. Please try again.")}finally{b(!1),k(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[y&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),y?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:e})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{h(e),k(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"font-medium leading-6 text-gray-900 text-lg",children:"Username"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:T?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("input",{type:"text",value:v,onChange:e=>x(e.target.value),className:"truncate leading-6 text-gray-700 focus:outline-none "})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:A,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:P,className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:"Save"})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:n})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"font-medium leading-6 text-gray-900 text-lg",children:"Email address"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:_?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{C(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async t=>{t.preventDefault(),b(!0);try{const t=Si.getCurrentUser().username;await fk.addAccountDetails(t,e,u,s,f).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(n){console.error("Error updating email:",n),alert("Failed to update email. Please try again.")}finally{b(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[y&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),y?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:a})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{p(a),C(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Contact number"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:S?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{E(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async t=>{t.preventDefault(),b(!0);try{const t=Si.getCurrentUser().username;await fk.addAccountDetails(t,e,u,m,a).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(n){console.error("Error updating contact:",n),alert("Failed to update contact. Please try again.")}finally{b(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[y&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),y?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:s})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{g(s),E(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Birthday"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:N?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)(uI.DatePicker,{id:"datepicker-id",name:"birthday",onChange:e=>x(e.target.value),value:v})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:A,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:P,className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[y&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),y?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:u})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{x(u),R(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Password"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:T?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("input",{type:"text",value:v,onChange:e=>x(e.target.value),className:"truncate leading-6 text-gray-700 focus:outline-none"})})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:A,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsx)("button",{onClick:P,className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:"Save"})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:"*************"})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500"})})]})})]})]})})]}),(0,Tn.jsx)(Ta,{})]})}function dI(){const[e,t]=(0,r.useState)([""]),[n,i]=(0,r.useState)([""]),[a,o]=(0,r.useState)(!1),[s,l]=(0,r.useState)("Default"),[u,c]=(0,r.useState)([""]),[d,h]=(0,r.useState)([""]),[f,p]=(0,r.useState)([""]),[m,g]=(0,r.useState)([""]),[v,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)("Default"),[w,k]=(0,r.useState)(),[_,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)("OFF"),[N,R]=(0,r.useState)(!1),T=ee();(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())T("/login");else{const e=Si.getCurrentUser().username;fk.getInteractionTimeLimit(e).then((e=>{t(e.data.interactionTimeLimit.interactionTimeLimit)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),T("/login"),window.location.reload())})),fk.getDistanceRange(e).then((e=>{c(e.data.distanceRange.minimumDistance),p(e.data.distanceRange.maximumDistance)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),T("/login"),window.location.reload())})),fk.getSoundStatus(e).then((e=>{k(e.data.soundStatus.status)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),T("/login"),window.location.reload())}))}}),[T]);return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("div",{className:"mx-auto mx-auto px-24 mt-8 mb-8",style:{minHeight:"100vh"},children:[(0,Tn.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,Tn.jsx)("h3",{className:"font-semibold leading-7 text-gray-900 text-3xl",children:"Settings"}),(0,Tn.jsx)("p",{className:"mt-1 max-w-2xl text-xl leading-6 text-gray-500",children:"General Settings."})]}),(0,Tn.jsx)("div",{className:"mt-6 border-t border-gray-100",children:(0,Tn.jsxs)("dl",{className:"divide-y divide-gray-100",children:[(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Critical time for Interaction Time Warning"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:a?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsxs)("div",{className:"flex min-w-0 flex-1 gap-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"interactionTimeSelection",className:"block text-sm font-medium leading-6 text-gray-900",children:"Interaction Time Selection"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"interactionTimeSelection",name:"interactionTimeSelection",onChange:e=>{l(e.target.value)},value:s,autoComplete:"interactionTimeSelection",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"Default",children:"Default (20mins)"}),(0,Tn.jsx)("option",{value:"Other",children:"Other"})]})})]}),"Other"===s&&(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium leading-6 text-gray-900",children:"Interaction Time Limit (Min)"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{type:"number",value:n,step:"any",required:!0,onChange:e=>i(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{o(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async e=>{e.preventDefault(),R(!0);try{const e=Si.getCurrentUser().username;"Default"===s?await fk.saveDefaultInteractionTimeLimit(e).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)})):await fk.saveInteractionTimeLimit(e,60*n).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(t){console.error("Error updating interaction time limit:",t),alert("Failed to update interaction time limit. Please try again.")}finally{R(!1),o(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[N&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),N?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2",children:(0,Tn.jsxs)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:[e/60," mins"]})})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{i(e/60),o(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Critical range for Distance Warning"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:v?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pr-5 text-sm leading-6",children:[(0,Tn.jsxs)("div",{className:"flex min-w-0 flex-1 gap-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 mr-6",children:[(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"distanceRangeSelection",className:"block text-sm font-medium leading-6 text-gray-900",children:"Distance Range Selection"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"distanceRangeSelection",name:"distanceRangeSelection",onChange:e=>{b(e.target.value)},value:y,autoComplete:"distanceRangeSelection",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"Default",children:"Default (Min: 40cm Max: 60cm)"}),(0,Tn.jsx)("option",{value:"Other",children:"Other"})]})})]}),"Other"===y?(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium leading-6 text-gray-900",children:"Minimum Distance (cm)"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{type:"number",step:"any",required:!0,value:d,onChange:e=>h(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium leading-6 text-gray-900",children:"Maximum Distance (cm)"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{type:"number",step:"any",required:!0,value:m,onChange:e=>g(e.target.value),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]})]}):null]}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{x(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async e=>{e.preventDefault(),R(!0);try{const e=Si.getCurrentUser().username;"Default"===y?await fk.saveDefaultDistanceRange(e).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)})):await fk.saveDistanceRange(e,d,m).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(t){console.error("Error updating distance range:",t),alert("Failed to update distance. Please try again.")}finally{R(!1),x(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[N&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),N?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsxs)("div",{className:"flex min-w-0 flex-1 gap-2",children:[(0,Tn.jsxs)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:["Min: ",u," cm"]}),(0,Tn.jsx)("br",{}),(0,Tn.jsxs)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:["Max: ",f," cm"]})]})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{h(u),g(f),x(!0)},children:"Change"})})]})})]}),(0,Tn.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,Tn.jsx)("dt",{className:"text-lg font-medium leading-6 text-gray-900",children:"Critical warning sounds"}),(0,Tn.jsx)("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:_?(0,Tn.jsxs)("div",{className:"flex items-center justify-between py-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex min-w-0 flex-1 gap-2 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 mr-6",children:(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"soundStatusSelection",className:"block text-sm font-medium leading-6 text-gray-900",children:"Sound Status"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"soundStatusSelection",name:"soundStatusSelection",onChange:e=>{E(e.target.value)},value:S,autoComplete:"soundStatusSelection",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"OFF",children:"OFF"}),(0,Tn.jsx)("option",{value:"ON",children:"ON"})]})})]})}),(0,Tn.jsxs)("div",{classname:"ml-4 flex-shrink-0",children:[(0,Tn.jsx)("button",{onClick:()=>{C(!1)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:"Cancel"}),(0,Tn.jsxs)("button",{onClick:async e=>{e.preventDefault(),R(!0);try{const e=Si.getCurrentUser().username;await fk.saveSoundStatus(e,S).then((()=>{window.location.reload()}),(e=>{alert(e.response.data.message)}))}catch(t){console.error("Error updating sound status:",t),alert("Failed to update sound status. Please try again.")}finally{R(!1),C(!1)}},className:"ml-2 text-indigo-600 hover:text-indigo-500 focus:outline-none",children:[N&&(0,Tn.jsx)("span",{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),N?" Loading...":"Save"]})]})]}):(0,Tn.jsxs)("li",{className:"flex items-center justify-between pl-4 pr-5 text-sm leading-6",children:[(0,Tn.jsx)("div",{className:"flex w-0 flex-1 items-center",children:(0,Tn.jsxs)("div",{className:"flex min-w-0 flex-1 gap-2",children:[(0,Tn.jsx)("span",{className:"truncate leading-6 text-gray-700 text-lg",children:w}),(0,Tn.jsx)("br",{})]})}),(0,Tn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Tn.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>{C(!0)},children:"Change"})})]})}),"            "]})]})})]}),(0,Tn.jsx)(Ta,{})]})}function hI(){const[e,t]=(0,r.useState)([""]),n=ee();return(0,r.useEffect)((()=>{fk.getHelpText().then((e=>{t(e.data.help.helpText)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),n("/login"),window.location.reload())}))}),[n]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("div",{className:"relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:overflow-visible lg:px-0",children:[(0,Tn.jsx)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:(0,Tn.jsxs)("svg",{className:"absolute left-[max(50%,25rem)] top-0 h-[64rem] w-[128rem] -translate-x-1/2 stroke-gray-200 [mask-image:radial-gradient(64rem_64rem_at_top,white,transparent)]","aria-hidden":"true",children:[(0,Tn.jsx)("defs",{children:(0,Tn.jsx)("pattern",{id:"e813992c-7d03-4cc4-a2bd-151760b470a0",width:200,height:200,x:"50%",y:-1,patternUnits:"userSpaceOnUse",children:(0,Tn.jsx)("path",{d:"M100 200V.5M.5 .5H200",fill:"none"})})}),(0,Tn.jsx)("svg",{x:"50%",y:-1,className:"overflow-visible fill-gray-50",children:(0,Tn.jsx)("path",{d:"M-100.5 0h201v201h-201Z M699.5 0h201v201h-201Z M499.5 400h201v201h-201Z M-300.5 600h201v201h-201Z",strokeWidth:0})}),(0,Tn.jsx)("rect",{width:"100%",height:"100%",strokeWidth:0,fill:"url(#e813992c-7d03-4cc4-a2bd-151760b470a0)"})]})}),(0,Tn.jsxs)("div",{className:"mx-auto text-justify grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 lg:mx-0 lg:max-w-none lg:grid-cols-2 lg:items-start lg:gap-y-10",children:[(0,Tn.jsx)("div",{className:"lg:col-span-2 lg:col-start-1 lg:row-start-1 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8",children:(0,Tn.jsx)("div",{className:"lg:pr-4",children:(0,Tn.jsxs)("div",{className:"lg:max-w-lg",children:[(0,Tn.jsx)("p",{className:"text-base font-semibold leading-7 text-indigo-600",children:"Computer Vision Syndrome Prevention Web Application User Manual"}),(0,Tn.jsx)("h1",{className:"mt-2 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Welcome to the Computer Vision Syndrome Prevention Web Application!"}),(0,Tn.jsx)("p",{className:"mt-6 text-xl leading-8 text-gray-700",children:"Thank you for choosing our web application dedicated to predicting and preventing Computer Vision Syndrome (CVS). This user manual will guide you through the various features and functionalities of the application to ensure a seamless and healthy computing experience."})]})})}),(0,Tn.jsx)("div",{className:"-ml-12 -mt-12 p-12 lg:sticky lg:top-4 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:(0,Tn.jsx)("img",{className:"w-[48rem] max-w-none rounded-xl bg-gray-900 shadow-xl ring-1 ring-gray-400/10 sm:w-[57rem]",src:"images/helpbanner.png",alt:""})}),(0,Tn.jsx)("div",{className:"lg:col-span-2 lg:col-start-1 lg:row-start-2 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8",children:(0,Tn.jsx)("div",{className:"lg:pr-4",children:(0,Tn.jsxs)("div",{className:"max-w-xl text-base leading-7 text-gray-700 lg:max-w-lg",children:[(0,Tn.jsx)("h2",{className:"mt-8 text-2xl font-bold tracking-tight text-gray-900",children:"1. Getting Started"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["1.1 System Requirements",(0,Tn.jsx)("br",{}),"Ensure that your device meets the following requirements: Web Browser: Chrome, Firefox, Safari, or Edge Webcam: Functional and connected",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"1.2 Account Creation",(0,Tn.jsx)("br",{}),'To make the most of the application, create an account by clicking on the "Sign Up" button. Provide the necessary details and follow the instructions to set up your account.',(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"1.3 Login and Dashboard Overview",(0,Tn.jsx)("br",{}),"Log in using your credentials. Upon successful login, you'll be directed to the dashboard. The dashboard provides an overview of your current usage patterns and health status."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"2. Usage Patterns and Health Tips"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["2.1 Distance and Interaction Time",(0,Tn.jsx)("br",{}),"Monitor your webcam distance and interaction time to receive personalized health tips. The application calculates these metrics and offers suggestions to prevent CVS.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"2.2 Health Tips",(0,Tn.jsx)("br",{}),"Receive real-time health tips based on your usage patterns. Follow these tips to maintain optimal eye health during computer usage.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"2.3 Warnings",(0,Tn.jsx)("br",{}),"Get warnings if your usage patterns indicate potential CVS risk. Take these warnings seriously and adjust your habits accordingly."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"3. Usage History"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["3.1 Viewing Usage History",(0,Tn.jsx)("br",{}),"Access your usage history to track trends over time. Analyze usage patterns and identify areas for improvement.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"3.2 Understanding Usage Patterns",(0,Tn.jsx)("br",{}),"Use the visualizations and statistics provided to understand how your habits impact eye health. Make informed decisions to prevent CVS."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"4. CVS Test Portal"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["4.1 Taking the CVS Test",(0,Tn.jsx)("br",{}),"Visit the CVS Test Portal to assess your risk of Computer Vision Syndrome. Answer the questions honestly to receive accurate predictions.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"4.2 Machine Learning Prediction",(0,Tn.jsx)("br",{}),"Benefit from our machine learning model to predict your likelihood of developing CVS based on your test responses.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"4.3 Interpretation of Results",(0,Tn.jsx)("br",{}),"Review your test results, which include personalized recommendations for prevention and potential next steps."]}),(0,Tn.jsx)("p",{className:"mt-6 text-xl leading-8 text-gray-700",children:"Remember, the Computer Vision Syndrome Prevention Web Application is designed to enhance your well-being during computer usage. Follow the recommendations, stay informed, and enjoy a healthier digital experience!"})]})})})]})]}),(0,Tn.jsx)(Ta,{})]})}function fI(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),s=ee();return(0,r.useEffect)((()=>{fk.getContactDetails().then((e=>{t(e.data.contactUs.email),i(e.data.contactUs.contactNo),o(e.data.contactUs.websiteUrl)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),s("/login"),window.location.reload())}))}),[s]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsx)("div",{className:"bg-white py-24 sm:py-32",style:{minHeight:"80vh"},children:(0,Tn.jsxs)("div",{className:"mx-auto grid max-w-7xl gap-x-8 gap-y-20 px-6 lg:px-8 xl:grid-cols-3",children:[(0,Tn.jsxs)("div",{className:"max-w-3xl text-justify",children:[(0,Tn.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Get in touch"}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-600",children:"We try to respond to you as soon as possible."})]}),(0,Tn.jsxs)("div",{className:"grid gap-x-8 gap-y-8 sm:grid-cols-2 sm:gap-y-8 xl:col-span-2",children:[(0,Tn.jsx)("div",{className:"group relative",children:(0,Tn.jsx)("div",{className:"w-full overflow-hidden rounded-md group-hover:opacity-75",children:(0,Tn.jsxs)("div",{className:"pl-12 pt-12 pb-8 bg-gray-200 p-4 w-full md:w-auto bg-opacity-30",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold",children:"Email"}),(0,Tn.jsx)("p",{className:"text-indigo-600",children:e})]})})}),(0,Tn.jsx)("div",{className:"group relative",children:(0,Tn.jsx)("div",{className:"w-full overflow-hidden rounded-md group-hover:opacity-75",children:(0,Tn.jsxs)("div",{className:"pl-12 pt-12 pb-8 bg-gray-200 p-4 w-full md:w-auto bg-opacity-30",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold",children:"Contact Number"}),(0,Tn.jsx)("p",{className:"text-indigo-600",children:n})]})})}),(0,Tn.jsx)("div",{className:"group relative",children:(0,Tn.jsx)("div",{className:"w-full overflow-hidden rounded-md group-hover:opacity-75",children:(0,Tn.jsxs)("div",{className:"pl-12 pt-12 pb-8 bg-gray-200 p-4 w-full md:w-auto bg-opacity-30",children:[(0,Tn.jsx)("h3",{className:"text-lg font-semibold",children:"Website"}),(0,Tn.jsx)("p",{className:"text-indigo-600",children:a})]})})})]})]})}),(0,Tn.jsx)(Ta,{})]})}function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pI(Object(n),!0).forEach((function(t){xI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gI(e){return gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gI(e)}function vI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||wI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bI(e){return function(e){if(Array.isArray(e))return kI(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wI(e,t){if(e){if("string"===typeof e)return kI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kI(e,t):void 0}}function kI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _I=function(){},CI={},SI={},EI=null,NI={mark:_I,measure:_I};try{"undefined"!==typeof window&&(CI=window),"undefined"!==typeof document&&(SI=document),"undefined"!==typeof MutationObserver&&(EI=MutationObserver),"undefined"!==typeof performance&&(NI=performance)}catch(bt){}var RI,TI,II,DI,AI,PI=(CI.navigator||{}).userAgent,MI=void 0===PI?"":PI,OI=CI,FI=SI,jI=EI,LI=NI,BI=(OI.document,!!FI.documentElement&&!!FI.head&&"function"===typeof FI.addEventListener&&"function"===typeof FI.createElement),zI=~MI.indexOf("MSIE")||~MI.indexOf("Trident/"),WI="___FONT_AWESOME___",VI=16,UI="fa",HI="svg-inline--fa",GI="data-fa-i2svg",qI="data-fa-pseudo-element",KI="data-fa-pseudo-element-pending",XI="data-prefix",YI="data-icon",$I="fontawesome-i2svg",QI="async",JI=["HTML","HEAD","STYLE","SCRIPT"],ZI=function(){try{return!0}catch(bt){return!1}}(),eD="classic",tD="sharp",nD=[eD,tD];function rD(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[eD]}})}var iD=rD((xI(RI={},eD,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),xI(RI,tD,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),RI)),aD=rD((xI(TI={},eD,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),xI(TI,tD,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),TI)),oD=rD((xI(II={},eD,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),xI(II,tD,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),II)),sD=rD((xI(DI={},eD,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),xI(DI,tD,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),DI)),lD=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,uD="fa-layers-text",cD=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,dD=rD((xI(AI={},eD,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),xI(AI,tD,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),AI)),hD=[1,2,3,4,5,6,7,8,9,10],fD=hD.concat([11,12,13,14,15,16,17,18,19,20]),pD=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],mD={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},gD=new Set;Object.keys(aD[eD]).map(gD.add.bind(gD)),Object.keys(aD[tD]).map(gD.add.bind(gD));var vD=[].concat(nD,bI(gD),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",mD.GROUP,mD.SWAP_OPACITY,mD.PRIMARY,mD.SECONDARY]).concat(hD.map((function(e){return"".concat(e,"x")}))).concat(fD.map((function(e){return"w-".concat(e)}))),xD=OI.FontAwesomeConfig||{};if(FI&&"function"===typeof FI.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=yI(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=FI.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(xD[r]=i)}))}var yD={styleDefault:"solid",familyDefault:"classic",cssPrefix:UI,replacementClass:HI,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};xD.familyPrefix&&(xD.cssPrefix=xD.familyPrefix);var bD=mI(mI({},yD),xD);bD.autoReplaceSvg||(bD.observeMutations=!1);var wD={};Object.keys(yD).forEach((function(e){Object.defineProperty(wD,e,{enumerable:!0,set:function(t){bD[e]=t,kD.forEach((function(e){return e(wD)}))},get:function(){return bD[e]}})})),Object.defineProperty(wD,"familyPrefix",{enumerable:!0,set:function(e){bD.cssPrefix=e,kD.forEach((function(e){return e(wD)}))},get:function(){return bD.cssPrefix}}),OI.FontAwesomeConfig=wD;var kD=[];var _D=VI,CD={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var SD="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ED(){for(var e=12,t="";e-- >0;)t+=SD[62*Math.random()|0];return t}function ND(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function RD(e){return e.classList?ND(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function TD(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ID(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function DD(e){return e.size!==CD.size||e.x!==CD.x||e.y!==CD.y||e.rotate!==CD.rotate||e.flipX||e.flipY}var AD=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function PD(){var e=UI,t=HI,n=wD.cssPrefix,r=wD.replacementClass,i=AD;if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var MD=!1;function OD(){wD.autoAddCss&&!MD&&(!function(e){if(e&&BI){var t=FI.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=FI.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}FI.head.insertBefore(t,r)}}(PD()),MD=!0)}var FD={mixout:function(){return{dom:{css:PD,insertCss:OD}}},hooks:function(){return{beforeDOMElementCreation:function(){OD()},beforeI2svg:function(){OD()}}}},jD=OI||{};jD[WI]||(jD[WI]={}),jD[WI].styles||(jD[WI].styles={}),jD[WI].hooks||(jD[WI].hooks={}),jD[WI].shims||(jD[WI].shims=[]);var LD=jD[WI],BD=[],zD=!1;function WD(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?TD(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(TD(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(WD).join(""),"</").concat(t,">")}function VD(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}BI&&((zD=(FI.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(FI.readyState))||FI.addEventListener("DOMContentLoaded",(function e(){FI.removeEventListener("DOMContentLoaded",e),zD=1,BD.map((function(e){return e()}))})));var UD=function(e,t,n,r){var i,a,o,s=Object.keys(e),l=s.length,u=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<l;i++)o=u(o,e[a=s[i]],a,e);return o};function HD(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function GD(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function qD(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=GD(t);"function"!==typeof LD.hooks.addPack||r?LD.styles[e]=mI(mI({},LD.styles[e]||{}),i):LD.hooks.addPack(e,GD(t)),"fas"===e&&qD("fa",t)}var KD,XD,YD,$D=LD.styles,QD=LD.shims,JD=(xI(KD={},eD,Object.values(oD[eD])),xI(KD,tD,Object.values(oD[tD])),KD),ZD=null,eA={},tA={},nA={},rA={},iA={},aA=(xI(XD={},eD,Object.keys(iD[eD])),xI(XD,tD,Object.keys(iD[tD])),XD);function oA(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~vD.indexOf(n))?null:a}var sA,lA=function(){var e=function(e){return UD($D,(function(t,n,r){return t[r]=UD(n,e,{}),t}),{})};eA=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"===typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),tA=e((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"===typeof e}));r.forEach((function(t){e[t]=n}))}return e})),iA=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in $D||wD.autoFetchSvg,n=UD(QD,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});nA=n.names,rA=n.unicodes,ZD=pA(wD.styleDefault,{family:wD.familyDefault})};function uA(e,t){return(eA[e]||{})[t]}function cA(e,t){return(iA[e]||{})[t]}function dA(e){return nA[e]||{prefix:null,iconName:null}}function hA(){return ZD}sA=function(e){ZD=pA(e.styleDefault,{family:wD.familyDefault})},kD.push(sA),lA();var fA=function(){return{prefix:null,iconName:null,rest:[]}};function pA(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?eD:t,r=iD[n][e],i=aD[n][e]||aD[n][r],a=e in LD.styles?e:null;return i||a||null}var mA=(xI(YD={},eD,Object.keys(oD[eD])),xI(YD,tD,Object.keys(oD[tD])),YD);function gA(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(xI(t={},eD,"".concat(wD.cssPrefix,"-").concat(eD)),xI(t,tD,"".concat(wD.cssPrefix,"-").concat(tD)),t),a=null,o=eD;(e.includes(i[eD])||e.some((function(e){return mA[eD].includes(e)})))&&(o=eD),(e.includes(i[tD])||e.some((function(e){return mA[tD].includes(e)})))&&(o=tD);var s=e.reduce((function(e,t){var n=oA(wD.cssPrefix,t);if($D[t]?(t=JD[o].includes(t)?sD[o][t]:t,a=t,e.prefix=t):aA[o].indexOf(t)>-1?(a=t,e.prefix=pA(t,{family:o})):n?e.iconName=n:t!==wD.replacementClass&&t!==i[eD]&&t!==i[tD]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var s="fa"===a?dA(e.iconName):{},l=cA(e.prefix,e.iconName);s.prefix&&(a=null),e.iconName=s.iconName||l||e.iconName,e.prefix=s.prefix||e.prefix,"far"!==e.prefix||$D.far||!$D.fas||wD.autoFetchSvg||(e.prefix="fas")}return e}),fA());return(e.includes("fa-brands")||e.includes("fab"))&&(s.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(s.prefix="fad"),s.prefix||o!==tD||!$D.fass&&!wD.autoFetchSvg||(s.prefix="fass",s.iconName=cA(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==a||(s.prefix=hA()||"fas"),s}var vA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=mI(mI({},e.definitions[t]||{}),i[t]),qD(t,i[t]);var n=oD[eD][t];n&&qD(n,i[t]),lA()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&vI(t.prototype,n),r&&vI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xA=[],yA={},bA={},wA=Object.keys(bA);function kA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(yA[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function _A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(yA[e]||[]).forEach((function(e){e.apply(null,n)}))}function CA(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return bA[e]?bA[e].apply(null,t):void 0}function SA(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||hA();if(t)return t=cA(n,t)||t,VD(EA.definitions,n,t)||VD(LD.styles,n,t)}var EA=new vA,NA={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BI?(_A("beforeI2svg",e),CA("pseudoElements2svg",e),CA("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===wD.autoReplaceSvg&&(wD.autoReplaceSvg=!0),wD.observeMutations=!0,function(e){BI&&(zD?setTimeout(e,0):BD.push(e))}((function(){IA({autoReplaceSvgRoot:t}),_A("watch",e)}))}},RA={icon:function(e){if(null===e)return null;if("object"===gI(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:cA(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=pA(e[0]);return{prefix:n,iconName:cA(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(wD.cssPrefix,"-"))>-1||e.match(lD))){var r=gA(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||hA(),iconName:cA(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=hA();return{prefix:i,iconName:cA(i,e)||e}}}},TA={noAuto:function(){wD.autoReplaceSvg=!1,wD.observeMutations=!1,_A("noAuto")},config:wD,dom:NA,parse:RA,library:EA,findIconDefinition:SA,toHtml:WD},IA=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?FI:e;(Object.keys(LD.styles).length>0||wD.autoFetchSvg)&&BI&&wD.autoReplaceSvg&&TA.dom.i2svg({node:t})};function DA(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return WD(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(BI){var t=FI.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function AA(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,l=e.title,u=e.maskId,c=e.titleId,d=e.extra,h=e.watchable,f=void 0!==h&&h,p=r.found?r:n,m=p.width,g=p.height,v="fak"===i,x=[wD.replacementClass,a?"".concat(wD.cssPrefix,"-").concat(a):""].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),y={children:[],attributes:mI(mI({},d.attributes),{},{"data-prefix":i,"data-icon":a,class:x,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(y.attributes[GI]=""),l&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(c||ED())},children:[l]}),delete y.attributes.title);var w=mI(mI({},y),{},{prefix:i,iconName:a,main:n,mask:r,maskId:u,transform:o,symbol:s,styles:mI(mI({},b),d.styles)}),k=r.found&&n.found?CA("generateAbstractMask",w)||{children:[],attributes:{}}:CA("generateAbstractIcon",w)||{children:[],attributes:{}},_=k.children,C=k.attributes;return w.children=_,w.attributes=C,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(wD.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:mI(mI({},i),{},{id:o}),children:r}]}]}(w):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(DD(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=ID(mI(mI({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(w)}function PA(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,l=void 0!==s&&s,u=mI(mI(mI({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});l&&(u[GI]="");var c=mI({},o.styles);DD(i)&&(c.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?VI:n,i=e.height,a=void 0===i?VI:i,o=e.startCentered,s=void 0!==o&&o,l="";return l+=s&&zI?"translate(".concat(t.x/_D-r/2,"em, ").concat(t.y/_D-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/_D,"em), calc(-50% + ").concat(t.y/_D,"em)) "):"translate(".concat(t.x/_D,"em, ").concat(t.y/_D,"em) "),l+="scale(".concat(t.size/_D*(t.flipX?-1:1),", ").concat(t.size/_D*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var d=ID(c);d.length>0&&(u.style=d);var h=[];return h.push({tag:"span",attributes:u,children:[t]}),a&&h.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),h}var MA=LD.styles;function OA(e){var t=e[0],n=e[1],r=yI(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(wD.cssPrefix,"-").concat(mD.GROUP)},children:[{tag:"path",attributes:{class:"".concat(wD.cssPrefix,"-").concat(mD.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(wD.cssPrefix,"-").concat(mD.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var FA={found:!1,width:512,height:512};function jA(e,t){var n=t;return"fa"===t&&null!==wD.styleDefault&&(t=hA()),new Promise((function(r,i){CA("missingIconAbstract");if("fa"===n){var a=dA(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&MA[t]&&MA[t][e])return r(OA(MA[t][e]));!function(e,t){ZI||wD.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(mI(mI({},FA),{},{icon:wD.showMissingIcons&&e&&CA("missingIconAbstract")||{}}))}))}var LA=function(){},BA=wD.measurePerformance&&LI&&LI.mark&&LI.measure?LI:{mark:LA,measure:LA},zA='FA "6.5.1"',WA=function(e){BA.mark("".concat(zA," ").concat(e," ends")),BA.measure("".concat(zA," ").concat(e),"".concat(zA," ").concat(e," begins"),"".concat(zA," ").concat(e," ends"))},VA={begin:function(e){return BA.mark("".concat(zA," ").concat(e," begins")),function(){return WA(e)}},end:WA},UA=function(){};function HA(e){return"string"===typeof(e.getAttribute?e.getAttribute(GI):null)}function GA(e){return FI.createElementNS("http://www.w3.org/2000/svg",e)}function qA(e){return FI.createElement(e)}function KA(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?GA:qA:t;if("string"===typeof e)return FI.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(KA(e,{ceFn:n}))})),r}var XA={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(KA(e),t)})),null===t.getAttribute(GI)&&wD.keepOriginalSource){var n=FI.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~RD(t).indexOf(wD.replacementClass))return XA.replace(e);var r=new RegExp("".concat(wD.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===wD.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return WD(e)})).join("\n");t.setAttribute(GI,""),t.innerHTML=a}};function YA(e){e()}function $A(e,t){var n="function"===typeof t?t:UA;if(0===e.length)n();else{var r=YA;wD.mutateApproach===QI&&(r=OI.requestAnimationFrame||YA),r((function(){var t=!0===wD.autoReplaceSvg?XA.replace:XA[wD.autoReplaceSvg]||XA.replace,r=VA.begin("mutate");e.map(t),r(),n()}))}}var QA=!1;function JA(){QA=!0}function ZA(){QA=!1}var eP=null;function tP(e){if(jI&&wD.observeMutations){var t=e.treeCallback,n=void 0===t?UA:t,r=e.nodeCallback,i=void 0===r?UA:r,a=e.pseudoElementsCallback,o=void 0===a?UA:a,s=e.observeMutationsRoot,l=void 0===s?FI:s;eP=new jI((function(e){if(!QA){var t=hA();ND(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!HA(e.addedNodes[0])&&(wD.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&wD.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&HA(e.target)&&~pD.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(XI):null,n=e.getAttribute?e.getAttribute(YI):null;return t&&n}(e.target)){var r=gA(RD(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(XI,a||t),s&&e.target.setAttribute(YI,s)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(wD.replacementClass)&&i(e.target);var l}))}})),BI&&eP.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function nP(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=gA(RD(e));return i.prefix||(i.prefix=hA()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(tA[e]||{})[t]}(i.prefix,e.innerText)||uA(i.prefix,HD(e.innerText))),!i.iconName&&wD.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function rP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=nP(e),r=n.iconName,i=n.prefix,a=n.rest,o=function(e){var t=ND(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return wD.autoA11y&&(n?t["aria-labelledby"]="".concat(wD.replacementClass,"-title-").concat(r||ED()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),s=kA("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return mI({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:CD,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:l,attributes:o}},s)}var iP=LD.styles;function aP(e){var t="nest"===wD.autoReplaceSvg?rP(e,{styleParser:!1}):rP(e);return~t.extra.classes.indexOf(uD)?CA("generateLayersText",e,t):CA("generateSvgReplacementMutation",e,t)}var oP=new Set;function sP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!BI)return Promise.resolve();var n=FI.documentElement.classList,r=function(e){return n.add("".concat($I,"-").concat(e))},i=function(e){return n.remove("".concat($I,"-").concat(e))},a=wD.autoFetchSvg?oP:nD.map((function(e){return"fa-".concat(e)})).concat(Object.keys(iP));a.includes("fa")||a.push("fa");var o=[".".concat(uD,":not([").concat(GI,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(GI,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=ND(e.querySelectorAll(o))}catch(bt){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var l=VA.begin("onTree"),u=s.reduce((function(e,t){try{var n=aP(t);n&&e.push(n)}catch(bt){ZI||"MissingIcon"===bt.name&&console.error(bt)}return e}),[]);return new Promise((function(e,n){Promise.all(u).then((function(n){$A(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function lP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;aP(e).then((function(e){e&&$A([e],t)}))}nD.map((function(e){oP.add("fa-".concat(e))})),Object.keys(iD[eD]).map(oP.add.bind(oP)),Object.keys(iD[tD]).map(oP.add.bind(oP)),oP=bI(oP);var uP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?CD:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,l=t.maskId,u=void 0===l?null:l,c=t.title,d=void 0===c?null:c,h=t.titleId,f=void 0===h?null:h,p=t.classes,m=void 0===p?[]:p,g=t.attributes,v=void 0===g?{}:g,x=t.styles,y=void 0===x?{}:x;if(e){var b=e.prefix,w=e.iconName,k=e.icon;return DA(mI({type:"icon"},e),(function(){return _A("beforeDOMElementCreation",{iconDefinition:e,params:t}),wD.autoA11y&&(d?v["aria-labelledby"]="".concat(wD.replacementClass,"-title-").concat(f||ED()):(v["aria-hidden"]="true",v.focusable="false")),AA({icons:{main:OA(k),mask:s?OA(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:w,transform:mI(mI({},CD),r),symbol:a,title:d,maskId:u,titleId:f,extra:{attributes:v,styles:y,classes:m}})}))}},cP={mixout:function(){return{icon:(e=uP,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:SA(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:SA(i||{})),e(r,mI(mI({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=sP,e.nodeCallback=lP,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?FI:t,r=e.callback;return sP(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,l=t.mask,u=t.maskId,c=t.extra;return new Promise((function(t,d){Promise.all([jA(n,a),l.iconName?jA(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var d=yI(l,2),h=d[0],f=d[1];t([e,AA({icons:{main:h,mask:f},prefix:a,iconName:n,transform:o,symbol:s,maskId:u,title:r,titleId:i,extra:c,watchable:!0})])})).catch(d)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=ID(e.styles);return o.length>0&&(r.style=o),DD(a)&&(t=CA("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},dP={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return DA({type:"layer"},(function(){_A("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(wD.cssPrefix,"-layers")].concat(bI(r)).join(" ")},children:n}]}))}}}},hP={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,l=t.styles,u=void 0===l?{}:l;return DA({type:"counter",content:e},(function(){return _A("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=mI(mI(mI({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=ID(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:r,extra:{attributes:s,styles:u,classes:["".concat(wD.cssPrefix,"-layers-counter")].concat(bI(a))}})}))}}}},fP={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?CD:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,l=t.attributes,u=void 0===l?{}:l,c=t.styles,d=void 0===c?{}:c;return DA({type:"text",content:e},(function(){return _A("beforeDOMElementCreation",{content:e,params:t}),PA({content:e,transform:mI(mI({},CD),r),title:a,extra:{attributes:u,styles:d,classes:["".concat(wD.cssPrefix,"-layers-text")].concat(bI(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(zI){var s=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();a=l.width/s,o=l.height/s}return wD.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,PA({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},pP=new RegExp('"',"ug"),mP=[1105920,1112319];function gP(e,t){var n="".concat(KI).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=ND(e.children).filter((function(e){return e.getAttribute(qI)===t}))[0],o=OI.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(cD),l=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==u&&""!==u){var c=o.getPropertyValue("content"),d=~["Sharp"].indexOf(s[2])?tD:eD,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?aD[d][s[2].toLowerCase()]:dD[d][l],f=function(e){var t=e.replace(pP,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=mP[0]&&n<=mP[1],i=2===t.length&&t[0]===t[1];return{value:HD(i?t[0]:t),isSecondary:r||i}}(c),p=f.value,m=f.isSecondary,g=s[0].startsWith("FontAwesome"),v=uA(h,p),x=v;if(g){var y=function(e){var t=rA[e],n=uA("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);y.iconName&&y.prefix&&(v=y.iconName,h=y.prefix)}if(!v||m||a&&a.getAttribute(XI)===h&&a.getAttribute(YI)===x)r();else{e.setAttribute(n,x),a&&e.removeChild(a);var b={iconName:null,title:null,titleId:null,prefix:null,transform:CD,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},w=b.extra;w.attributes[qI]=t,jA(v,h).then((function(i){var a=AA(mI(mI({},b),{},{icons:{main:i,mask:fA()},prefix:h,iconName:x,extra:w,watchable:!0})),o=FI.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return WD(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function vP(e){return Promise.all([gP(e,"::before"),gP(e,"::after")])}function xP(e){return e.parentNode!==document.head&&!~JI.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(qI)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function yP(e){if(BI)return new Promise((function(t,n){var r=ND(e.querySelectorAll("*")).filter(xP).map(vP),i=VA.begin("searchPseudoElements");JA(),Promise.all(r).then((function(){i(),ZA(),t()})).catch((function(){i(),ZA(),n()}))}))}var bP=!1,wP=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},kP={mixout:function(){return{parse:{transform:function(e){return wP(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=wP(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),u={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(l)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:mI({},u.outer),children:[{tag:"g",attributes:mI({},u.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:mI(mI({},t.icon.attributes),u.path)}]}]}}}},_P={x:0,y:0,width:"100%",height:"100%"};function CP(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var SP={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?gA(n.split(" ").map((function(e){return e.trim()}))):fA();return r.prefix||(r.prefix=hA()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,l=i.width,u=i.icon,c=a.width,d=a.icon,h=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:mI(mI({},_P),{},{fill:"white"})},p=u.children?{children:u.children.map(CP)}:{},m={tag:"g",attributes:mI({},h.inner),children:[CP(mI({tag:u.tag,attributes:mI(mI({},u.attributes),h.path)},p))]},g={tag:"g",attributes:mI({},h.outer),children:[m]},v="mask-".concat(o||ED()),x="clip-".concat(o||ED()),y={tag:"mask",attributes:mI(mI({},_P),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:(t=d,"g"===t.tag?t.children:[t])},y]};return n.push(b,{tag:"rect",attributes:mI({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(v,")")},_P)}),{children:n,attributes:r}}}},EP={provides:function(e){var t=!1;OI.matchMedia&&(t=OI.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:mI(mI({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=mI(mI({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:mI(mI({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:mI(mI({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:mI(mI({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:mI(mI({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:mI(mI({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:mI(mI({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:mI(mI({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;xA=e,yA={},Object.keys(bA).forEach((function(e){-1===wA.indexOf(e)&&delete bA[e]})),xA.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===gI(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){yA[e]||(yA[e]=[]),yA[e].push(r[e])}))}e.provides&&e.provides(bA)}))}([FD,cP,dP,hP,fP,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=yP,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?FI:t;wD.searchPseudoElements&&yP(n)}}},{mixout:function(){return{dom:{unwatch:function(){JA(),bP=!0}}}},hooks:function(){return{bootstrap:function(){tP(kA("mutationObserverCallbacks",{}))},noAuto:function(){eP&&eP.disconnect()},watch:function(e){var t=e.observeMutationsRoot;bP?ZA():tP(kA("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},kP,SP,EP,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:TA});var NP=TA.parse,RP=TA.icon,TP=n(731),IP=n.n(TP);function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DP(Object(n),!0).forEach((function(t){MP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PP(e){return PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PP(e)}function MP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FP(e){return function(e){if(Array.isArray(e))return jP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return jP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LP(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var BP=["style"];var zP=!1;try{zP=!0}catch(bt){}function WP(e){return e&&"object"===PP(e)&&e.prefix&&e.iconName&&e.icon?e:NP.icon?NP.icon(e):null===e?null:e&&"object"===PP(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function VP(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?MP({},e,t):{}}var UP=r.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,s=e.titleId,l=e.maskId,u=WP(n),c=VP("classes",[].concat(FP(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,l=e.spin,u=e.spinPulse,c=e.spinReverse,d=e.pulse,h=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,v=e.size,x=e.rotation,y=e.pull,b=(MP(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),"undefined"!==typeof v&&null!==v),MP(t,"fa-rotate-".concat(x),"undefined"!==typeof x&&null!==x&&0!==x),MP(t,"fa-pull-".concat(y),"undefined"!==typeof y&&null!==y),MP(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(e)),FP(a.split(" ")))),d=VP("transform","string"===typeof e.transform?NP.transform(e.transform):e.transform),h=VP("mask",WP(r)),f=RP(u,AP(AP(AP(AP({},c),d),h),{},{symbol:i,title:o,titleId:s,maskId:l}));if(!f)return function(){var e;!zP&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var p=f.abstract,m={ref:t};return Object.keys(e).forEach((function(t){UP.defaultProps.hasOwnProperty(t)||(m[t]=e[t])})),HP(p[0],m)}));UP.displayName="FontAwesomeIcon",UP.propTypes={beat:IP().bool,border:IP().bool,beatFade:IP().bool,bounce:IP().bool,className:IP().string,fade:IP().bool,flash:IP().bool,mask:IP().oneOfType([IP().object,IP().array,IP().string]),maskId:IP().string,fixedWidth:IP().bool,inverse:IP().bool,flip:IP().oneOf([!0,!1,"horizontal","vertical","both"]),icon:IP().oneOfType([IP().object,IP().array,IP().string]),listItem:IP().bool,pull:IP().oneOf(["right","left"]),pulse:IP().bool,rotation:IP().oneOf([0,90,180,270]),shake:IP().bool,size:IP().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:IP().bool,spinPulse:IP().bool,spinReverse:IP().bool,symbol:IP().oneOfType([IP().bool,IP().string]),title:IP().string,titleId:IP().string,transform:IP().oneOfType([IP().string,IP().object]),swapOpacity:IP().bool},UP.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var HP=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=LP(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[LP(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,l=OP(r,BP);return a.attrs.style=AP(AP({},a.attrs.style),s),t.apply(void 0,[n.tag,AP(AP({},a.attrs),l)].concat(FP(i)))}.bind(null,r.createElement),GP={prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]},qP={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};function KP(){const[e,t]=(0,r.useState)([""]),n=ee();return(0,r.useEffect)((()=>{fk.getAboutText().then((e=>{t(e.data.about.aboutText)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),n("/login"),window.location.reload())}))}),[n]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsx)("div",{className:"bg-white py-24 sm:py-32",children:(0,Tn.jsxs)("div",{className:"mx-auto px-4",children:[(0,Tn.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl text-center",children:"Meet our Team"}),(0,Tn.jsx)("div",{className:"mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-20 lg:max-w-4xl ",children:(0,Tn.jsxs)("div",{className:"grid max-w-xl grid-cols-1 gap-x-8 gap-y-10 lg:max-w-none lg:grid-cols-2 lg:gap-y-16",children:[(0,Tn.jsxs)("div",{className:"group",children:[(0,Tn.jsx)("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none",children:(0,Tn.jsx)("img",{src:"images/imesh.png",alt:"imesh",className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),(0,Tn.jsx)("div",{className:"mt-4 flex justify-between",children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h3",{className:"text-xl text-gray-700 font-semibold",children:(0,Tn.jsxs)("span",{children:[(0,Tn.jsx)("span",{"aria-hidden":"true",className:"absolute"}),"Imesh Ranawella"]})}),(0,Tn.jsx)("p",{className:"mt-1 text-sm text-indigo-600 text-lg",children:"BSc (Hons) in Software Engineering"}),(0,Tn.jsxs)("p",{className:"mt-1 text-sm",children:[(0,Tn.jsx)(UP,{icon:GP,size:"2x",onClick:()=>window.open("https://www.linkedin.com/in/imesh-ranawella/")}),(0,Tn.jsx)("span",{className:"mx-2"}),(0,Tn.jsx)(UP,{icon:qP,size:"2x",onClick:()=>window.open("https://github.com/imexh")})]})]})})]}),(0,Tn.jsxs)("div",{className:"group",children:[(0,Tn.jsx)("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none",children:(0,Tn.jsx)("img",{src:"images/vimukthi.png",alt:"vimukthi",className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),(0,Tn.jsx)("div",{className:"mt-4 flex justify-between",children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h3",{className:"text-xl text-gray-700 font-semibold",children:(0,Tn.jsxs)("span",{children:[(0,Tn.jsx)("span",{"aria-hidden":"true",className:"absolute"}),"Vimukthi Polgolla"]})}),(0,Tn.jsx)("p",{className:"mt-1 text-sm text-indigo-600 text-lg",children:"BSc (Hons) in Data Science"}),(0,Tn.jsxs)("p",{className:"mt-1 text-sm",children:[(0,Tn.jsx)(UP,{icon:GP,size:"2x",onClick:()=>window.open("https://www.linkedin.com/in/vimukthi-polgolla/")}),(0,Tn.jsx)("span",{className:"mx-2"}),(0,Tn.jsx)(UP,{icon:qP,size:"2x",onClick:()=>window.open("https://github.com/VimukthiPolgolla")})]})]})})]})]})})]})}),(0,Tn.jsxs)("div",{className:"relative isolate overflow-hidden bg-gray-900 py-24 sm:py-32",children:[(0,Tn.jsx)("img",{src:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&crop=focalpoint&fp-y=.8&w=2830&h=1500&q=80&blend=111827&sat=-100&exp=15&blend-mode=multiply",alt:"",className:"absolute inset-0 -z-10 h-full w-full object-cover object-right md:object-center"}),(0,Tn.jsx)("div",{className:"hidden sm:absolute sm:-top-10 sm:right-1/2 sm:-z-10 sm:mr-10 sm:block sm:transform-gpu sm:blur-3xl","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"aspect-[1097/845] w-[68.5625rem] bg-gradient-to-tr from-[#ff4694] to-[#776fff] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),(0,Tn.jsx)("div",{className:"absolute -top-52 left-1/2 -z-10 -translate-x-1/2 transform-gpu blur-3xl sm:top-[-28rem] sm:ml-16 sm:translate-x-0 sm:transform-gpu","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"aspect-[1097/845] w-[68.5625rem] bg-gradient-to-tr from-[#ff4694] to-[#776fff] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),(0,Tn.jsx)("div",{className:"mx-auto max-w-7xl px-6 lg:px-8",children:(0,Tn.jsxs)("div",{className:"mx-auto max-w-2xl lg:mx-0 text-justify",children:[(0,Tn.jsx)("h2",{className:"text-4xl font-bold tracking-tight text-white sm:text-6xl",children:"Who are we?"}),(0,Tn.jsxs)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:["Our team is composed of two ambitious and talented final-year undergraduates from SLTC Research University: Imesh Ranawella pursuing a BSc (Hons) in Software Engineering and Vimukthi Polgolla specializing in BSc (Hons) in Data Science. As passionate individuals in the field of technology, we have joined forces to embark on a groundbreaking project for our final year. Our mission is to address the prevalent issue of computer vision syndrome (CVS) by developing the innovative ",(0,Tn.jsx)("b",{children:"Eye Care"}),"  App."]})]})})]}),(0,Tn.jsxs)("section",{className:"relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:px-8",children:[(0,Tn.jsx)("div",{className:"absolute inset-0 -z-10 bg-[radial-gradient(45rem_50rem_at_top,theme(colors.indigo.100),white)] opacity-20"}),(0,Tn.jsx)("div",{className:"absolute inset-y-0 right-1/2 -z-10 mr-16 w-[200%] origin-bottom-left skew-x-[-30deg] bg-white shadow-xl shadow-indigo-600/10 ring-1 ring-indigo-50 sm:mr-28 lg:mr-0 xl:mr-16 xl:origin-center"}),(0,Tn.jsxs)("div",{className:"mx-auto max-w-2xl lg:max-w-4xl",children:[(0,Tn.jsx)("img",{className:"mx-auto h-24",src:"/images/eyecaresquarelogowithtextblack.png",alt:""}),(0,Tn.jsx)("figure",{className:"mt-10",children:(0,Tn.jsx)("blockquote",{className:"text-center text-xl font-semibold leading-8 text-gray-900 sm:text-2xl sm:leading-9",children:(0,Tn.jsx)("p",{children:"\u201cThe project's goal is to forecast the likelihood that users would develop CVS and provide tailored advice using webcam-based user interaction analysis and machine learning. The main goal is to equip users, especially college students, with knowledge and resources to develop better screen usage habits, thereby lowering the risk of eye pain, headaches, back pain, neck pain, and blurred vision brought on by prolonged screen engagement. The online application's ultimate goal is to advance users' digital lifestyles and general well-being.\u201d"})})})]})]}),(0,Tn.jsx)(Ta,{})]})}const XP=r.forwardRef((function(e,t){let{title:n,titleId:i,...a}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4H5V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z",clipRule:"evenodd"}))})),YP=XP;function $P(){const[e,t]=(0,r.useState)(),[n,i]=(0,r.useState)([]),a=ee();return(0,r.useEffect)((()=>{try{const e=new Date;e.setHours(0,0,0,0),t(e.toLocaleDateString());const n=Si.getCurrentUser();fk.getHealthTips(n.username).then((e=>{i(e.data.healthTips)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),a("/login"),window.location.reload())}))}catch(e){console.log("Private page",e.response)}}),[a]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsx)("div",{className:"lg:flex lg:items-center lg:justify-between mx-auto px-16 mt-8",children:(0,Tn.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:"Health Tips"}),(0,Tn.jsx)("div",{className:"mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6",children:(0,Tn.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,Tn.jsx)(YP,{className:"mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400","aria-hidden":"true"}),e]})})]})}),(0,Tn.jsx)("ul",{role:"list",className:"divide-y divide-gray-100 mx-auto px-16 mt-8",style:{minHeight:"70vh"},children:n.map(((e,t)=>(0,Tn.jsx)("li",{className:"flex justify-between gap-x-6 py-5",children:(0,Tn.jsx)("div",{className:"flex min-w-0 gap-x-4",children:(0,Tn.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,Tn.jsxs)("p",{className:"text-lg leading-6 text-gray-900",children:["Tip ",t+1,":"]}),(0,Tn.jsx)("p",{className:"mt-1 truncate font-semibold  text-xl leading-5 text-indigo-600",children:e})]})})},e)))}),(0,Tn.jsx)(Ta,{})]})}function QP(e){return(0,Tn.jsx)("div",{children:(0,Tn.jsx)(iI,{data:{labels:e.chartLabels,datasets:[{label:e.yLabel1,data:e.chartData1},{label:e.yLabel2,data:e.chartData2}]},options:{plugins:{title:{display:!0,text:e.title,font:{family:"'Open Sans', sans-serif",weight:"bold",size:20},color:"black"}}}})})}function JP(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[u,c]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(["Mon","Tue","Wed","Thur","Fri","Sat","Sun"]),[m,g]=(0,r.useState)([]),[v,x]=(0,r.useState)([]),y=ee();return(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())y("/login");else{const e=Si.getCurrentUser().username;fk.getWeeklyDistances(e).then((e=>{const n=[],r=[];for(const[t,i]of Object.entries(e.data.distances))n.push(t),r.push(i);i(r),t(n)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())})),fk.getWeeklyInteractionTimes(e).then((e=>{const n=[],r=[];for(const[t,i]of Object.entries(e.data.interactionTimes))n.push(t),r.push(i);o(r),t(n)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())})),fk.getPreviousWeeklyDistances(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.distances))t.push(r),n.push(i);g(n)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())})),fk.getPreviousWeeklyInteractionTimes(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.interactionTimes))t.push(r),n.push(i);x(n)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())}))}}),[y]),(0,r.useEffect)((()=>{if(null==Si.getCurrentUser())y("/login");else{const e=Si.getCurrentUser().username;fk.getMonthlyDistances(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.distances))t.push(r),n.push(i);c(n),l(t)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())})),fk.getMonthlyInteractionTimes(e).then((e=>{const t=[],n=[];for(const[r,i]of Object.entries(e.data.interactionTimes))t.push(r),n.push(i);h(n),l(t)})).catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),y("/login"),window.location.reload())}))}}),[y]),(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("div",{className:"min-h-full mb-12",children:[(0,Tn.jsx)("header",{className:"bg-white shadow pb-2 mx-auto",children:(0,Tn.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,Tn.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 mb-4",children:"Usage Reports"})})}),(0,Tn.jsxs)("main",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 mx-auto px-16 mt-12",children:[(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6  lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Weekly Average Distances",chartLabels:e,yLabel:"Average Distance (cm)",chartData:n})}),(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6  lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Weekly Interaction Times",chartLabels:e,yLabel:"Interaction Time (sec)",chartData:a})}),(0,Tn.jsx)("div",{className:"sm:col-span-6  py-6 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Monthly Average Distances",chartLabels:s,yLabel:"Average Distance (cm)",chartData:u})}),(0,Tn.jsx)("div",{className:"sm:col-span-6  py-6 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(oI,{title:"Monthly Interaction Times",chartLabels:s,yLabel:"Interaction Time (sec)",chartData:d})}),(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6  lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(QP,{title:"Distances",chartLabels:f,yLabel1:"This Week (cm)",chartData1:n,yLabel2:"Previous Week (cm)",chartData2:m})}),(0,Tn.jsx)("div",{className:"sm:col-span-3 max-w-7xl py-6 lg:px-8 bg-gray-200 bg-opacity-30 rounded-md",children:(0,Tn.jsx)(QP,{title:"Interaction Times",chartLabels:f,yLabel1:"This Week (sec)",chartData1:a,yLabel2:"Previous Week (sec)",chartData2:v})})]})]}),(0,Tn.jsx)(Ta,{})]})}function ZP(){const e=ee();return(0,r.useEffect)((()=>{fk.getContactDetails().catch((t=>{console.log("Private page",t.response),t.response&&403===t.response.status&&(Si.logout(),e("/login"),window.location.reload())}))}),[e]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsx)("div",{className:"bg-white",children:(0,Tn.jsx)("div",{className:"mx-auto max-w-7xl sm:px-6 sm:py-20 lg:px-8",children:(0,Tn.jsxs)("div",{className:"relative isolate overflow-hidden bg-gray-900 px-6 pt-16 shadow-2xl sm:rounded-3xl sm:px-16 md:pt-24 lg:flex lg:gap-x-20 lg:px-24 lg:pt-0",children:[(0,Tn.jsxs)("svg",{viewBox:"0 0 1024 1024",className:"absolute left-1/2 top-1/2 -z-10 h-[64rem] w-[64rem] -translate-y-1/2 [mask-image:radial-gradient(closest-side,white,transparent)] sm:left-full sm:-ml-80 lg:left-1/2 lg:ml-0 lg:-translate-x-1/2 lg:translate-y-0","aria-hidden":"true",children:[(0,Tn.jsx)("circle",{cx:512,cy:512,r:512,fill:"url(#759c1415-0410-454c-8f7c-9a820de03641)",fillOpacity:"0.7"}),(0,Tn.jsx)("defs",{children:(0,Tn.jsxs)("radialGradient",{id:"759c1415-0410-454c-8f7c-9a820de03641",children:[(0,Tn.jsx)("stop",{stopColor:"#7775D6"}),(0,Tn.jsx)("stop",{offset:1,stopColor:"#E935C1"})]})})]}),(0,Tn.jsxs)("div",{className:"mx-auto text-center lg:mx-0 lg:flex-auto lg:py-20 lg:text-justify pb-20",children:[(0,Tn.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl",children:"Do you have Computer Vision Syndrome?"}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:"Welcome to Computer Vision Syndrome Prediction portal, where we aim to raise awareness about the potential risks associated with prolonged digital device usage. Computer Vision Syndrome (CVS) is a condition that arises from the extended use of computers, smartphones, and other digital screens. Common symptoms include eye strain, headaches, blurred vision, and dry eyes, impacting the overall visual health and well-being of individuals."}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:"Our platform offers a user-friendly and accessible way to assess the likelihood of experiencing Computer Vision Syndrome. By taking a simple test, you can gain insights into your digital habits and receive a probability score indicating the likelihood of developing CVS based on established patterns and risk factors."}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:"However, it's crucial to note that our prediction model is not infallible. While we strive to provide accurate and informative results, we emphasize that our platform is not intended for medical diagnosis or treatment. The information generated is purely indicative and should not be used as a substitute for professional medical advice."}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:"We explicitly disclaim any responsibility for decisions or actions taken based on the predictions provided by our model. It is advisable to consult with a qualified healthcare professional for personalized medical advice and diagnosis regarding any visual health concerns."}),(0,Tn.jsx)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:"At our core, we are committed to promoting awareness and encouraging users to adopt healthier digital habits. Remember that taking breaks, practicing the 20-20-20 rule, and maintaining proper ergonomics are essential steps in minimizing the risk of Computer Vision Syndrome. Explore our platform responsibly and prioritize your visual health on your digital journey."}),(0,Tn.jsxs)("div",{className:"mt-10 flex items-center justify-center gap-x-6 lg:justify-start",children:[(0,Tn.jsx)("a",{href:"",onClick:()=>{e("/cvs-input")},className:"rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white",children:"Get started"}),(0,Tn.jsxs)("a",{href:"/help",className:"text-sm font-semibold leading-6 text-white",children:["Learn more ",(0,Tn.jsx)("span",{"aria-hidden":"true",children:"\u2192"})]})]})]})]})})}),(0,Tn.jsx)(Ta,{})]})}function eM(){const[e,t]=(0,r.useState)(),[n,i]=(0,r.useState)("1"),[a,o]=(0,r.useState)("0"),[s,l]=(0,r.useState)("0"),[u,c]=(0,r.useState)("0"),[d,h]=(0,r.useState)("0"),[f,p]=(0,r.useState)("0"),[m,g]=(0,r.useState)(),[v,x]=(0,r.useState)("0"),[y,b]=(0,r.useState)("0"),[w,k]=(0,r.useState)("0"),[_,C]=(0,r.useState)("0"),[S,E]=(0,r.useState)("0"),[N,R]=(0,r.useState)("0"),[T,I]=(0,r.useState)("0"),[D,A]=(0,r.useState)("0"),[P,M]=(0,r.useState)("0"),[O,F]=(0,r.useState)("0"),[j,L]=(0,r.useState)("0"),[B,z]=(0,r.useState)("0"),[W,V]=(0,r.useState)("0"),[U,H]=(0,r.useState)("0"),[G,q]=(0,r.useState)("0"),[K,X]=(0,r.useState)(0),[Y,$]=(0,r.useState)(!1),[Q,J]=(0,r.useState)(!1),Z=()=>J(!0),te=ee(),ne=e=>{te("/cvs-home")};return(0,r.useEffect)((()=>{fk.getContactDetails().catch((e=>{console.log("Private page",e.response),e.response&&403===e.response.status&&(Si.logout(),te("/login"),window.location.reload())}))}),[te]),(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ra,{}),(0,Tn.jsxs)("form",{className:"mx-auto mt-8 mb-8 px-16",onSubmit:async t=>{t.preventDefault(),$(!0);try{await fk.calculateCvsPercentage(e,n,a,s,u,d,f,m,v,y,w,_,S,N,T,D,P,O,j,B,W,U,G).then((e=>{X(e.data.percentage),Z()}),(e=>{X("Oops! Something went wrong!"),Z()}))}catch(r){console.error(r)}finally{$(!1)}},children:[(0,Tn.jsxs)("div",{className:"space-y-12",children:[(0,Tn.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,Tn.jsx)("h2",{className:"text-3xl font-semibold leading-7 text-gray-900",children:"General Information"}),(0,Tn.jsx)("p",{className:"mt-1 text-xl leading-6 text-gray-600",children:"Provide general information for prediction."}),(0,Tn.jsxs)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"age",className:"block text-sm font-medium leading-6 text-gray-900",children:"Age"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{type:"number",name:"age",id:"age",required:!0,onChange:e=>t(e.target.value),autoComplete:"age",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium leading-6 text-gray-900",children:"Gender"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"gender",name:"gender",onChange:e=>{i(e.target.value)},value:n,autoComplete:"gender",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"1",children:"Male"}),(0,Tn.jsx)("option",{value:"0",children:"Female"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"averageHours",className:"block text-sm font-medium leading-6 text-gray-900",children:"Average number of hours you spend in front of a screen a day?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"averageHours",name:"averageHours",onChange:e=>{o(e.target.value)},value:a,autoComplete:"gender",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"Below 2 hours"}),(0,Tn.jsx)("option",{value:"1",children:"2 - 4 hours"}),(0,Tn.jsx)("option",{value:"2",children:"More than 4 hours"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"averageDistance",className:"block text-sm font-medium leading-6 text-gray-900",children:"Average distance from monitor (in cm)?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsx)("input",{type:"number",name:"averageDistance",id:"averageDistance",step:"any",required:!0,onChange:e=>g(e.target.value),autoComplete:"averageDistance",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"contactLenses",className:"block text-sm font-medium leading-6 text-gray-900",children:"Do you use contact lenses?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"contactLenses",name:"contactLenses",onChange:e=>{c(e.target.value)},value:u,autoComplete:"contactLenses",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No"}),(0,Tn.jsx)("option",{value:"1",children:"Yes"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"eyeDisease",className:"block text-sm font-medium leading-6 text-gray-900",children:"Do you have a history of eye disease and treatment?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"eyeDisease",name:"eyeDisease",onChange:e=>{l(e.target.value)},value:s,autoComplete:"eyeDisease",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No"}),(0,Tn.jsx)("option",{value:"1",children:"Yes"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"eyeSurgeries",className:"block text-sm font-medium leading-6 text-gray-900",children:"Have you done previous eye surgeries?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"eyeSurgeries",name:"eyeSurgeries",onChange:e=>{p(e.target.value)},value:f,autoComplete:"eyeSurgeries",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No"}),(0,Tn.jsx)("option",{value:"1",children:"Yes"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"monitorFilters",className:"block text-sm font-medium leading-6 text-gray-900",children:"Do you use monitor filters/blue light filters?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"monitorFilters",name:"monitorFilters",onChange:e=>{h(e.target.value)},value:d,autoComplete:"monitorFilters",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No"}),(0,Tn.jsx)("option",{value:"1",children:"Yes"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"roomIllumination",className:"block text-sm font-medium leading-6 text-gray-900",children:"Room illumination"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"roomIllumination",name:"roomIllumination",onChange:e=>{x(e.target.value)},value:v,autoComplete:"roomIllumination",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"Dark"}),(0,Tn.jsx)("option",{value:"1",children:"Dull"}),(0,Tn.jsx)("option",{value:"2",children:"Bright"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-3",children:[(0,Tn.jsx)("label",{htmlFor:"screenBrightness",className:"block text-sm font-medium leading-6 text-gray-900",children:"Screen brightness"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"screenBrightness",name:"screenBrightness",onChange:e=>{b(e.target.value)},value:y,autoComplete:"screenBrightness",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"Dark"}),(0,Tn.jsx)("option",{value:"1",children:"Dull"}),(0,Tn.jsx)("option",{value:"2",children:"Bright"}),(0,Tn.jsx)("option",{value:"3",children:"Very Bright"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-3",children:[(0,Tn.jsx)("label",{htmlFor:"breaks",className:"block text-sm font-medium leading-6 text-gray-900",children:"How often do you take breaks during the use of an electronic device?"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"breaks",name:"breaks",onChange:e=>{k(e.target.value)},value:w,autoComplete:"breaks",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"Every 15 minutes"}),(0,Tn.jsx)("option",{value:"1",children:"Every 20 minutes"}),(0,Tn.jsx)("option",{value:"2",children:"After 20 minutes"})]})})]})]})]}),(0,Tn.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,Tn.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Symptoms"}),(0,Tn.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Provide information about the symptoms you have."}),(0,Tn.jsxs)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"headache",className:"block text-sm font-medium leading-6 text-gray-900",children:"Headache"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"headache",name:"headache",onChange:e=>{C(e.target.value)},value:_,autoComplete:"headache",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"burningEyeSensation",className:"block text-sm font-medium leading-6 text-gray-900",children:"Burning eye sensation"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"burningEyeSensation",name:"burningEyeSensation",onChange:e=>{E(e.target.value)},value:S,autoComplete:"burningEyeSensation",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"eyeRedness",className:"block text-sm font-medium leading-6 text-gray-900",children:"Eye redness"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"eyeRedness",name:"eyeRedness",onChange:e=>{R(e.target.value)},value:N,autoComplete:"eyeRedness",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"blurredVision",className:"block text-sm font-medium leading-6 text-gray-900",children:"Blurred Vision"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"blurredVision",name:"blurredVision",onChange:e=>{I(e.target.value)},value:T,autoComplete:"blurredVision",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"dryEyes",className:"block text-sm font-medium leading-6 text-gray-900",children:"Dry Eyes"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"dryEyes",name:"dryEyes",onChange:e=>{A(e.target.value)},value:D,autoComplete:"dryEyes",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"neckAndShoulderPain",className:"block text-sm font-medium leading-6 text-gray-900",children:"Neck And Shoulder Pain"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"neckAndShoulderPain",name:"neckAndShoulderPain",onChange:e=>{M(e.target.value)},value:P,autoComplete:"neckAndShoulderPain",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"eyeStrain",className:"block text-sm font-medium leading-6 text-gray-900",children:"Eye Strain"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"eyeStrain",name:"eyeStrain",onChange:e=>{F(e.target.value)},value:O,autoComplete:"eyeStrain",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"tiredEyes",className:"block text-sm font-medium leading-6 text-gray-900",children:"Tired Eyes"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"tiredEyes",name:"tiredEyes",onChange:e=>{L(e.target.value)},value:j,autoComplete:"tiredEyes",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"soreEyes",className:"block text-sm font-medium leading-6 text-gray-900",children:"Sore Eyes"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"soreEyes",name:"soreEyes",onChange:e=>{z(e.target.value)},value:B,autoComplete:"soreEyes",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"irritation",className:"block text-sm font-medium leading-6 text-gray-900",children:"Irritation"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"irritation",name:"irritation",onChange:e=>{V(e.target.value)},value:W,autoComplete:"irritation",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"poorFocusing",className:"block text-sm font-medium leading-6 text-gray-900",children:"Poor Focusing"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"poorFocusing",name:"poorFocusing",onChange:e=>{H(e.target.value)},value:U,autoComplete:"poorFocusing",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]}),(0,Tn.jsxs)("div",{className:"sm:col-span-2",children:[(0,Tn.jsx)("label",{htmlFor:"doubleVision",className:"block text-sm font-medium leading-6 text-gray-900",children:"Double Vision"}),(0,Tn.jsx)("div",{className:"mt-2",children:(0,Tn.jsxs)("select",{id:"doubleVision",name:"doubleVision",onChange:e=>{q(e.target.value)},value:G,autoComplete:"doubleVision",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,Tn.jsx)("option",{value:"0",children:"No Symptoms"}),(0,Tn.jsx)("option",{value:"1",children:"Have Symptoms"})]})})]})]})]})]}),(0,Tn.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,Tn.jsx)("button",{type:"button",onClick:ne,className:"text-sm font-semibold leading-6 text-gray-900",children:"Cancel"}),(0,Tn.jsx)("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:Y&&Y?" Loading...":"Start Test"})]})]}),(0,Tn.jsx)(Ta,{}),(0,Tn.jsx)(pa.Root,{show:Q,as:r.Fragment,children:(0,Tn.jsxs)(Cn,{as:"div",className:"relative z-10",onClose:J,children:[(0,Tn.jsx)(pa.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Tn.jsx)("div",{className:"fixed inset-0 hidden bg-gray-500 bg-opacity-75 transition-opacity md:block"})}),(0,Tn.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,Tn.jsx)("div",{className:"flex min-h-full items-stretch justify-center text-center md:items-center md:px-2 lg:px-4",children:(0,Tn.jsx)(pa.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,Tn.jsx)(Cn.Panel,{className:"flex w-full transform text-left text-base transition md:my-8 md:max-w-xl md:px-4 lg:max-w-xl text-center",children:(0,Tn.jsxs)("div",{className:"relative flex w-full items-center overflow-hidden bg-white px-4 pb-8 pt-14 shadow-2xl sm:px-6 sm:pt-8 md:p-6 lg:p-8",children:[(0,Tn.jsxs)("button",{type:"button",className:"absolute right-4 top-4 text-gray-400 hover:text-gray-500 sm:right-6 sm:top-8 md:right-6 md:top-6 lg:right-8 lg:top-8",onClick:()=>J(!1),children:[(0,Tn.jsx)("span",{className:"sr-only",children:"Close"}),(0,Tn.jsx)(Rn,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,Tn.jsx)("div",{className:"grid w-full ",children:(0,Tn.jsxs)("div",{className:"sm:col-span-8 lg:col-span-7",children:[(0,Tn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 sm:pr-12",children:"Computer Vision Syndrome Percentage"}),(0,Tn.jsx)("section",{"aria-labelledby":"information-heading",className:"mt-2",children:(0,Tn.jsx)("p",{className:"text-2xl text-gray-900",children:K})}),(0,Tn.jsxs)("section",{"aria-labelledby":"options-heading",className:"mt-10",children:[(0,Tn.jsx)("button",{onClick:ne,className:"mt-6 w-32 items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Re-Test"}),(0,Tn.jsx)("span",{className:"mx-2"}),(0,Tn.jsx)("button",{onClick:e=>{te("/dashboard")},className:"mt-6 w-32 items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Home"})]})]})})]})})})})})]})})]})}const tM=function(e){let{onDistanceChange:t}=e;const[n,i]=r.useState(!1),[a,o]=r.useState(!1),s=r.useRef(),l=r.useRef();r.useEffect((()=>{(async()=>{const e="/models";Promise.all([Vw.tinyFaceDetector.loadFromUri(e),Vw.faceLandmark68Net.loadFromUri(e),Vw.faceRecognitionNet.loadFromUri(e),Vw.faceExpressionNet.loadFromUri(e)]).then((()=>{i(!0),u()}))})()}),[]);const u=()=>{o(!0),navigator.mediaDevices.getUserMedia({video:{width:300}}).then((e=>{let t=s.current;t.srcObject=e,t.onloadedmetadata=()=>{t.play()}})).catch((e=>{console.error("error:",e)}))};return(0,Tn.jsx)("div",{children:a?n?(0,Tn.jsx)("div",{children:(0,Tn.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"10px"},children:[(0,Tn.jsx)("video",{ref:s,height:480,width:640,onPlay:async()=>{const e={width:640,height:480};eb(l.current,e);const n=async()=>{try{if(l&&l.current){const n=uk(await lk(s.current,new bw).withFaceLandmarks().withFaceExpressions(),e);l.current.getContext("2d").clearRect(0,0,640,480);var r=0;n.length>0&&(r=function(e){const t=e[0].landmarks,n=t.getLeftEye(),r=t.getRightEye(),i=Math.sqrt(Math.pow(n[0]._x-r[3]._x,2)+Math.pow(n[0]._y-r[3]._y,2));return 3843/i+30}(n)),i=l.current,a=n,(Array.isArray(a)?a:[a]).forEach((function(e){var t=e instanceof xy?e:Sb(e)?e.landmarks:void 0;if(!t)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Rb(t).draw(i)})),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"white",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black";const o=e.current,s=o.getContext("2d");s.fillStyle=a;const l=s.measureText("Distance: ".concat(t.toFixed(2),"cm")).width,u=r;s.fillRect(n.x,n.y-u,l+5,u+5),s.font="".concat(r,"px Arial"),s.fillStyle=i,s.fillText("Distance: ".concat(t.toFixed(2),"cm"),n.x,n.y)}(l,r,{x:10,y:30}),t(r)}}catch(o){console.log(o)}var i,a;requestAnimationFrame(n)};requestAnimationFrame(n)},style:{borderRadius:"10px"}}),(0,Tn.jsx)("canvas",{ref:l,style:{position:"absolute"}})]})}):(0,Tn.jsx)("div",{children:"loading..."}):(0,Tn.jsx)(Tn.Fragment,{})})};function nM(){return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ni,{}),(0,Tn.jsx)("div",{className:"bg-white py-24 sm:py-32",children:(0,Tn.jsxs)("div",{className:"mx-auto px-4",children:[(0,Tn.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl text-center",children:"Meet our Team"}),(0,Tn.jsx)("div",{className:"mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-20 lg:max-w-4xl ",children:(0,Tn.jsxs)("div",{className:"grid max-w-xl grid-cols-1 gap-x-8 gap-y-10 lg:max-w-none lg:grid-cols-2 lg:gap-y-16",children:[(0,Tn.jsxs)("div",{className:"group",children:[(0,Tn.jsx)("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none",children:(0,Tn.jsx)("img",{src:"images/imesh.png",alt:"imesh",className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),(0,Tn.jsx)("div",{className:"mt-4 flex justify-between",children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h3",{className:"text-xl text-gray-700 font-semibold",children:(0,Tn.jsxs)("span",{children:[(0,Tn.jsx)("span",{"aria-hidden":"true",className:"absolute"}),"Imesh Ranawella"]})}),(0,Tn.jsx)("p",{className:"mt-1 text-sm text-indigo-600 text-lg",children:"BSc (Hons) in Software Engineering"}),(0,Tn.jsxs)("p",{className:"mt-1 text-sm",children:[(0,Tn.jsx)(UP,{icon:GP,size:"2x",onClick:()=>window.open("https://www.linkedin.com/in/imesh-ranawella/")}),(0,Tn.jsx)("span",{className:"mx-2"}),(0,Tn.jsx)(UP,{icon:qP,size:"2x",onClick:()=>window.open("https://github.com/imexh")})]})]})})]}),(0,Tn.jsxs)("div",{className:"group",children:[(0,Tn.jsx)("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none",children:(0,Tn.jsx)("img",{src:"images/vimukthi.png",alt:"vimukthi",className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),(0,Tn.jsx)("div",{className:"mt-4 flex justify-between",children:(0,Tn.jsxs)("div",{children:[(0,Tn.jsx)("h3",{className:"text-xl text-gray-700 font-semibold",children:(0,Tn.jsxs)("span",{children:[(0,Tn.jsx)("span",{"aria-hidden":"true",className:"absolute"}),"Vimukthi Polgolla"]})}),(0,Tn.jsx)("p",{className:"mt-1 text-sm text-indigo-600 text-lg",children:"BSc (Hons) in Data Science"}),(0,Tn.jsxs)("p",{className:"mt-1 text-sm",children:[(0,Tn.jsx)(UP,{icon:GP,size:"2x",onClick:()=>window.open("https://www.linkedin.com/in/vimukthi-polgolla/")}),(0,Tn.jsx)("span",{className:"mx-2"}),(0,Tn.jsx)(UP,{icon:qP,size:"2x",onClick:()=>window.open("https://github.com/VimukthiPolgolla")})]})]})})]})]})})]})}),(0,Tn.jsxs)("div",{className:"relative isolate overflow-hidden bg-gray-900 py-24 sm:py-32",children:[(0,Tn.jsx)("img",{src:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&crop=focalpoint&fp-y=.8&w=2830&h=1500&q=80&blend=111827&sat=-100&exp=15&blend-mode=multiply",alt:"",className:"absolute inset-0 -z-10 h-full w-full object-cover object-right md:object-center"}),(0,Tn.jsx)("div",{className:"hidden sm:absolute sm:-top-10 sm:right-1/2 sm:-z-10 sm:mr-10 sm:block sm:transform-gpu sm:blur-3xl","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"aspect-[1097/845] w-[68.5625rem] bg-gradient-to-tr from-[#ff4694] to-[#776fff] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),(0,Tn.jsx)("div",{className:"absolute -top-52 left-1/2 -z-10 -translate-x-1/2 transform-gpu blur-3xl sm:top-[-28rem] sm:ml-16 sm:translate-x-0 sm:transform-gpu","aria-hidden":"true",children:(0,Tn.jsx)("div",{className:"aspect-[1097/845] w-[68.5625rem] bg-gradient-to-tr from-[#ff4694] to-[#776fff] opacity-20",style:{clipPath:"polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"}})}),(0,Tn.jsx)("div",{className:"mx-auto max-w-7xl px-6 lg:px-8",children:(0,Tn.jsxs)("div",{className:"mx-auto max-w-2xl lg:mx-0 text-justify",children:[(0,Tn.jsx)("h2",{className:"text-4xl font-bold tracking-tight text-white sm:text-6xl",children:"Who are we?"}),(0,Tn.jsxs)("p",{className:"mt-6 text-lg leading-8 text-gray-300",children:["Our team is composed of two ambitious and talented final-year undergraduates from SLTC Research University: Imesh Ranawella pursuing a BSc (Hons) in Software Engineering and Vimukthi Polgolla specializing in BSc (Hons) in Data Science. As passionate individuals in the field of technology, we have joined forces to embark on a groundbreaking project for our final year. Our mission is to address the prevalent issue of computer vision syndrome (CVS) by developing the innovative ",(0,Tn.jsx)("b",{children:"Eye Care"}),"  App."]})]})})]}),(0,Tn.jsxs)("section",{className:"relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:px-8",children:[(0,Tn.jsx)("div",{className:"absolute inset-0 -z-10 bg-[radial-gradient(45rem_50rem_at_top,theme(colors.indigo.100),white)] opacity-20"}),(0,Tn.jsx)("div",{className:"absolute inset-y-0 right-1/2 -z-10 mr-16 w-[200%] origin-bottom-left skew-x-[-30deg] bg-white shadow-xl shadow-indigo-600/10 ring-1 ring-indigo-50 sm:mr-28 lg:mr-0 xl:mr-16 xl:origin-center"}),(0,Tn.jsxs)("div",{className:"mx-auto max-w-2xl lg:max-w-4xl",children:[(0,Tn.jsx)("img",{className:"mx-auto h-24",src:"/images/eyecaresquarelogowithtextblack.png",alt:""}),(0,Tn.jsx)("figure",{className:"mt-10",children:(0,Tn.jsx)("blockquote",{className:"text-center text-xl font-semibold leading-8 text-gray-900 sm:text-2xl sm:leading-9",children:(0,Tn.jsx)("p",{children:"\u201cThe project's goal is to forecast the likelihood that users would develop CVS and provide tailored advice using webcam-based user interaction analysis and machine learning. The main goal is to equip users, especially college students, with knowledge and resources to develop better screen usage habits, thereby lowering the risk of eye pain, headaches, back pain, neck pain, and blurred vision brought on by prolonged screen engagement. The online application's ultimate goal is to advance users' digital lifestyles and general well-being.\u201d"})})})]})]})]})}function rM(){return(0,Tn.jsxs)(Tn.Fragment,{children:[(0,Tn.jsx)(Ni,{}),(0,Tn.jsxs)("div",{className:"relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:overflow-visible lg:px-0",children:[(0,Tn.jsx)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:(0,Tn.jsxs)("svg",{className:"absolute left-[max(50%,25rem)] top-0 h-[64rem] w-[128rem] -translate-x-1/2 stroke-gray-200 [mask-image:radial-gradient(64rem_64rem_at_top,white,transparent)]","aria-hidden":"true",children:[(0,Tn.jsx)("defs",{children:(0,Tn.jsx)("pattern",{id:"e813992c-7d03-4cc4-a2bd-151760b470a0",width:200,height:200,x:"50%",y:-1,patternUnits:"userSpaceOnUse",children:(0,Tn.jsx)("path",{d:"M100 200V.5M.5 .5H200",fill:"none"})})}),(0,Tn.jsx)("svg",{x:"50%",y:-1,className:"overflow-visible fill-gray-50",children:(0,Tn.jsx)("path",{d:"M-100.5 0h201v201h-201Z M699.5 0h201v201h-201Z M499.5 400h201v201h-201Z M-300.5 600h201v201h-201Z",strokeWidth:0})}),(0,Tn.jsx)("rect",{width:"100%",height:"100%",strokeWidth:0,fill:"url(#e813992c-7d03-4cc4-a2bd-151760b470a0)"})]})}),(0,Tn.jsxs)("div",{className:"mx-auto text-justify grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 lg:mx-0 lg:max-w-none lg:grid-cols-2 lg:items-start lg:gap-y-10",children:[(0,Tn.jsx)("div",{className:"lg:col-span-2 lg:col-start-1 lg:row-start-1 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8",children:(0,Tn.jsx)("div",{className:"lg:pr-4",children:(0,Tn.jsxs)("div",{className:"lg:max-w-lg",children:[(0,Tn.jsx)("p",{className:"text-base font-semibold leading-7 text-indigo-600",children:"Computer Vision Syndrome Prevention Web Application User Manual"}),(0,Tn.jsx)("h1",{className:"mt-2 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Welcome to the Computer Vision Syndrome Prevention Web Application!"}),(0,Tn.jsx)("p",{className:"mt-6 text-xl leading-8 text-gray-700",children:"Thank you for choosing our web application dedicated to predicting and preventing Computer Vision Syndrome (CVS). This user manual will guide you through the various features and functionalities of the application to ensure a seamless and healthy computing experience."})]})})}),(0,Tn.jsx)("div",{className:"-ml-12 -mt-12 p-12 lg:sticky lg:top-4 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:(0,Tn.jsx)("img",{className:"w-[48rem] max-w-none rounded-xl bg-gray-900 shadow-xl ring-1 ring-gray-400/10 sm:w-[57rem]",src:"images/helpbanner.png",alt:""})}),(0,Tn.jsx)("div",{className:"lg:col-span-2 lg:col-start-1 lg:row-start-2 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-2 lg:gap-x-8 lg:px-8",children:(0,Tn.jsx)("div",{className:"lg:pr-4",children:(0,Tn.jsxs)("div",{className:"max-w-xl text-base leading-7 text-gray-700 lg:max-w-lg",children:[(0,Tn.jsx)("h2",{className:"mt-8 text-2xl font-bold tracking-tight text-gray-900",children:"1. Getting Started"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["1.1 System Requirements",(0,Tn.jsx)("br",{}),"Ensure that your device meets the following requirements: Web Browser: Chrome, Firefox, Safari, or Edge Webcam: Functional and connected",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"1.2 Account Creation",(0,Tn.jsx)("br",{}),'To make the most of the application, create an account by clicking on the "Sign Up" button. Provide the necessary details and follow the instructions to set up your account.',(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"1.3 Login and Dashboard Overview",(0,Tn.jsx)("br",{}),"Log in using your credentials. Upon successful login, you'll be directed to the dashboard. The dashboard provides an overview of your current usage patterns and health status."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"2. Usage Patterns and Health Tips"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["2.1 Distance and Interaction Time",(0,Tn.jsx)("br",{}),"Monitor your webcam distance and interaction time to receive personalized health tips. The application calculates these metrics and offers suggestions to prevent CVS.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"2.2 Health Tips",(0,Tn.jsx)("br",{}),"Receive real-time health tips based on your usage patterns. Follow these tips to maintain optimal eye health during computer usage.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"2.3 Warnings",(0,Tn.jsx)("br",{}),"Get warnings if your usage patterns indicate potential CVS risk. Take these warnings seriously and adjust your habits accordingly."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"3. Usage History"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["3.1 Viewing Usage History",(0,Tn.jsx)("br",{}),"Access your usage history to track trends over time. Analyze usage patterns and identify areas for improvement.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"3.2 Understanding Usage Patterns",(0,Tn.jsx)("br",{}),"Use the visualizations and statistics provided to understand how your habits impact eye health. Make informed decisions to prevent CVS."]}),(0,Tn.jsx)("h2",{className:"mt-16 text-2xl font-bold tracking-tight text-gray-900",children:"4. CVS Test Portal"}),(0,Tn.jsxs)("p",{className:"mt-6",children:["4.1 Taking the CVS Test",(0,Tn.jsx)("br",{}),"Visit the CVS Test Portal to assess your risk of Computer Vision Syndrome. Answer the questions honestly to receive accurate predictions.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"4.2 Machine Learning Prediction",(0,Tn.jsx)("br",{}),"Benefit from our machine learning model to predict your likelihood of developing CVS based on your test responses.",(0,Tn.jsx)("br",{}),(0,Tn.jsx)("br",{}),"4.3 Interpretation of Results",(0,Tn.jsx)("br",{}),"Review your test results, which include personalized recommendations for prevention and potential next steps."]}),(0,Tn.jsx)("p",{className:"mt-6 text-xl leading-8 text-gray-700",children:"Remember, the Computer Vision Syndrome Prevention Web Application is designed to enhance your well-being during computer usage. Follow the recommendations, stay informed, and enjoy a healthier digital experience!"})]})})})]})]})]})}const iM=function(){return(0,Tn.jsx)("div",{children:(0,Tn.jsx)(xe,{children:(0,Tn.jsx)("div",{children:(0,Tn.jsxs)(me,{children:[(0,Tn.jsx)(fe,{path:"/",element:(0,Tn.jsx)(Dn,{})}),(0,Tn.jsx)(fe,{path:"/login",element:(0,Tn.jsx)(Ri,{})}),(0,Tn.jsx)(fe,{path:"/signup",element:(0,Tn.jsx)(Ti,{})}),(0,Tn.jsx)(fe,{path:"/dashboard",element:(0,Tn.jsx)(lI,{})}),(0,Tn.jsx)(fe,{path:"/profile",element:(0,Tn.jsx)(cI,{})}),(0,Tn.jsx)(fe,{path:"/settings",element:(0,Tn.jsx)(dI,{})}),(0,Tn.jsx)(fe,{path:"/help",element:(0,Tn.jsx)(hI,{})}),(0,Tn.jsx)(fe,{path:"/help-home",element:(0,Tn.jsx)(rM,{})}),(0,Tn.jsx)(fe,{path:"/contacts",element:(0,Tn.jsx)(fI,{})}),(0,Tn.jsx)(fe,{path:"/about",element:(0,Tn.jsx)(KP,{})}),(0,Tn.jsx)(fe,{path:"/about-home",element:(0,Tn.jsx)(nM,{})}),(0,Tn.jsx)(fe,{path:"/health",element:(0,Tn.jsx)($P,{})}),(0,Tn.jsx)(fe,{path:"/usage",element:(0,Tn.jsx)(JP,{})}),(0,Tn.jsx)(fe,{path:"/cvs-home",element:(0,Tn.jsx)(ZP,{})}),(0,Tn.jsx)(fe,{path:"/cvs-input",element:(0,Tn.jsx)(eM,{})}),(0,Tn.jsx)(fe,{path:"/camera",element:(0,Tn.jsx)(tM,{})})]})})})})},aM=e=>{e&&e instanceof Function&&n.e(988).then(n.bind(n,988)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:o}=t;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Tn.jsx)(r.StrictMode,{children:(0,Tn.jsx)(iM,{})})),aM()})()})();
//# sourceMappingURL=main.6f15b48c.js.map